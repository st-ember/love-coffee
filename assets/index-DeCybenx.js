function lR(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function RE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sv={exports:{}},hh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function xO(){if(AS)return hh;AS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:l,ref:i!==void 0?i:null,props:o}}return hh.Fragment=e,hh.jsx=t,hh.jsxs=t,hh}var CS;function kO(){return CS||(CS=1,Sv.exports=xO()),Sv.exports}var L=kO(),wv={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function IO(){if(RS)return Ge;RS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,A={};function C(U,oe,pe){this.props=U,this.context=oe,this.refs=A,this.updater=pe||_}C.prototype.isReactComponent={},C.prototype.setState=function(U,oe){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,oe,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=C.prototype;function H(U,oe,pe){this.props=U,this.context=oe,this.refs=A,this.updater=pe||_}var X=H.prototype=new N;X.constructor=H,T(X,C.prototype),X.isPureReactComponent=!0;var ie=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},ge=Object.prototype.hasOwnProperty;function k(U,oe,pe,he,xe,Ve){return pe=Ve.ref,{$$typeof:n,type:U,key:oe,ref:pe!==void 0?pe:null,props:Ve}}function x(U,oe){return k(U.type,oe,void 0,void 0,void 0,U.props)}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function O(U){var oe={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(pe){return oe[pe]})}var z=/\/+/g;function B(U,oe){return typeof U=="object"&&U!==null&&U.key!=null?O(""+U.key):oe.toString(36)}function D(){}function rt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(D,D):(U.status="pending",U.then(function(oe){U.status==="pending"&&(U.status="fulfilled",U.value=oe)},function(oe){U.status==="pending"&&(U.status="rejected",U.reason=oe)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Ze(U,oe,pe,he,xe){var Ve=typeof U;(Ve==="undefined"||Ve==="boolean")&&(U=null);var Me=!1;if(U===null)Me=!0;else switch(Ve){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(U.$$typeof){case n:case e:Me=!0;break;case m:return Me=U._init,Ze(Me(U._payload),oe,pe,he,xe)}}if(Me)return xe=xe(U),Me=he===""?"."+B(U,0):he,ie(xe)?(pe="",Me!=null&&(pe=Me.replace(z,"$&/")+"/"),Ze(xe,oe,pe,"",function($r){return $r})):xe!=null&&(M(xe)&&(xe=x(xe,pe+(xe.key==null||U&&U.key===xe.key?"":(""+xe.key).replace(z,"$&/")+"/")+Me)),oe.push(xe)),1;Me=0;var Ot=he===""?".":he+":";if(ie(U))for(var vt=0;vt<U.length;vt++)he=U[vt],Ve=Ot+B(he,vt),Me+=Ze(he,oe,pe,Ve,xe);else if(vt=v(U),typeof vt=="function")for(U=vt.call(U),vt=0;!(he=U.next()).done;)he=he.value,Ve=Ot+B(he,vt++),Me+=Ze(he,oe,pe,Ve,xe);else if(Ve==="object"){if(typeof U.then=="function")return Ze(rt(U),oe,pe,he,xe);throw oe=String(U),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Z(U,oe,pe){if(U==null)return U;var he=[],xe=0;return Ze(U,he,"","",function(Ve){return oe.call(pe,Ve,xe++)}),he}function de(U){if(U._status===-1){var oe=U._result;oe=oe(),oe.then(function(pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=pe)},function(pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=pe)}),U._status===-1&&(U._status=0,U._result=oe)}if(U._status===1)return U._result.default;throw U._result}var ve=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function it(){}return Ge.Children={map:Z,forEach:function(U,oe,pe){Z(U,function(){oe.apply(this,arguments)},pe)},count:function(U){var oe=0;return Z(U,function(){oe++}),oe},toArray:function(U){return Z(U,function(oe){return oe})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ge.Component=C,Ge.Fragment=t,Ge.Profiler=i,Ge.PureComponent=H,Ge.StrictMode=r,Ge.Suspense=h,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(U){return te.H.useMemoCache(U)}},Ge.cache=function(U){return function(){return U.apply(null,arguments)}},Ge.cloneElement=function(U,oe,pe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var he=T({},U.props),xe=U.key,Ve=void 0;if(oe!=null)for(Me in oe.ref!==void 0&&(Ve=void 0),oe.key!==void 0&&(xe=""+oe.key),oe)!ge.call(oe,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&oe.ref===void 0||(he[Me]=oe[Me]);var Me=arguments.length-2;if(Me===1)he.children=pe;else if(1<Me){for(var Ot=Array(Me),vt=0;vt<Me;vt++)Ot[vt]=arguments[vt+2];he.children=Ot}return k(U.type,xe,void 0,void 0,Ve,he)},Ge.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Ge.createElement=function(U,oe,pe){var he,xe={},Ve=null;if(oe!=null)for(he in oe.key!==void 0&&(Ve=""+oe.key),oe)ge.call(oe,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(xe[he]=oe[he]);var Me=arguments.length-2;if(Me===1)xe.children=pe;else if(1<Me){for(var Ot=Array(Me),vt=0;vt<Me;vt++)Ot[vt]=arguments[vt+2];xe.children=Ot}if(U&&U.defaultProps)for(he in Me=U.defaultProps,Me)xe[he]===void 0&&(xe[he]=Me[he]);return k(U,Ve,void 0,void 0,null,xe)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(U){return{$$typeof:c,render:U}},Ge.isValidElement=M,Ge.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:de}},Ge.memo=function(U,oe){return{$$typeof:d,type:U,compare:oe===void 0?null:oe}},Ge.startTransition=function(U){var oe=te.T,pe={};te.T=pe;try{var he=U(),xe=te.S;xe!==null&&xe(pe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(it,ve)}catch(Ve){ve(Ve)}finally{te.T=oe}},Ge.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Ge.use=function(U){return te.H.use(U)},Ge.useActionState=function(U,oe,pe){return te.H.useActionState(U,oe,pe)},Ge.useCallback=function(U,oe){return te.H.useCallback(U,oe)},Ge.useContext=function(U){return te.H.useContext(U)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(U,oe){return te.H.useDeferredValue(U,oe)},Ge.useEffect=function(U,oe,pe){var he=te.H;if(typeof pe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return he.useEffect(U,oe)},Ge.useId=function(){return te.H.useId()},Ge.useImperativeHandle=function(U,oe,pe){return te.H.useImperativeHandle(U,oe,pe)},Ge.useInsertionEffect=function(U,oe){return te.H.useInsertionEffect(U,oe)},Ge.useLayoutEffect=function(U,oe){return te.H.useLayoutEffect(U,oe)},Ge.useMemo=function(U,oe){return te.H.useMemo(U,oe)},Ge.useOptimistic=function(U,oe){return te.H.useOptimistic(U,oe)},Ge.useReducer=function(U,oe,pe){return te.H.useReducer(U,oe,pe)},Ge.useRef=function(U){return te.H.useRef(U)},Ge.useState=function(U){return te.H.useState(U)},Ge.useSyncExternalStore=function(U,oe,pe){return te.H.useSyncExternalStore(U,oe,pe)},Ge.useTransition=function(){return te.H.useTransition()},Ge.version="19.1.0",Ge}var xS;function gf(){return xS||(xS=1,wv.exports=IO()),wv.exports}var ee=gf();const aa=RE(ee),MO=lR({__proto__:null,default:aa},[ee]);var Av={exports:{}},fh={},Cv={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS;function NO(){return kS||(kS=1,function(n){function e(Z,de){var ve=Z.length;Z.push(de);e:for(;0<ve;){var it=ve-1>>>1,U=Z[it];if(0<i(U,de))Z[it]=de,Z[ve]=U,ve=it;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var de=Z[0],ve=Z.pop();if(ve!==de){Z[0]=ve;e:for(var it=0,U=Z.length,oe=U>>>1;it<oe;){var pe=2*(it+1)-1,he=Z[pe],xe=pe+1,Ve=Z[xe];if(0>i(he,ve))xe<U&&0>i(Ve,he)?(Z[it]=Ve,Z[xe]=ve,it=xe):(Z[it]=he,Z[pe]=ve,it=pe);else if(xe<U&&0>i(Ve,ve))Z[it]=Ve,Z[xe]=ve,it=xe;else break e}}return de}function i(Z,de){var ve=Z.sortIndex-de.sortIndex;return ve!==0?ve:Z.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],d=[],m=1,y=null,v=3,_=!1,T=!1,A=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ie(Z){for(var de=t(d);de!==null;){if(de.callback===null)r(d);else if(de.startTime<=Z)r(d),de.sortIndex=de.expirationTime,e(h,de);else break;de=t(d)}}function te(Z){if(A=!1,ie(Z),!T)if(t(h)!==null)T=!0,ge||(ge=!0,B());else{var de=t(d);de!==null&&Ze(te,de.startTime-Z)}}var ge=!1,k=-1,x=5,M=-1;function O(){return C?!0:!(n.unstable_now()-M<x)}function z(){if(C=!1,ge){var Z=n.unstable_now();M=Z;var de=!0;try{e:{T=!1,A&&(A=!1,H(k),k=-1),_=!0;var ve=v;try{t:{for(ie(Z),y=t(h);y!==null&&!(y.expirationTime>Z&&O());){var it=y.callback;if(typeof it=="function"){y.callback=null,v=y.priorityLevel;var U=it(y.expirationTime<=Z);if(Z=n.unstable_now(),typeof U=="function"){y.callback=U,ie(Z),de=!0;break t}y===t(h)&&r(h),ie(Z)}else r(h);y=t(h)}if(y!==null)de=!0;else{var oe=t(d);oe!==null&&Ze(te,oe.startTime-Z),de=!1}}break e}finally{y=null,v=ve,_=!1}de=void 0}}finally{de?B():ge=!1}}}var B;if(typeof X=="function")B=function(){X(z)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,rt=D.port2;D.port1.onmessage=z,B=function(){rt.postMessage(null)}}else B=function(){N(z,0)};function Ze(Z,de){k=N(function(){Z(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(Z){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var ve=v;v=de;try{return Z()}finally{v=ve}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(Z,de){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ve=v;v=Z;try{return de()}finally{v=ve}},n.unstable_scheduleCallback=function(Z,de,ve){var it=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?it+ve:it):ve=it,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ve+U,Z={id:m++,callback:de,priorityLevel:Z,startTime:ve,expirationTime:U,sortIndex:-1},ve>it?(Z.sortIndex=ve,e(d,Z),t(h)===null&&Z===t(d)&&(A?(H(k),k=-1):A=!0,Ze(te,ve-it))):(Z.sortIndex=U,e(h,Z),T||_||(T=!0,ge||(ge=!0,B()))),Z},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Z){var de=v;return function(){var ve=v;v=de;try{return Z.apply(this,arguments)}finally{v=ve}}}}(Rv)),Rv}var IS;function OO(){return IS||(IS=1,Cv.exports=NO()),Cv.exports}var xv={exports:{}},Qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function DO(){if(MS)return Qn;MS=1;var n=gf();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:d,implementation:m}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qn.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(h,d,null,m)},Qn.flushSync=function(h){var d=l.T,m=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=d,r.p=m,r.d.f()}},Qn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(h,d))},Qn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Qn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,_=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:_}):m==="script"&&r.d.X(h,{crossOrigin:y,integrity:v,fetchPriority:_,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Qn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(h)},Qn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);r.d.L(h,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Qn.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(h)},Qn.requestFormReset=function(h){r.d.r(h)},Qn.unstable_batchedUpdates=function(h,d){return h(d)},Qn.useFormState=function(h,d,m){return l.H.useFormState(h,d,m)},Qn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Qn.version="19.1.0",Qn}var NS;function uR(){if(NS)return xv.exports;NS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xv.exports=DO(),xv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OS;function PO(){if(OS)return fh;OS=1;var n=OO(),e=gf(),t=uR();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(o(s)!==s)throw Error(r(188))}function h(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var u=s,f=a;;){var g=u.return;if(g===null)break;var E=g.alternate;if(E===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===E.child){for(E=g.child;E;){if(E===u)return c(g),s;if(E===f)return c(g),a;E=E.sibling}throw Error(r(188))}if(u.return!==f.return)u=g,f=E;else{for(var w=!1,R=g.child;R;){if(R===u){w=!0,u=g,f=E;break}if(R===f){w=!0,f=g,u=E;break}R=R.sibling}if(!w){for(R=E.child;R;){if(R===u){w=!0,u=E,f=g;break}if(R===f){w=!0,f=E,u=g;break}R=R.sibling}if(!w)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:a}function d(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=d(s),a!==null)return a;s=s.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function rt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case te:return"Suspense";case ge:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case X:return(s.displayName||"Context")+".Provider";case H:return(s._context.displayName||"Context")+".Consumer";case ie:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return a=s.displayName||null,a!==null?a:rt(s.type)||"Memo";case x:a=s._payload,s=s._init;try{return rt(s(a))}catch{}}return null}var Ze=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},it=[],U=-1;function oe(s){return{current:s}}function pe(s){0>U||(s.current=it[U],it[U]=null,U--)}function he(s,a){U++,it[U]=s.current,s.current=a}var xe=oe(null),Ve=oe(null),Me=oe(null),Ot=oe(null);function vt(s,a){switch(he(Me,a),he(Ve,s),he(xe,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Z1(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Z1(a),s=eS(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}pe(xe),he(xe,s)}function $r(){pe(xe),pe(Ve),pe(Me)}function xi(s){s.memoizedState!==null&&he(Ot,s);var a=xe.current,u=eS(a,s.type);a!==u&&(he(Ve,s),he(xe,u))}function pi(s){Ve.current===s&&(pe(xe),pe(Ve)),Ot.current===s&&(pe(Ot),oh._currentValue=ve)}var qt=Object.prototype.hasOwnProperty,hr=n.unstable_scheduleCallback,ki=n.unstable_cancelCallback,wa=n.unstable_shouldYield,Gr=n.unstable_requestPaint,fr=n.unstable_now,dc=n.unstable_getCurrentPriorityLevel,to=n.unstable_ImmediatePriority,no=n.unstable_UserBlockingPriority,hs=n.unstable_NormalPriority,pc=n.unstable_LowPriority,ro=n.unstable_IdlePriority,wr=n.log,Ii=n.unstable_setDisableYieldValue,Ut=null,pt=null;function Wt(s){if(typeof wr=="function"&&Ii(s),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(Ut,s)}catch{}}var Dt=Math.clz32?Math.clz32:fs,Aa=Math.log,io=Math.LN2;function fs(s){return s>>>=0,s===0?32:31-(Aa(s)/io|0)|0}var Kn=256,Mi=4194304;function dr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ds(s,a,u){var f=s.pendingLanes;if(f===0)return 0;var g=0,E=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var R=f&134217727;return R!==0?(f=R&~E,f!==0?g=dr(f):(w&=R,w!==0?g=dr(w):u||(u=R&~s,u!==0&&(g=dr(u))))):(R=f&~E,R!==0?g=dr(R):w!==0?g=dr(w):u||(u=f&~s,u!==0&&(g=dr(u)))),g===0?0:a!==0&&a!==g&&(a&E)===0&&(E=g&-g,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:g}function ps(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function so(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var s=Kn;return Kn<<=1,(Kn&4194048)===0&&(Kn=256),s}function oo(){var s=Mi;return Mi<<=1,(Mi&62914560)===0&&(Mi=4194304),s}function Ar(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Cr(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ca(s,a,u,f,g,E){var w=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var R=s.entanglements,P=s.expirationTimes,K=s.hiddenUpdates;for(u=w&~u;0<u;){var ne=31-Dt(u),se=1<<ne;R[ne]=0,P[ne]=-1;var Y=K[ne];if(Y!==null)for(K[ne]=null,ne=0;ne<Y.length;ne++){var Q=Y[ne];Q!==null&&(Q.lane&=-536870913)}u&=~se}f!==0&&Rr(s,f,0),E!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=E&~(w&~a))}function Rr(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var f=31-Dt(a);s.entangledLanes|=a,s.entanglements[f]=s.entanglements[f]|1073741824|u&4194090}function Ra(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-Dt(u),g=1<<f;g&a|s[f]&a&&(s[f]|=a),u&=~g}}function mi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function gi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function xr(){var s=de.p;return s!==0?s:(s=window.event,s===void 0?32:ES(s.type))}function zl(s,a){var u=de.p;try{return de.p=s,a()}finally{de.p=u}}var Pt=Math.random().toString(36).slice(2),V="__reactFiber$"+Pt,F="__reactProps$"+Pt,W="__reactContainer$"+Pt,ue="__reactEvents$"+Pt,ye="__reactListeners$"+Pt,Ce="__reactHandles$"+Pt,Pe="__reactResources$"+Pt,_e="__reactMarker$"+Pt;function Te(s){delete s[V],delete s[F],delete s[ue],delete s[ye],delete s[Ce]}function Ee(s){var a=s[V];if(a)return a;for(var u=s.parentNode;u;){if(a=u[W]||u[V]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=iS(s);s!==null;){if(u=s[V])return u;s=iS(s)}return a}s=u,u=s.parentNode}return null}function Se(s){if(s=s[V]||s[W]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function De(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Ue(s){var a=s[Pe];return a||(a=s[Pe]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ye(s){s[_e]=!0}var mt=new Set,Xe={};function ut(s,a){Wn(s,a),Wn(s+"Capture",a)}function Wn(s,a){for(Xe[s]=a,s=0;s<a.length;s++)mt.add(a[s])}var Oi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pr={},wn={};function ao(s){return qt.call(wn,s)?!0:qt.call(pr,s)?!1:Oi.test(s)?wn[s]=!0:(pr[s]=!0,!1)}function mr(s,a,u){if(ao(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function An(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function Yt(s,a,u,f){if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+f)}}var Kr,et;function gt(s){if(Kr===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Kr=a&&a[1]||"",et=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kr+s+et}var kr=!1;function Wr(s,a){if(!s||kr)return"";kr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Q){var Y=Q}Reflect.construct(s,[],se)}else{try{se.call()}catch(Q){Y=Q}s.call(se.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(se=s())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=f.DetermineComponentFrameRoot(),w=E[0],R=E[1];if(w&&R){var P=w.split(`
`),K=R.split(`
`);for(g=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;if(f===P.length||g===K.length)for(f=P.length-1,g=K.length-1;1<=f&&0<=g&&P[f]!==K[g];)g--;for(;1<=f&&0<=g;f--,g--)if(P[f]!==K[g]){if(f!==1||g!==1)do if(f--,g--,0>g||P[f]!==K[g]){var ne=`
`+P[f].replace(" at new "," at ");return s.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",s.displayName)),ne}while(1<=f&&0<=g);break}}}finally{kr=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?gt(u):""}function Lt(s){switch(s.tag){case 26:case 27:case 5:return gt(s.type);case 16:return gt("Lazy");case 13:return gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return Wr(s.type,!1);case 11:return Wr(s.type.render,!1);case 1:return Wr(s.type,!0);case 31:return gt("Activity");default:return""}}function Ir(s){try{var a="";do a+=Lt(s),s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Cn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function xa(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Rg(s){var a=xa(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,E=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,E.call(this,w)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Bl(s){s._valueTracker||(s._valueTracker=Rg(s))}function mc(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=xa(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function ka(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xg=/[\n"\\]/g;function ln(s){return s.replace(xg,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Mr(s,a,u,f,g,E,w,R){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),a!=null?w==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Cn(a)):s.value!==""+Cn(a)&&(s.value=""+Cn(a)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),a!=null?lo(s,w,Cn(a)):u!=null?lo(s,w,Cn(u)):f!=null&&s.removeAttribute("value"),g==null&&E!=null&&(s.defaultChecked=!!E),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Cn(R):s.removeAttribute("name")}function Ia(s,a,u,f,g,E,w,R){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;u=u!=null?""+Cn(u):"",a=a!=null?""+Cn(a):u,R||a===s.value||(s.value=a),s.defaultValue=a}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=R?s.checked:!!f,s.defaultChecked=!!f,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function lo(s,a,u){a==="number"&&ka(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ms(s,a,u,f){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&f&&(s[u].defaultSelected=!0)}else{for(u=""+Cn(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Rt(s,a,u){if(a!=null&&(a=""+Cn(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+Cn(u):""}function Ma(s,a,u,f){if(a==null){if(f!=null){if(u!=null)throw Error(r(92));if(Ze(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),a=u}u=Cn(a),s.defaultValue=u,f=s.textContent,f===u&&f!==""&&f!==null&&(s.value=f)}function Yr(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Na=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Of(s,a,u){var f=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":f?s.setProperty(a,u):typeof u!="number"||u===0||Na.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function gc(s,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var g in a)f=a[g],a.hasOwnProperty(g)&&u[g]!==f&&Of(s,g,f)}else for(var E in a)a.hasOwnProperty(E)&&Of(s,E,a[E])}function yc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ig=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(s){return Ig.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var gs=null;function Qr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ys=null,vs=null;function vc(s){var a=Se(s);if(a&&(s=a.stateNode)){var u=s[F]||null;e:switch(s=a.stateNode,a.type){case"input":if(Mr(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ln(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var g=f[F]||null;if(!g)throw Error(r(90));Mr(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<u.length;a++)f=u[a],f.form===s.form&&mc(f)}break e;case"textarea":Rt(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ms(s,!!u.multiple,a,!1)}}}var Di=!1;function Df(s,a,u){if(Di)return s(a,u);Di=!0;try{var f=s(a);return f}finally{if(Di=!1,(ys!==null||vs!==null)&&(Rd(),ys&&(a=ys,s=vs,vs=ys=null,vc(a),s)))for(a=0;a<s.length;a++)vc(s[a])}}function Oa(s,a){var u=s.stateNode;if(u===null)return null;var f=u[F]||null;if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(yi)try{var Da={};Object.defineProperty(Da,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Da,Da),window.removeEventListener("test",Da,Da)}catch{Xr=!1}var Pi=null,uo=null,Es=null;function Ec(){if(Es)return Es;var s,a=uo,u=a.length,f,g="value"in Pi?Pi.value:Pi.textContent,E=g.length;for(s=0;s<u&&a[s]===g[s];s++);var w=u-s;for(f=1;f<=w&&a[u-f]===g[E-f];f++);return Es=g.slice(s,1<f?1-f:void 0)}function Li(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Vi(){return!0}function _c(){return!1}function Rn(s){function a(u,f,g,E,w){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=E,this.target=w,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(u=s[R],this[R]=u?u(E):E[R]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Vi:_c,this.isPropagationStopped=_c,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),a}var _t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=Rn(_t),Pa=m({},_t,{view:0,detail:0}),Pf=Rn(Pa),Fl,ql,Ui,La=m({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:za,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ui&&(Ui&&s.type==="mousemove"?(Fl=s.screenX-Ui.screenX,ql=s.screenY-Ui.screenY):ql=Fl=0,Ui=s),Fl)},movementY:function(s){return"movementY"in s?s.movementY:ql}}),Jr=Rn(La),Lf=m({},La,{dataTransfer:0}),Mg=Rn(Lf),Va=m({},Pa,{relatedTarget:0}),$l=Rn(Va),bc=m({},_t,{animationName:0,elapsedTime:0,pseudoElement:0}),Gl=Rn(bc),Vf=m({},_t,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Kl=Rn(Vf),Ng=m({},_t,{data:0}),Tc=Rn(Ng),Ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=zf[s])?!!a[s]:!1}function za(){return Sc}var Bf=m({},Pa,{key:function(s){if(s.key){var a=Ua[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Li(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Uf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:za,charCode:function(s){return s.type==="keypress"?Li(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Li(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Wl=Rn(Bf),jf=m({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wc=Rn(jf),_s=m({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:za}),Hf=Rn(_s),Ff=m({},_t,{propertyName:0,elapsedTime:0,pseudoElement:0}),qf=Rn(Ff),$f=m({},La,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Yl=Rn($f),ir=m({},_t,{newState:0,oldState:0}),Gf=Rn(ir),Kf=[9,13,27,32],zi=yi&&"CompositionEvent"in window,p=null;yi&&"documentMode"in document&&(p=document.documentMode);var b=yi&&"TextEvent"in window&&!p,S=yi&&(!zi||p&&8<p&&11>=p),I=" ",$=!1;function J(s,a){switch(s){case"keyup":return Kf.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ct=!1;function gn(s,a){switch(s){case"compositionend":return me(a);case"keypress":return a.which!==32?null:($=!0,I);case"textInput":return s=a.data,s===I&&$?null:s;default:return null}}function ht(s,a){if(ct)return s==="compositionend"||!zi&&J(s,a)?(s=Ec(),Es=uo=Pi=null,ct=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return S&&a.locale!=="ko"?null:a.data;default:return null}}var xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yn(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!xn[s.type]:a==="textarea"}function bs(s,a,u,f){ys?vs?vs.push(f):vs=[f]:ys=f,a=Od(a,"onChange"),0<a.length&&(u=new Hl("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var Vn=null,Bi=null;function Ac(s){W1(s,0)}function Wf(s){var a=De(s);if(mc(a))return s}function mb(s,a){if(s==="change")return a}var gb=!1;if(yi){var Og;if(yi){var Dg="oninput"in document;if(!Dg){var yb=document.createElement("div");yb.setAttribute("oninput","return;"),Dg=typeof yb.oninput=="function"}Og=Dg}else Og=!1;gb=Og&&(!document.documentMode||9<document.documentMode)}function vb(){Vn&&(Vn.detachEvent("onpropertychange",Eb),Bi=Vn=null)}function Eb(s){if(s.propertyName==="value"&&Wf(Bi)){var a=[];bs(a,Bi,s,Qr(s)),Df(Ac,a)}}function i2(s,a,u){s==="focusin"?(vb(),Vn=a,Bi=u,Vn.attachEvent("onpropertychange",Eb)):s==="focusout"&&vb()}function s2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wf(Bi)}function o2(s,a){if(s==="click")return Wf(a)}function a2(s,a){if(s==="input"||s==="change")return Wf(a)}function l2(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Nr=typeof Object.is=="function"?Object.is:l2;function Cc(s,a){if(Nr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!qt.call(a,g)||!Nr(s[g],a[g]))return!1}return!0}function _b(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function bb(s,a){var u=_b(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=_b(u)}}function Tb(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Tb(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Sb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ka(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ka(s.document)}return a}function Pg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var u2=yi&&"documentMode"in document&&11>=document.documentMode,Ql=null,Lg=null,Rc=null,Vg=!1;function wb(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Vg||Ql==null||Ql!==ka(f)||(f=Ql,"selectionStart"in f&&Pg(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Rc&&Cc(Rc,f)||(Rc=f,f=Od(Lg,"onSelect"),0<f.length&&(a=new Hl("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=Ql)))}function Ba(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Xl={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},Ug={},Ab={};yi&&(Ab=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function ja(s){if(Ug[s])return Ug[s];if(!Xl[s])return s;var a=Xl[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Ab)return Ug[s]=a[u];return s}var Cb=ja("animationend"),Rb=ja("animationiteration"),xb=ja("animationstart"),c2=ja("transitionrun"),h2=ja("transitionstart"),f2=ja("transitioncancel"),kb=ja("transitionend"),Ib=new Map,zg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zg.push("scrollEnd");function vi(s,a){Ib.set(s,a),ut(a,[s])}var Mb=new WeakMap;function Zr(s,a){if(typeof s=="object"&&s!==null){var u=Mb.get(s);return u!==void 0?u:(a={value:s,source:a,stack:Ir(a)},Mb.set(s,a),a)}return{value:s,source:a,stack:Ir(a)}}var ei=[],Jl=0,Bg=0;function Yf(){for(var s=Jl,a=Bg=Jl=0;a<s;){var u=ei[a];ei[a++]=null;var f=ei[a];ei[a++]=null;var g=ei[a];ei[a++]=null;var E=ei[a];if(ei[a++]=null,f!==null&&g!==null){var w=f.pending;w===null?g.next=g:(g.next=w.next,w.next=g),f.pending=g}E!==0&&Nb(u,g,E)}}function Qf(s,a,u,f){ei[Jl++]=s,ei[Jl++]=a,ei[Jl++]=u,ei[Jl++]=f,Bg|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function jg(s,a,u,f){return Qf(s,a,u,f),Xf(s)}function Zl(s,a){return Qf(s,null,null,a),Xf(s)}function Nb(s,a,u){s.lanes|=u;var f=s.alternate;f!==null&&(f.lanes|=u);for(var g=!1,E=s.return;E!==null;)E.childLanes|=u,f=E.alternate,f!==null&&(f.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(g=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,g&&a!==null&&(g=31-Dt(u),s=E.hiddenUpdates,f=s[g],f===null?s[g]=[a]:f.push(a),a.lane=u|536870912),E):null}function Xf(s){if(50<Jc)throw Jc=0,Ky=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var eu={};function d2(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(s,a,u,f){return new d2(s,a,u,f)}function Hg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ts(s,a){var u=s.alternate;return u===null?(u=Or(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Ob(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Jf(s,a,u,f,g,E){var w=0;if(f=s,typeof s=="function")Hg(s)&&(w=1);else if(typeof s=="string")w=mO(s,u,xe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=Or(31,u,a,g),s.elementType=M,s.lanes=E,s;case T:return Ha(u.children,g,E,a);case A:w=8,g|=24;break;case C:return s=Or(12,u,a,g|2),s.elementType=C,s.lanes=E,s;case te:return s=Or(13,u,a,g),s.elementType=te,s.lanes=E,s;case ge:return s=Or(19,u,a,g),s.elementType=ge,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case N:case X:w=10;break e;case H:w=9;break e;case ie:w=11;break e;case k:w=14;break e;case x:w=16,f=null;break e}w=29,u=Error(r(130,s===null?"null":typeof s,"")),f=null}return a=Or(w,u,a,g),a.elementType=s,a.type=f,a.lanes=E,a}function Ha(s,a,u,f){return s=Or(7,s,f,a),s.lanes=u,s}function Fg(s,a,u){return s=Or(6,s,null,a),s.lanes=u,s}function qg(s,a,u){return a=Or(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var tu=[],nu=0,Zf=null,ed=0,ti=[],ni=0,Fa=null,Ss=1,ws="";function qa(s,a){tu[nu++]=ed,tu[nu++]=Zf,Zf=s,ed=a}function Db(s,a,u){ti[ni++]=Ss,ti[ni++]=ws,ti[ni++]=Fa,Fa=s;var f=Ss;s=ws;var g=32-Dt(f)-1;f&=~(1<<g),u+=1;var E=32-Dt(a)+g;if(30<E){var w=g-g%5;E=(f&(1<<w)-1).toString(32),f>>=w,g-=w,Ss=1<<32-Dt(a)+g|u<<g|f,ws=E+s}else Ss=1<<E|u<<g|f,ws=s}function $g(s){s.return!==null&&(qa(s,1),Db(s,1,0))}function Gg(s){for(;s===Zf;)Zf=tu[--nu],tu[nu]=null,ed=tu[--nu],tu[nu]=null;for(;s===Fa;)Fa=ti[--ni],ti[ni]=null,ws=ti[--ni],ti[ni]=null,Ss=ti[--ni],ti[ni]=null}var sr=null,Qt=null,Et=!1,$a=null,ji=!1,Kg=Error(r(519));function Ga(s){var a=Error(r(418,""));throw Ic(Zr(a,s)),Kg}function Pb(s){var a=s.stateNode,u=s.type,f=s.memoizedProps;switch(a[V]=s,a[F]=f,u){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(u=0;u<eh.length;u++)nt(eh[u],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),Ia(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Bl(a);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Ma(a,f.value,f.defaultValue,f.children),Bl(a)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||f.suppressHydrationWarning===!0||J1(a.textContent,u)?(f.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),f.onScroll!=null&&nt("scroll",a),f.onScrollEnd!=null&&nt("scrollend",a),f.onClick!=null&&(a.onclick=Dd),a=!0):a=!1,a||Ga(s)}function Lb(s){for(sr=s.return;sr;)switch(sr.tag){case 5:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:sr=sr.return}}function xc(s){if(s!==sr)return!1;if(!Et)return Lb(s),Et=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||uv(s.type,s.memoizedProps)),u=!u),u&&Qt&&Ga(s),Lb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(a===0){Qt=_i(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;s=s.nextSibling}Qt=null}}else a===27?(a=Qt,Co(s.type)?(s=dv,dv=null,Qt=s):Qt=a):Qt=sr?_i(s.stateNode.nextSibling):null;return!0}function kc(){Qt=sr=null,Et=!1}function Vb(){var s=$a;return s!==null&&(vr===null?vr=s:vr.push.apply(vr,s),$a=null),s}function Ic(s){$a===null?$a=[s]:$a.push(s)}var Wg=oe(null),Ka=null,As=null;function co(s,a,u){he(Wg,a._currentValue),a._currentValue=u}function Cs(s){s._currentValue=Wg.current,pe(Wg)}function Yg(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function Qg(s,a,u,f){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var E=g.dependencies;if(E!==null){var w=g.child;E=E.firstContext;e:for(;E!==null;){var R=E;E=g;for(var P=0;P<a.length;P++)if(R.context===a[P]){E.lanes|=u,R=E.alternate,R!==null&&(R.lanes|=u),Yg(E.return,u,s),f||(w=null);break e}E=R.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(r(341));w.lanes|=u,E=w.alternate,E!==null&&(E.lanes|=u),Yg(w,u,s),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function Mc(s,a,u,f){s=null;for(var g=a,E=!1;g!==null;){if(!E){if((g.flags&524288)!==0)E=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var R=g.type;Nr(g.pendingProps.value,w.value)||(s!==null?s.push(R):s=[R])}}else if(g===Ot.current){if(w=g.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(oh):s=[oh])}g=g.return}s!==null&&Qg(a,s,u,f),a.flags|=262144}function td(s){for(s=s.firstContext;s!==null;){if(!Nr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Wa(s){Ka=s,As=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Yn(s){return Ub(Ka,s)}function nd(s,a){return Ka===null&&Wa(s),Ub(s,a)}function Ub(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},As===null){if(s===null)throw Error(r(308));As=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else As=As.next=a;return u}var p2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,f){s.push(f)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},m2=n.unstable_scheduleCallback,g2=n.unstable_NormalPriority,vn={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xg(){return{controller:new p2,data:new Map,refCount:0}}function Nc(s){s.refCount--,s.refCount===0&&m2(g2,function(){s.controller.abort()})}var Oc=null,Jg=0,ru=0,iu=null;function y2(s,a){if(Oc===null){var u=Oc=[];Jg=0,ru=ev(),iu={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Jg++,a.then(zb,zb),a}function zb(){if(--Jg===0&&Oc!==null){iu!==null&&(iu.status="fulfilled");var s=Oc;Oc=null,ru=0,iu=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function v2(s,a){var u=[],f={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){f.status="fulfilled",f.value=a;for(var g=0;g<u.length;g++)(0,u[g])(a)},function(g){for(f.status="rejected",f.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),f}var Bb=Z.S;Z.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&y2(s,a),Bb!==null&&Bb(s,a)};var Ya=oe(null);function Zg(){var s=Ya.current;return s!==null?s:Vt.pooledCache}function rd(s,a){a===null?he(Ya,Ya.current):he(Ya,a.pool)}function jb(){var s=Zg();return s===null?null:{parent:vn._currentValue,pool:s}}var Dc=Error(r(460)),Hb=Error(r(474)),id=Error(r(542)),ey={then:function(){}};function Fb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sd(){}function qb(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(sd,sd),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Gb(s),s;default:if(typeof a.status=="string")a.then(sd,sd);else{if(s=Vt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(f){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=f}},function(f){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Gb(s),s}throw Pc=a,Dc}}var Pc=null;function $b(){if(Pc===null)throw Error(r(459));var s=Pc;return Pc=null,s}function Gb(s){if(s===Dc||s===id)throw Error(r(483))}var ho=!1;function ty(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ny(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function fo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function po(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Tt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,a=Xf(s),Nb(s,null,u),a}return Qf(s,f,a,u),Xf(s)}function Lc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,Ra(s,u)}}function ry(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var w={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?g=E=w:E=E.next=w,u=u.next}while(u!==null);E===null?g=E=a:E=E.next=a}else g=E=a;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:E,shared:f.shared,callbacks:f.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var iy=!1;function Vc(){if(iy){var s=iu;if(s!==null)throw s}}function Uc(s,a,u,f){iy=!1;var g=s.updateQueue;ho=!1;var E=g.firstBaseUpdate,w=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var P=R,K=P.next;P.next=null,w===null?E=K:w.next=K,w=P;var ne=s.alternate;ne!==null&&(ne=ne.updateQueue,R=ne.lastBaseUpdate,R!==w&&(R===null?ne.firstBaseUpdate=K:R.next=K,ne.lastBaseUpdate=P))}if(E!==null){var se=g.baseState;w=0,ne=K=P=null,R=E;do{var Y=R.lane&-536870913,Q=Y!==R.lane;if(Q?(ft&Y)===Y:(f&Y)===Y){Y!==0&&Y===ru&&(iy=!0),ne!==null&&(ne=ne.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var He=s,Le=R;Y=a;var It=u;switch(Le.tag){case 1:if(He=Le.payload,typeof He=="function"){se=He.call(It,se,Y);break e}se=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Le.payload,Y=typeof He=="function"?He.call(It,se,Y):He,Y==null)break e;se=m({},se,Y);break e;case 2:ho=!0}}Y=R.callback,Y!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=g.callbacks,Q===null?g.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ne===null?(K=ne=Q,P=se):ne=ne.next=Q,w|=Y;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;Q=R,R=Q.next,Q.next=null,g.lastBaseUpdate=Q,g.shared.pending=null}}while(!0);ne===null&&(P=se),g.baseState=P,g.firstBaseUpdate=K,g.lastBaseUpdate=ne,E===null&&(g.shared.lanes=0),To|=w,s.lanes=w,s.memoizedState=se}}function Kb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Wb(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Kb(u[s],a)}var su=oe(null),od=oe(0);function Yb(s,a){s=Os,he(od,s),he(su,a),Os=s|a.baseLanes}function sy(){he(od,Os),he(su,su.current)}function oy(){Os=od.current,pe(su),pe(od)}var mo=0,Qe=null,xt=null,un=null,ad=!1,ou=!1,Qa=!1,ld=0,zc=0,au=null,E2=0;function rn(){throw Error(r(321))}function ay(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Nr(s[u],a[u]))return!1;return!0}function ly(s,a,u,f,g,E){return mo=E,Qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Z.H=s===null||s.memoizedState===null?NT:OT,Qa=!1,E=u(f,g),Qa=!1,ou&&(E=Xb(a,u,f,g)),Qb(s),E}function Qb(s){Z.H=pd;var a=xt!==null&&xt.next!==null;if(mo=0,un=xt=Qe=null,ad=!1,zc=0,au=null,a)throw Error(r(300));s===null||kn||(s=s.dependencies,s!==null&&td(s)&&(kn=!0))}function Xb(s,a,u,f){Qe=s;var g=0;do{if(ou&&(au=null),zc=0,ou=!1,25<=g)throw Error(r(301));if(g+=1,un=xt=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}Z.H=C2,E=a(u,f)}while(ou);return E}function _2(){var s=Z.H,a=s.useState()[0];return a=typeof a.then=="function"?Bc(a):a,s=s.useState()[0],(xt!==null?xt.memoizedState:null)!==s&&(Qe.flags|=1024),a}function uy(){var s=ld!==0;return ld=0,s}function cy(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function hy(s){if(ad){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ad=!1}mo=0,un=xt=Qe=null,ou=!1,zc=ld=0,au=null}function gr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?Qe.memoizedState=un=s:un=un.next=s,un}function cn(){if(xt===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=xt.next;var a=un===null?Qe.memoizedState:un.next;if(a!==null)un=a,xt=s;else{if(s===null)throw Qe.alternate===null?Error(r(467)):Error(r(310));xt=s,s={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},un===null?Qe.memoizedState=un=s:un=un.next=s}return un}function fy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bc(s){var a=zc;return zc+=1,au===null&&(au=[]),s=qb(au,s,a),a=Qe,(un===null?a.memoizedState:un.next)===null&&(a=a.alternate,Z.H=a===null||a.memoizedState===null?NT:OT),s}function ud(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bc(s);if(s.$$typeof===X)return Yn(s)}throw Error(r(438,String(s)))}function dy(s){var a=null,u=Qe.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var f=Qe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=fy(),Qe.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),f=0;f<s;f++)u[f]=O;return a.index++,u}function Rs(s,a){return typeof a=="function"?a(s):a}function cd(s){var a=cn();return py(a,xt,s)}function py(s,a,u){var f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var g=s.baseQueue,E=f.pending;if(E!==null){if(g!==null){var w=g.next;g.next=E.next,E.next=w}a.baseQueue=g=E,f.pending=null}if(E=s.baseState,g===null)s.memoizedState=E;else{a=g.next;var R=w=null,P=null,K=a,ne=!1;do{var se=K.lane&-536870913;if(se!==K.lane?(ft&se)===se:(mo&se)===se){var Y=K.revertLane;if(Y===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),se===ru&&(ne=!0);else if((mo&Y)===Y){K=K.next,Y===ru&&(ne=!0);continue}else se={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(R=P=se,w=E):P=P.next=se,Qe.lanes|=Y,To|=Y;se=K.action,Qa&&u(E,se),E=K.hasEagerState?K.eagerState:u(E,se)}else Y={lane:se,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},P===null?(R=P=Y,w=E):P=P.next=Y,Qe.lanes|=se,To|=se;K=K.next}while(K!==null&&K!==a);if(P===null?w=E:P.next=R,!Nr(E,s.memoizedState)&&(kn=!0,ne&&(u=iu,u!==null)))throw u;s.memoizedState=E,s.baseState=w,s.baseQueue=P,f.lastRenderedState=E}return g===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function my(s){var a=cn(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var f=u.dispatch,g=u.pending,E=a.memoizedState;if(g!==null){u.pending=null;var w=g=g.next;do E=s(E,w.action),w=w.next;while(w!==g);Nr(E,a.memoizedState)||(kn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,f]}function Jb(s,a,u){var f=Qe,g=cn(),E=Et;if(E){if(u===void 0)throw Error(r(407));u=u()}else u=a();var w=!Nr((xt||g).memoizedState,u);w&&(g.memoizedState=u,kn=!0),g=g.queue;var R=tT.bind(null,f,g,s);if(jc(2048,8,R,[s]),g.getSnapshot!==a||w||un!==null&&un.memoizedState.tag&1){if(f.flags|=2048,lu(9,hd(),eT.bind(null,f,g,u,a),null),Vt===null)throw Error(r(349));E||(mo&124)!==0||Zb(f,a,u)}return u}function Zb(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Qe.updateQueue,a===null?(a=fy(),Qe.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function eT(s,a,u,f){a.value=u,a.getSnapshot=f,nT(a)&&rT(s)}function tT(s,a,u){return u(function(){nT(a)&&rT(s)})}function nT(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Nr(s,u)}catch{return!0}}function rT(s){var a=Zl(s,2);a!==null&&Ur(a,s,2)}function gy(s){var a=gr();if(typeof s=="function"){var u=s;if(s=u(),Qa){Wt(!0);try{u()}finally{Wt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:s},a}function iT(s,a,u,f){return s.baseState=u,py(s,xt,typeof f=="function"?f:Rs)}function b2(s,a,u,f,g){if(dd(s))throw Error(r(485));if(s=a.action,s!==null){var E={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){E.listeners.push(w)}};Z.T!==null?u(!0):E.isTransition=!1,f(E),u=a.pending,u===null?(E.next=a.pending=E,sT(a,E)):(E.next=u.next,a.pending=u.next=E)}}function sT(s,a){var u=a.action,f=a.payload,g=s.state;if(a.isTransition){var E=Z.T,w={};Z.T=w;try{var R=u(g,f),P=Z.S;P!==null&&P(w,R),oT(s,a,R)}catch(K){yy(s,a,K)}finally{Z.T=E}}else try{E=u(g,f),oT(s,a,E)}catch(K){yy(s,a,K)}}function oT(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){aT(s,a,f)},function(f){return yy(s,a,f)}):aT(s,a,u)}function aT(s,a,u){a.status="fulfilled",a.value=u,lT(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,sT(s,u)))}function yy(s,a,u){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=u,lT(a),a=a.next;while(a!==f)}s.action=null}function lT(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function uT(s,a){return a}function cT(s,a){if(Et){var u=Vt.formState;if(u!==null){e:{var f=Qe;if(Et){if(Qt){t:{for(var g=Qt,E=ji;g.nodeType!==8;){if(!E){g=null;break t}if(g=_i(g.nextSibling),g===null){g=null;break t}}E=g.data,g=E==="F!"||E==="F"?g:null}if(g){Qt=_i(g.nextSibling),f=g.data==="F!";break e}}Ga(f)}f=!1}f&&(a=u[0])}}return u=gr(),u.memoizedState=u.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uT,lastRenderedState:a},u.queue=f,u=kT.bind(null,Qe,f),f.dispatch=u,f=gy(!1),E=Ty.bind(null,Qe,!1,f.queue),f=gr(),g={state:a,dispatch:null,action:s,pending:null},f.queue=g,u=b2.bind(null,Qe,g,E,u),g.dispatch=u,f.memoizedState=s,[a,u,!1]}function hT(s){var a=cn();return fT(a,xt,s)}function fT(s,a,u){if(a=py(s,a,uT)[0],s=cd(Rs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=Bc(a)}catch(w){throw w===Dc?id:w}else f=a;a=cn();var g=a.queue,E=g.dispatch;return u!==a.memoizedState&&(Qe.flags|=2048,lu(9,hd(),T2.bind(null,g,u),null)),[f,E,s]}function T2(s,a){s.action=a}function dT(s){var a=cn(),u=xt;if(u!==null)return fT(a,u,s);cn(),a=a.memoizedState,u=cn();var f=u.queue.dispatch;return u.memoizedState=s,[a,f,!1]}function lu(s,a,u,f){return s={tag:s,create:u,deps:f,inst:a,next:null},a=Qe.updateQueue,a===null&&(a=fy(),Qe.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s),s}function hd(){return{destroy:void 0,resource:void 0}}function pT(){return cn().memoizedState}function fd(s,a,u,f){var g=gr();f=f===void 0?null:f,Qe.flags|=s,g.memoizedState=lu(1|a,hd(),u,f)}function jc(s,a,u,f){var g=cn();f=f===void 0?null:f;var E=g.memoizedState.inst;xt!==null&&f!==null&&ay(f,xt.memoizedState.deps)?g.memoizedState=lu(a,E,u,f):(Qe.flags|=s,g.memoizedState=lu(1|a,E,u,f))}function mT(s,a){fd(8390656,8,s,a)}function gT(s,a){jc(2048,8,s,a)}function yT(s,a){return jc(4,2,s,a)}function vT(s,a){return jc(4,4,s,a)}function ET(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function _T(s,a,u){u=u!=null?u.concat([s]):null,jc(4,4,ET.bind(null,a,s),u)}function vy(){}function bT(s,a){var u=cn();a=a===void 0?null:a;var f=u.memoizedState;return a!==null&&ay(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function TT(s,a){var u=cn();a=a===void 0?null:a;var f=u.memoizedState;if(a!==null&&ay(a,f[1]))return f[0];if(f=s(),Qa){Wt(!0);try{s()}finally{Wt(!1)}}return u.memoizedState=[f,a],f}function Ey(s,a,u){return u===void 0||(mo&1073741824)!==0?s.memoizedState=a:(s.memoizedState=u,s=A1(),Qe.lanes|=s,To|=s,u)}function ST(s,a,u,f){return Nr(u,a)?u:su.current!==null?(s=Ey(s,u,f),Nr(s,a)||(kn=!0),s):(mo&42)===0?(kn=!0,s.memoizedState=u):(s=A1(),Qe.lanes|=s,To|=s,a)}function wT(s,a,u,f,g){var E=de.p;de.p=E!==0&&8>E?E:8;var w=Z.T,R={};Z.T=R,Ty(s,!1,a,u);try{var P=g(),K=Z.S;if(K!==null&&K(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ne=v2(P,f);Hc(s,a,ne,Vr(s))}else Hc(s,a,f,Vr(s))}catch(se){Hc(s,a,{then:function(){},status:"rejected",reason:se},Vr())}finally{de.p=E,Z.T=w}}function S2(){}function _y(s,a,u,f){if(s.tag!==5)throw Error(r(476));var g=AT(s).queue;wT(s,g,a,ve,u===null?S2:function(){return CT(s),u(f)})}function AT(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:ve},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function CT(s){var a=AT(s).next.queue;Hc(s,a,{},Vr())}function by(){return Yn(oh)}function RT(){return cn().memoizedState}function xT(){return cn().memoizedState}function w2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Vr();s=fo(u);var f=po(a,s,u);f!==null&&(Ur(f,a,u),Lc(f,a,u)),a={cache:Xg()},s.payload=a;return}a=a.return}}function A2(s,a,u){var f=Vr();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},dd(s)?IT(a,u):(u=jg(s,a,u,f),u!==null&&(Ur(u,s,f),MT(u,a,f)))}function kT(s,a,u){var f=Vr();Hc(s,a,u,f)}function Hc(s,a,u,f){var g={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(dd(s))IT(a,g);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var w=a.lastRenderedState,R=E(w,u);if(g.hasEagerState=!0,g.eagerState=R,Nr(R,w))return Qf(s,a,g,0),Vt===null&&Yf(),!1}catch{}finally{}if(u=jg(s,a,g,f),u!==null)return Ur(u,s,f),MT(u,a,f),!0}return!1}function Ty(s,a,u,f){if(f={lane:2,revertLane:ev(),action:f,hasEagerState:!1,eagerState:null,next:null},dd(s)){if(a)throw Error(r(479))}else a=jg(s,u,f,2),a!==null&&Ur(a,s,2)}function dd(s){var a=s.alternate;return s===Qe||a!==null&&a===Qe}function IT(s,a){ou=ad=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function MT(s,a,u){if((u&4194048)!==0){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,Ra(s,u)}}var pd={readContext:Yn,use:ud,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn},NT={readContext:Yn,use:ud,useCallback:function(s,a){return gr().memoizedState=[s,a===void 0?null:a],s},useContext:Yn,useEffect:mT,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,fd(4194308,4,ET.bind(null,a,s),u)},useLayoutEffect:function(s,a){return fd(4194308,4,s,a)},useInsertionEffect:function(s,a){fd(4,2,s,a)},useMemo:function(s,a){var u=gr();a=a===void 0?null:a;var f=s();if(Qa){Wt(!0);try{s()}finally{Wt(!1)}}return u.memoizedState=[f,a],f},useReducer:function(s,a,u){var f=gr();if(u!==void 0){var g=u(a);if(Qa){Wt(!0);try{u(a)}finally{Wt(!1)}}}else g=a;return f.memoizedState=f.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},f.queue=s,s=s.dispatch=A2.bind(null,Qe,s),[f.memoizedState,s]},useRef:function(s){var a=gr();return s={current:s},a.memoizedState=s},useState:function(s){s=gy(s);var a=s.queue,u=kT.bind(null,Qe,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:vy,useDeferredValue:function(s,a){var u=gr();return Ey(u,s,a)},useTransition:function(){var s=gy(!1);return s=wT.bind(null,Qe,s.queue,!0,!1),gr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var f=Qe,g=gr();if(Et){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Vt===null)throw Error(r(349));(ft&124)!==0||Zb(f,a,u)}g.memoizedState=u;var E={value:u,getSnapshot:a};return g.queue=E,mT(tT.bind(null,f,E,s),[s]),f.flags|=2048,lu(9,hd(),eT.bind(null,f,E,u,a),null),u},useId:function(){var s=gr(),a=Vt.identifierPrefix;if(Et){var u=ws,f=Ss;u=(f&~(1<<32-Dt(f)-1)).toString(32)+u,a=""+a+"R"+u,u=ld++,0<u&&(a+="H"+u.toString(32)),a+=""}else u=E2++,a=""+a+"r"+u.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:by,useFormState:cT,useActionState:cT,useOptimistic:function(s){var a=gr();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Ty.bind(null,Qe,!0,u),u.dispatch=a,[s,a]},useMemoCache:dy,useCacheRefresh:function(){return gr().memoizedState=w2.bind(null,Qe)}},OT={readContext:Yn,use:ud,useCallback:bT,useContext:Yn,useEffect:gT,useImperativeHandle:_T,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:TT,useReducer:cd,useRef:pT,useState:function(){return cd(Rs)},useDebugValue:vy,useDeferredValue:function(s,a){var u=cn();return ST(u,xt.memoizedState,s,a)},useTransition:function(){var s=cd(Rs)[0],a=cn().memoizedState;return[typeof s=="boolean"?s:Bc(s),a]},useSyncExternalStore:Jb,useId:RT,useHostTransitionStatus:by,useFormState:hT,useActionState:hT,useOptimistic:function(s,a){var u=cn();return iT(u,xt,s,a)},useMemoCache:dy,useCacheRefresh:xT},C2={readContext:Yn,use:ud,useCallback:bT,useContext:Yn,useEffect:gT,useImperativeHandle:_T,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:TT,useReducer:my,useRef:pT,useState:function(){return my(Rs)},useDebugValue:vy,useDeferredValue:function(s,a){var u=cn();return xt===null?Ey(u,s,a):ST(u,xt.memoizedState,s,a)},useTransition:function(){var s=my(Rs)[0],a=cn().memoizedState;return[typeof s=="boolean"?s:Bc(s),a]},useSyncExternalStore:Jb,useId:RT,useHostTransitionStatus:by,useFormState:dT,useActionState:dT,useOptimistic:function(s,a){var u=cn();return xt!==null?iT(u,xt,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:dy,useCacheRefresh:xT},uu=null,Fc=0;function md(s){var a=Fc;return Fc+=1,uu===null&&(uu=[]),qb(uu,s,a)}function qc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function gd(s,a){throw a.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function DT(s){var a=s._init;return a(s._payload)}function PT(s){function a(q,j){if(s){var G=q.deletions;G===null?(q.deletions=[j],q.flags|=16):G.push(j)}}function u(q,j){if(!s)return null;for(;j!==null;)a(q,j),j=j.sibling;return null}function f(q){for(var j=new Map;q!==null;)q.key!==null?j.set(q.key,q):j.set(q.index,q),q=q.sibling;return j}function g(q,j){return q=Ts(q,j),q.index=0,q.sibling=null,q}function E(q,j,G){return q.index=G,s?(G=q.alternate,G!==null?(G=G.index,G<j?(q.flags|=67108866,j):G):(q.flags|=67108866,j)):(q.flags|=1048576,j)}function w(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function R(q,j,G,re){return j===null||j.tag!==6?(j=Fg(G,q.mode,re),j.return=q,j):(j=g(j,G),j.return=q,j)}function P(q,j,G,re){var Ae=G.type;return Ae===T?ne(q,j,G.props.children,re,G.key):j!==null&&(j.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===x&&DT(Ae)===j.type)?(j=g(j,G.props),qc(j,G),j.return=q,j):(j=Jf(G.type,G.key,G.props,null,q.mode,re),qc(j,G),j.return=q,j)}function K(q,j,G,re){return j===null||j.tag!==4||j.stateNode.containerInfo!==G.containerInfo||j.stateNode.implementation!==G.implementation?(j=qg(G,q.mode,re),j.return=q,j):(j=g(j,G.children||[]),j.return=q,j)}function ne(q,j,G,re,Ae){return j===null||j.tag!==7?(j=Ha(G,q.mode,re,Ae),j.return=q,j):(j=g(j,G),j.return=q,j)}function se(q,j,G){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Fg(""+j,q.mode,G),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return G=Jf(j.type,j.key,j.props,null,q.mode,G),qc(G,j),G.return=q,G;case _:return j=qg(j,q.mode,G),j.return=q,j;case x:var re=j._init;return j=re(j._payload),se(q,j,G)}if(Ze(j)||B(j))return j=Ha(j,q.mode,G,null),j.return=q,j;if(typeof j.then=="function")return se(q,md(j),G);if(j.$$typeof===X)return se(q,nd(q,j),G);gd(q,j)}return null}function Y(q,j,G,re){var Ae=j!==null?j.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Ae!==null?null:R(q,j,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return G.key===Ae?P(q,j,G,re):null;case _:return G.key===Ae?K(q,j,G,re):null;case x:return Ae=G._init,G=Ae(G._payload),Y(q,j,G,re)}if(Ze(G)||B(G))return Ae!==null?null:ne(q,j,G,re,null);if(typeof G.then=="function")return Y(q,j,md(G),re);if(G.$$typeof===X)return Y(q,j,nd(q,G),re);gd(q,G)}return null}function Q(q,j,G,re,Ae){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return q=q.get(G)||null,R(j,q,""+re,Ae);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case v:return q=q.get(re.key===null?G:re.key)||null,P(j,q,re,Ae);case _:return q=q.get(re.key===null?G:re.key)||null,K(j,q,re,Ae);case x:var Je=re._init;return re=Je(re._payload),Q(q,j,G,re,Ae)}if(Ze(re)||B(re))return q=q.get(G)||null,ne(j,q,re,Ae,null);if(typeof re.then=="function")return Q(q,j,G,md(re),Ae);if(re.$$typeof===X)return Q(q,j,G,nd(j,re),Ae);gd(j,re)}return null}function He(q,j,G,re){for(var Ae=null,Je=null,ke=j,ze=j=0,Mn=null;ke!==null&&ze<G.length;ze++){ke.index>ze?(Mn=ke,ke=null):Mn=ke.sibling;var yt=Y(q,ke,G[ze],re);if(yt===null){ke===null&&(ke=Mn);break}s&&ke&&yt.alternate===null&&a(q,ke),j=E(yt,j,ze),Je===null?Ae=yt:Je.sibling=yt,Je=yt,ke=Mn}if(ze===G.length)return u(q,ke),Et&&qa(q,ze),Ae;if(ke===null){for(;ze<G.length;ze++)ke=se(q,G[ze],re),ke!==null&&(j=E(ke,j,ze),Je===null?Ae=ke:Je.sibling=ke,Je=ke);return Et&&qa(q,ze),Ae}for(ke=f(ke);ze<G.length;ze++)Mn=Q(ke,q,ze,G[ze],re),Mn!==null&&(s&&Mn.alternate!==null&&ke.delete(Mn.key===null?ze:Mn.key),j=E(Mn,j,ze),Je===null?Ae=Mn:Je.sibling=Mn,Je=Mn);return s&&ke.forEach(function(Mo){return a(q,Mo)}),Et&&qa(q,ze),Ae}function Le(q,j,G,re){if(G==null)throw Error(r(151));for(var Ae=null,Je=null,ke=j,ze=j=0,Mn=null,yt=G.next();ke!==null&&!yt.done;ze++,yt=G.next()){ke.index>ze?(Mn=ke,ke=null):Mn=ke.sibling;var Mo=Y(q,ke,yt.value,re);if(Mo===null){ke===null&&(ke=Mn);break}s&&ke&&Mo.alternate===null&&a(q,ke),j=E(Mo,j,ze),Je===null?Ae=Mo:Je.sibling=Mo,Je=Mo,ke=Mn}if(yt.done)return u(q,ke),Et&&qa(q,ze),Ae;if(ke===null){for(;!yt.done;ze++,yt=G.next())yt=se(q,yt.value,re),yt!==null&&(j=E(yt,j,ze),Je===null?Ae=yt:Je.sibling=yt,Je=yt);return Et&&qa(q,ze),Ae}for(ke=f(ke);!yt.done;ze++,yt=G.next())yt=Q(ke,q,ze,yt.value,re),yt!==null&&(s&&yt.alternate!==null&&ke.delete(yt.key===null?ze:yt.key),j=E(yt,j,ze),Je===null?Ae=yt:Je.sibling=yt,Je=yt);return s&&ke.forEach(function(RO){return a(q,RO)}),Et&&qa(q,ze),Ae}function It(q,j,G,re){if(typeof G=="object"&&G!==null&&G.type===T&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case v:e:{for(var Ae=G.key;j!==null;){if(j.key===Ae){if(Ae=G.type,Ae===T){if(j.tag===7){u(q,j.sibling),re=g(j,G.props.children),re.return=q,q=re;break e}}else if(j.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===x&&DT(Ae)===j.type){u(q,j.sibling),re=g(j,G.props),qc(re,G),re.return=q,q=re;break e}u(q,j);break}else a(q,j);j=j.sibling}G.type===T?(re=Ha(G.props.children,q.mode,re,G.key),re.return=q,q=re):(re=Jf(G.type,G.key,G.props,null,q.mode,re),qc(re,G),re.return=q,q=re)}return w(q);case _:e:{for(Ae=G.key;j!==null;){if(j.key===Ae)if(j.tag===4&&j.stateNode.containerInfo===G.containerInfo&&j.stateNode.implementation===G.implementation){u(q,j.sibling),re=g(j,G.children||[]),re.return=q,q=re;break e}else{u(q,j);break}else a(q,j);j=j.sibling}re=qg(G,q.mode,re),re.return=q,q=re}return w(q);case x:return Ae=G._init,G=Ae(G._payload),It(q,j,G,re)}if(Ze(G))return He(q,j,G,re);if(B(G)){if(Ae=B(G),typeof Ae!="function")throw Error(r(150));return G=Ae.call(G),Le(q,j,G,re)}if(typeof G.then=="function")return It(q,j,md(G),re);if(G.$$typeof===X)return It(q,j,nd(q,G),re);gd(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,j!==null&&j.tag===6?(u(q,j.sibling),re=g(j,G),re.return=q,q=re):(u(q,j),re=Fg(G,q.mode,re),re.return=q,q=re),w(q)):u(q,j)}return function(q,j,G,re){try{Fc=0;var Ae=It(q,j,G,re);return uu=null,Ae}catch(ke){if(ke===Dc||ke===id)throw ke;var Je=Or(29,ke,null,q.mode);return Je.lanes=re,Je.return=q,Je}finally{}}}var cu=PT(!0),LT=PT(!1),ri=oe(null),Hi=null;function go(s){var a=s.alternate;he(En,En.current&1),he(ri,s),Hi===null&&(a===null||su.current!==null||a.memoizedState!==null)&&(Hi=s)}function VT(s){if(s.tag===22){if(he(En,En.current),he(ri,s),Hi===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Hi=s)}}else yo()}function yo(){he(En,En.current),he(ri,ri.current)}function xs(s){pe(ri),Hi===s&&(Hi=null),pe(En)}var En=oe(0);function yd(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||fv(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Sy(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:m({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var wy={enqueueSetState:function(s,a,u){s=s._reactInternals;var f=Vr(),g=fo(f);g.payload=a,u!=null&&(g.callback=u),a=po(s,g,f),a!==null&&(Ur(a,s,f),Lc(a,s,f))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=Vr(),g=fo(f);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=po(s,g,f),a!==null&&(Ur(a,s,f),Lc(a,s,f))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Vr(),f=fo(u);f.tag=2,a!=null&&(f.callback=a),a=po(s,f,u),a!==null&&(Ur(a,s,u),Lc(a,s,u))}};function UT(s,a,u,f,g,E,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,E,w):a.prototype&&a.prototype.isPureReactComponent?!Cc(u,f)||!Cc(g,E):!0}function zT(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&wy.enqueueReplaceState(a,a.state,null)}function Xa(s,a){var u=a;if("ref"in a){u={};for(var f in a)f!=="ref"&&(u[f]=a[f])}if(s=s.defaultProps){u===a&&(u=m({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}var vd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function BT(s){vd(s)}function jT(s){console.error(s)}function HT(s){vd(s)}function Ed(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function FT(s,a,u){try{var f=s.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Ay(s,a,u){return u=fo(u),u.tag=3,u.payload={element:null},u.callback=function(){Ed(s,a)},u}function qT(s){return s=fo(s),s.tag=3,s}function $T(s,a,u,f){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var E=f.value;s.payload=function(){return g(E)},s.callback=function(){FT(a,u,f)}}var w=u.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){FT(a,u,f),typeof g!="function"&&(So===null?So=new Set([this]):So.add(this));var R=f.stack;this.componentDidCatch(f.value,{componentStack:R!==null?R:""})})}function R2(s,a,u,f,g){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=u.alternate,a!==null&&Mc(a,u,g,!0),u=ri.current,u!==null){switch(u.tag){case 13:return Hi===null?Yy():u.alternate===null&&Xt===0&&(Xt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,f===ey?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([f]):a.add(f),Xy(s,f,g)),!1;case 22:return u.flags|=65536,f===ey?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([f]):u.add(f)),Xy(s,f,g)),!1}throw Error(r(435,u.tag))}return Xy(s,f,g),Yy(),!1}if(Et)return a=ri.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,f!==Kg&&(s=Error(r(422),{cause:f}),Ic(Zr(s,u)))):(f!==Kg&&(a=Error(r(423),{cause:f}),Ic(Zr(a,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,f=Zr(f,u),g=Ay(s.stateNode,f,g),ry(s,g),Xt!==4&&(Xt=2)),!1;var E=Error(r(520),{cause:f});if(E=Zr(E,u),Xc===null?Xc=[E]:Xc.push(E),Xt!==4&&(Xt=2),a===null)return!0;f=Zr(f,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=Ay(u.stateNode,f,s),ry(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(So===null||!So.has(E))))return u.flags|=65536,g&=-g,u.lanes|=g,g=qT(g),$T(g,s,u,f),ry(u,g),!1}u=u.return}while(u!==null);return!1}var GT=Error(r(461)),kn=!1;function Un(s,a,u,f){a.child=s===null?LT(a,null,u,f):cu(a,s.child,u,f)}function KT(s,a,u,f,g){u=u.render;var E=a.ref;if("ref"in f){var w={};for(var R in f)R!=="ref"&&(w[R]=f[R])}else w=f;return Wa(a),f=ly(s,a,u,w,E,g),R=uy(),s!==null&&!kn?(cy(s,a,g),ks(s,a,g)):(Et&&R&&$g(a),a.flags|=1,Un(s,a,f,g),a.child)}function WT(s,a,u,f,g){if(s===null){var E=u.type;return typeof E=="function"&&!Hg(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,YT(s,a,E,f,g)):(s=Jf(u.type,null,f,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!Oy(s,g)){var w=E.memoizedProps;if(u=u.compare,u=u!==null?u:Cc,u(w,f)&&s.ref===a.ref)return ks(s,a,g)}return a.flags|=1,s=Ts(E,f),s.ref=a.ref,s.return=a,a.child=s}function YT(s,a,u,f,g){if(s!==null){var E=s.memoizedProps;if(Cc(E,f)&&s.ref===a.ref)if(kn=!1,a.pendingProps=f=E,Oy(s,g))(s.flags&131072)!==0&&(kn=!0);else return a.lanes=s.lanes,ks(s,a,g)}return Cy(s,a,u,f,g)}function QT(s,a,u){var f=a.pendingProps,g=f.children,E=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((a.flags&128)!==0){if(f=E!==null?E.baseLanes|u:u,s!==null){for(g=a.child=s.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;a.childLanes=E&~f}else a.childLanes=0,a.child=null;return XT(s,a,f,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&rd(a,E!==null?E.cachePool:null),E!==null?Yb(a,E):sy(),VT(a);else return a.lanes=a.childLanes=536870912,XT(s,a,E!==null?E.baseLanes|u:u,u)}else E!==null?(rd(a,E.cachePool),Yb(a,E),yo(),a.memoizedState=null):(s!==null&&rd(a,null),sy(),yo());return Un(s,a,g,u),a.child}function XT(s,a,u,f){var g=Zg();return g=g===null?null:{parent:vn._currentValue,pool:g},a.memoizedState={baseLanes:u,cachePool:g},s!==null&&rd(a,null),sy(),VT(a),s!==null&&Mc(s,a,f,!0),null}function _d(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function Cy(s,a,u,f,g){return Wa(a),u=ly(s,a,u,f,void 0,g),f=uy(),s!==null&&!kn?(cy(s,a,g),ks(s,a,g)):(Et&&f&&$g(a),a.flags|=1,Un(s,a,u,g),a.child)}function JT(s,a,u,f,g,E){return Wa(a),a.updateQueue=null,u=Xb(a,f,u,g),Qb(s),f=uy(),s!==null&&!kn?(cy(s,a,E),ks(s,a,E)):(Et&&f&&$g(a),a.flags|=1,Un(s,a,u,E),a.child)}function ZT(s,a,u,f,g){if(Wa(a),a.stateNode===null){var E=eu,w=u.contextType;typeof w=="object"&&w!==null&&(E=Yn(w)),E=new u(f,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=wy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=f,E.state=a.memoizedState,E.refs={},ty(a),w=u.contextType,E.context=typeof w=="object"&&w!==null?Yn(w):eu,E.state=a.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Sy(a,u,w,f),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(w=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),w!==E.state&&wy.enqueueReplaceState(E,E.state,null),Uc(a,f,E,g),Vc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(s===null){E=a.stateNode;var R=a.memoizedProps,P=Xa(u,R);E.props=P;var K=E.context,ne=u.contextType;w=eu,typeof ne=="object"&&ne!==null&&(w=Yn(ne));var se=u.getDerivedStateFromProps;ne=typeof se=="function"||typeof E.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R||K!==w)&&zT(a,E,f,w),ho=!1;var Y=a.memoizedState;E.state=Y,Uc(a,f,E,g),Vc(),K=a.memoizedState,R||Y!==K||ho?(typeof se=="function"&&(Sy(a,u,se,f),K=a.memoizedState),(P=ho||UT(a,u,P,f,Y,K,w))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=K),E.props=f,E.state=K,E.context=w,f=P):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{E=a.stateNode,ny(s,a),w=a.memoizedProps,ne=Xa(u,w),E.props=ne,se=a.pendingProps,Y=E.context,K=u.contextType,P=eu,typeof K=="object"&&K!==null&&(P=Yn(K)),R=u.getDerivedStateFromProps,(K=typeof R=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(w!==se||Y!==P)&&zT(a,E,f,P),ho=!1,Y=a.memoizedState,E.state=Y,Uc(a,f,E,g),Vc();var Q=a.memoizedState;w!==se||Y!==Q||ho||s!==null&&s.dependencies!==null&&td(s.dependencies)?(typeof R=="function"&&(Sy(a,u,R,f),Q=a.memoizedState),(ne=ho||UT(a,u,ne,f,Y,Q,P)||s!==null&&s.dependencies!==null&&td(s.dependencies))?(K||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(f,Q,P),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(f,Q,P)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||w===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Q),E.props=f,E.state=Q,E.context=P,f=ne):(typeof E.componentDidUpdate!="function"||w===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),f=!1)}return E=f,_d(s,a),f=(a.flags&128)!==0,E||f?(E=a.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&f?(a.child=cu(a,s.child,null,g),a.child=cu(a,null,u,g)):Un(s,a,u,g),a.memoizedState=E.state,s=a.child):s=ks(s,a,g),s}function e1(s,a,u,f){return kc(),a.flags|=256,Un(s,a,u,f),a.child}var Ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xy(s){return{baseLanes:s,cachePool:jb()}}function ky(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=ii),s}function t1(s,a,u){var f=a.pendingProps,g=!1,E=(a.flags&128)!==0,w;if((w=E)||(w=s!==null&&s.memoizedState===null?!1:(En.current&2)!==0),w&&(g=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,s===null){if(Et){if(g?go(a):yo(),Et){var R=Qt,P;if(P=R){e:{for(P=R,R=ji;P.nodeType!==8;){if(!R){R=null;break e}if(P=_i(P.nextSibling),P===null){R=null;break e}}R=P}R!==null?(a.memoizedState={dehydrated:R,treeContext:Fa!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},P=Or(18,null,null,0),P.stateNode=R,P.return=a,a.child=P,sr=a,Qt=null,P=!0):P=!1}P||Ga(a)}if(R=a.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return fv(R)?a.lanes=32:a.lanes=536870912,null;xs(a)}return R=f.children,f=f.fallback,g?(yo(),g=a.mode,R=bd({mode:"hidden",children:R},g),f=Ha(f,g,u,null),R.return=a,f.return=a,R.sibling=f,a.child=R,g=a.child,g.memoizedState=xy(u),g.childLanes=ky(s,w,u),a.memoizedState=Ry,f):(go(a),Iy(a,R))}if(P=s.memoizedState,P!==null&&(R=P.dehydrated,R!==null)){if(E)a.flags&256?(go(a),a.flags&=-257,a=My(s,a,u)):a.memoizedState!==null?(yo(),a.child=s.child,a.flags|=128,a=null):(yo(),g=f.fallback,R=a.mode,f=bd({mode:"visible",children:f.children},R),g=Ha(g,R,u,null),g.flags|=2,f.return=a,g.return=a,f.sibling=g,a.child=f,cu(a,s.child,null,u),f=a.child,f.memoizedState=xy(u),f.childLanes=ky(s,w,u),a.memoizedState=Ry,a=g);else if(go(a),fv(R)){if(w=R.nextSibling&&R.nextSibling.dataset,w)var K=w.dgst;w=K,f=Error(r(419)),f.stack="",f.digest=w,Ic({value:f,source:null,stack:null}),a=My(s,a,u)}else if(kn||Mc(s,a,u,!1),w=(u&s.childLanes)!==0,kn||w){if(w=Vt,w!==null&&(f=u&-u,f=(f&42)!==0?1:mi(f),f=(f&(w.suspendedLanes|u))!==0?0:f,f!==0&&f!==P.retryLane))throw P.retryLane=f,Zl(s,f),Ur(w,s,f),GT;R.data==="$?"||Yy(),a=My(s,a,u)}else R.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=P.treeContext,Qt=_i(R.nextSibling),sr=a,Et=!0,$a=null,ji=!1,s!==null&&(ti[ni++]=Ss,ti[ni++]=ws,ti[ni++]=Fa,Ss=s.id,ws=s.overflow,Fa=a),a=Iy(a,f.children),a.flags|=4096);return a}return g?(yo(),g=f.fallback,R=a.mode,P=s.child,K=P.sibling,f=Ts(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,K!==null?g=Ts(K,g):(g=Ha(g,R,u,null),g.flags|=2),g.return=a,f.return=a,f.sibling=g,a.child=f,f=g,g=a.child,R=s.child.memoizedState,R===null?R=xy(u):(P=R.cachePool,P!==null?(K=vn._currentValue,P=P.parent!==K?{parent:K,pool:K}:P):P=jb(),R={baseLanes:R.baseLanes|u,cachePool:P}),g.memoizedState=R,g.childLanes=ky(s,w,u),a.memoizedState=Ry,f):(go(a),u=s.child,s=u.sibling,u=Ts(u,{mode:"visible",children:f.children}),u.return=a,u.sibling=null,s!==null&&(w=a.deletions,w===null?(a.deletions=[s],a.flags|=16):w.push(s)),a.child=u,a.memoizedState=null,u)}function Iy(s,a){return a=bd({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function bd(s,a){return s=Or(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function My(s,a,u){return cu(a,s.child,null,u),s=Iy(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function n1(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),Yg(s.return,a,u)}function Ny(s,a,u,f,g){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=u,E.tailMode=g)}function r1(s,a,u){var f=a.pendingProps,g=f.revealOrder,E=f.tail;if(Un(s,a,f.children,u),f=En.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&n1(s,u,a);else if(s.tag===19)n1(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(he(En,f),g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&yd(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Ny(a,!1,g,u,E);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&yd(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Ny(a,!0,u,null,E);break;case"together":Ny(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ks(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),To|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Mc(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,u=Ts(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Ts(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Oy(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&td(s)))}function x2(s,a,u){switch(a.tag){case 3:vt(a,a.stateNode.containerInfo),co(a,vn,s.memoizedState.cache),kc();break;case 27:case 5:xi(a);break;case 4:vt(a,a.stateNode.containerInfo);break;case 10:co(a,a.type,a.memoizedProps.value);break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(go(a),a.flags|=128,null):(u&a.child.childLanes)!==0?t1(s,a,u):(go(a),s=ks(s,a,u),s!==null?s.sibling:null);go(a);break;case 19:var g=(s.flags&128)!==0;if(f=(u&a.childLanes)!==0,f||(Mc(s,a,u,!1),f=(u&a.childLanes)!==0),g){if(f)return r1(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),he(En,En.current),f)break;return null;case 22:case 23:return a.lanes=0,QT(s,a,u);case 24:co(a,vn,s.memoizedState.cache)}return ks(s,a,u)}function i1(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)kn=!0;else{if(!Oy(s,u)&&(a.flags&128)===0)return kn=!1,x2(s,a,u);kn=(s.flags&131072)!==0}else kn=!1,Et&&(a.flags&1048576)!==0&&Db(a,ed,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var f=a.elementType,g=f._init;if(f=g(f._payload),a.type=f,typeof f=="function")Hg(f)?(s=Xa(f,s),a.tag=1,a=ZT(null,a,f,s,u)):(a.tag=0,a=Cy(null,a,f,s,u));else{if(f!=null){if(g=f.$$typeof,g===ie){a.tag=11,a=KT(null,a,f,s,u);break e}else if(g===k){a.tag=14,a=WT(null,a,f,s,u);break e}}throw a=rt(f)||f,Error(r(306,a,""))}}return a;case 0:return Cy(s,a,a.type,a.pendingProps,u);case 1:return f=a.type,g=Xa(f,a.pendingProps),ZT(s,a,f,g,u);case 3:e:{if(vt(a,a.stateNode.containerInfo),s===null)throw Error(r(387));f=a.pendingProps;var E=a.memoizedState;g=E.element,ny(s,a),Uc(a,f,null,u);var w=a.memoizedState;if(f=w.cache,co(a,vn,f),f!==E.cache&&Qg(a,[vn],u,!0),Vc(),f=w.element,E.isDehydrated)if(E={element:f,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=e1(s,a,f,u);break e}else if(f!==g){g=Zr(Error(r(424)),a),Ic(g),a=e1(s,a,f,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Qt=_i(s.firstChild),sr=a,Et=!0,$a=null,ji=!0,u=LT(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(kc(),f===g){a=ks(s,a,u);break e}Un(s,a,f,u)}a=a.child}return a;case 26:return _d(s,a),s===null?(u=lS(a.type,null,a.pendingProps,null))?a.memoizedState=u:Et||(u=a.type,s=a.pendingProps,f=Pd(Me.current).createElement(u),f[V]=a,f[F]=s,Bn(f,u,s),Ye(f),a.stateNode=f):a.memoizedState=lS(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return xi(a),s===null&&Et&&(f=a.stateNode=sS(a.type,a.pendingProps,Me.current),sr=a,ji=!0,g=Qt,Co(a.type)?(dv=g,Qt=_i(f.firstChild)):Qt=g),Un(s,a,a.pendingProps.children,u),_d(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Et&&((g=f=Qt)&&(f=nO(f,a.type,a.pendingProps,ji),f!==null?(a.stateNode=f,sr=a,Qt=_i(f.firstChild),ji=!1,g=!0):g=!1),g||Ga(a)),xi(a),g=a.type,E=a.pendingProps,w=s!==null?s.memoizedProps:null,f=E.children,uv(g,E)?f=null:w!==null&&uv(g,w)&&(a.flags|=32),a.memoizedState!==null&&(g=ly(s,a,_2,null,null,u),oh._currentValue=g),_d(s,a),Un(s,a,f,u),a.child;case 6:return s===null&&Et&&((s=u=Qt)&&(u=rO(u,a.pendingProps,ji),u!==null?(a.stateNode=u,sr=a,Qt=null,s=!0):s=!1),s||Ga(a)),null;case 13:return t1(s,a,u);case 4:return vt(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=cu(a,null,f,u):Un(s,a,f,u),a.child;case 11:return KT(s,a,a.type,a.pendingProps,u);case 7:return Un(s,a,a.pendingProps,u),a.child;case 8:return Un(s,a,a.pendingProps.children,u),a.child;case 12:return Un(s,a,a.pendingProps.children,u),a.child;case 10:return f=a.pendingProps,co(a,a.type,f.value),Un(s,a,f.children,u),a.child;case 9:return g=a.type._context,f=a.pendingProps.children,Wa(a),g=Yn(g),f=f(g),a.flags|=1,Un(s,a,f,u),a.child;case 14:return WT(s,a,a.type,a.pendingProps,u);case 15:return YT(s,a,a.type,a.pendingProps,u);case 19:return r1(s,a,u);case 31:return f=a.pendingProps,u=a.mode,f={mode:f.mode,children:f.children},s===null?(u=bd(f,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=Ts(s.child,f),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return QT(s,a,u);case 24:return Wa(a),f=Yn(vn),s===null?(g=Zg(),g===null&&(g=Vt,E=Xg(),g.pooledCache=E,E.refCount++,E!==null&&(g.pooledCacheLanes|=u),g=E),a.memoizedState={parent:f,cache:g},ty(a),co(a,vn,g)):((s.lanes&u)!==0&&(ny(s,a),Uc(a,null,null,u),Vc()),g=s.memoizedState,E=a.memoizedState,g.parent!==f?(g={parent:f,cache:f},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),co(a,vn,f)):(f=E.cache,co(a,vn,f),f!==g.cache&&Qg(a,[vn],u,!0))),Un(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Is(s){s.flags|=4}function s1(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!dS(a)){if(a=ri.current,a!==null&&((ft&4194048)===ft?Hi!==null:(ft&62914560)!==ft&&(ft&536870912)===0||a!==Hi))throw Pc=ey,Hb;s.flags|=8192}}function Td(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?oo():536870912,s.lanes|=a,pu|=a)}function $c(s,a){if(!Et)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function $t(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function k2(s,a,u){var f=a.pendingProps;switch(Gg(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(a),null;case 1:return $t(a),null;case 3:return u=a.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Cs(vn),$r(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(xc(a)?Is(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Vb())),$t(a),null;case 26:return u=a.memoizedState,s===null?(Is(a),u!==null?($t(a),s1(a,u)):($t(a),a.flags&=-16777217)):u?u!==s.memoizedState?(Is(a),$t(a),s1(a,u)):($t(a),a.flags&=-16777217):(s.memoizedProps!==f&&Is(a),$t(a),a.flags&=-16777217),null;case 27:pi(a),u=Me.current;var g=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==f&&Is(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return $t(a),null}s=xe.current,xc(a)?Pb(a):(s=sS(g,f,u),a.stateNode=s,Is(a))}return $t(a),null;case 5:if(pi(a),u=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&Is(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return $t(a),null}if(s=xe.current,xc(a))Pb(a);else{switch(g=Pd(Me.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?g.createElement(u,{is:f.is}):g.createElement(u)}}s[V]=a,s[F]=f;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=s;e:switch(Bn(s,u,f),u){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Is(a)}}return $t(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==f&&Is(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(s=Me.current,xc(a)){if(s=a.stateNode,u=a.memoizedProps,f=null,g=sr,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}s[V]=a,s=!!(s.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||J1(s.nodeValue,u)),s||Ga(a)}else s=Pd(s).createTextNode(f),s[V]=a,a.stateNode=s}return $t(a),null;case 13:if(f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=xc(a),f!==null&&f.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[V]=a}else kc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$t(a),g=!1}else g=Vb(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(xs(a),a):(xs(a),null)}if(xs(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=f!==null,s=s!==null&&s.memoizedState!==null,u){f=a.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var E=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(E=f.memoizedState.cachePool.pool),E!==g&&(f.flags|=2048)}return u!==s&&u&&(a.child.flags|=8192),Td(a,a.updateQueue),$t(a),null;case 4:return $r(),s===null&&iv(a.stateNode.containerInfo),$t(a),null;case 10:return Cs(a.type),$t(a),null;case 19:if(pe(En),g=a.memoizedState,g===null)return $t(a),null;if(f=(a.flags&128)!==0,E=g.rendering,E===null)if(f)$c(g,!1);else{if(Xt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=yd(s),E!==null){for(a.flags|=128,$c(g,!1),s=E.updateQueue,a.updateQueue=s,Td(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)Ob(u,s),u=u.sibling;return he(En,En.current&1|2),a.child}s=s.sibling}g.tail!==null&&fr()>Ad&&(a.flags|=128,f=!0,$c(g,!1),a.lanes=4194304)}else{if(!f)if(s=yd(E),s!==null){if(a.flags|=128,f=!0,s=s.updateQueue,a.updateQueue=s,Td(a,s),$c(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!Et)return $t(a),null}else 2*fr()-g.renderingStartTime>Ad&&u!==536870912&&(a.flags|=128,f=!0,$c(g,!1),a.lanes=4194304);g.isBackwards?(E.sibling=a.child,a.child=E):(s=g.last,s!==null?s.sibling=E:a.child=E,g.last=E)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=fr(),a.sibling=null,s=En.current,he(En,f?s&1|2:s&1),a):($t(a),null);case 22:case 23:return xs(a),oy(),f=a.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(u&536870912)!==0&&(a.flags&128)===0&&($t(a),a.subtreeFlags&6&&(a.flags|=8192)):$t(a),u=a.updateQueue,u!==null&&Td(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048),s!==null&&pe(Ya),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Cs(vn),$t(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function I2(s,a){switch(Gg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Cs(vn),$r(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return pi(a),null;case 13:if(xs(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));kc()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return pe(En),null;case 4:return $r(),null;case 10:return Cs(a.type),null;case 22:case 23:return xs(a),oy(),s!==null&&pe(Ya),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Cs(vn),null;case 25:return null;default:return null}}function o1(s,a){switch(Gg(a),a.tag){case 3:Cs(vn),$r();break;case 26:case 27:case 5:pi(a);break;case 4:$r();break;case 13:xs(a);break;case 19:pe(En);break;case 10:Cs(a.type);break;case 22:case 23:xs(a),oy(),s!==null&&pe(Ya);break;case 24:Cs(vn)}}function Gc(s,a){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&s)===s){f=void 0;var E=u.create,w=u.inst;f=E(),w.destroy=f}u=u.next}while(u!==g)}}catch(R){Mt(a,a.return,R)}}function vo(s,a,u){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var E=g.next;f=E;do{if((f.tag&s)===s){var w=f.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,g=a;var P=u,K=R;try{K()}catch(ne){Mt(g,P,ne)}}}f=f.next}while(f!==E)}}catch(ne){Mt(a,a.return,ne)}}function a1(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{Wb(a,u)}catch(f){Mt(s,s.return,f)}}}function l1(s,a,u){u.props=Xa(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(f){Mt(s,a,f)}}function Kc(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof u=="function"?s.refCleanup=u(f):u.current=f}}catch(g){Mt(s,a,g)}}function Fi(s,a){var u=s.ref,f=s.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(g){Mt(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){Mt(s,a,g)}else u.current=null}function u1(s){var a=s.type,u=s.memoizedProps,f=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(g){Mt(s,s.return,g)}}function Dy(s,a,u){try{var f=s.stateNode;X2(f,s.type,u,a),f[F]=a}catch(g){Mt(s,s.return,g)}}function c1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Co(s.type)||s.tag===4}function Py(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||c1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Co(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ly(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Dd));else if(f!==4&&(f===27&&Co(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(Ly(s,a,u),s=s.sibling;s!==null;)Ly(s,a,u),s=s.sibling}function Sd(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(f===27&&Co(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Sd(s,a,u),s=s.sibling;s!==null;)Sd(s,a,u),s=s.sibling}function h1(s){var a=s.stateNode,u=s.memoizedProps;try{for(var f=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Bn(a,f,u),a[V]=s,a[F]=u}catch(E){Mt(s,s.return,E)}}var Ms=!1,sn=!1,Vy=!1,f1=typeof WeakSet=="function"?WeakSet:Set,In=null;function M2(s,a){if(s=s.containerInfo,av=jd,s=Sb(s),Pg(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,E=f.focusNode;f=f.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var w=0,R=-1,P=-1,K=0,ne=0,se=s,Y=null;t:for(;;){for(var Q;se!==u||g!==0&&se.nodeType!==3||(R=w+g),se!==E||f!==0&&se.nodeType!==3||(P=w+f),se.nodeType===3&&(w+=se.nodeValue.length),(Q=se.firstChild)!==null;)Y=se,se=Q;for(;;){if(se===s)break t;if(Y===u&&++K===g&&(R=w),Y===E&&++ne===f&&(P=w),(Q=se.nextSibling)!==null)break;se=Y,Y=se.parentNode}se=Q}u=R===-1||P===-1?null:{start:R,end:P}}else u=null}u=u||{start:0,end:0}}else u=null;for(lv={focusedElem:s,selectionRange:u},jd=!1,In=a;In!==null;)if(a=In,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,In=s;else for(;In!==null;){switch(a=In,E=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,g=E.memoizedProps,E=E.memoizedState,f=u.stateNode;try{var He=Xa(u.type,g,u.elementType===u.type);s=f.getSnapshotBeforeUpdate(He,E),f.__reactInternalSnapshotBeforeUpdate=s}catch(Le){Mt(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)hv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":hv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,In=s;break}In=a.return}}function d1(s,a,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Eo(s,u),f&4&&Gc(5,u);break;case 1:if(Eo(s,u),f&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(w){Mt(u,u.return,w)}else{var g=Xa(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Mt(u,u.return,w)}}f&64&&a1(u),f&512&&Kc(u,u.return);break;case 3:if(Eo(s,u),f&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Wb(s,a)}catch(w){Mt(u,u.return,w)}}break;case 27:a===null&&f&4&&h1(u);case 26:case 5:Eo(s,u),a===null&&f&4&&u1(u),f&512&&Kc(u,u.return);break;case 12:Eo(s,u);break;case 13:Eo(s,u),f&4&&g1(s,u),f&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=B2.bind(null,u),iO(s,u))));break;case 22:if(f=u.memoizedState!==null||Ms,!f){a=a!==null&&a.memoizedState!==null||sn,g=Ms;var E=sn;Ms=f,(sn=a)&&!E?_o(s,u,(u.subtreeFlags&8772)!==0):Eo(s,u),Ms=g,sn=E}break;case 30:break;default:Eo(s,u)}}function p1(s){var a=s.alternate;a!==null&&(s.alternate=null,p1(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Te(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ht=null,yr=!1;function Ns(s,a,u){for(u=u.child;u!==null;)m1(s,a,u),u=u.sibling}function m1(s,a,u){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Ut,u)}catch{}switch(u.tag){case 26:sn||Fi(u,a),Ns(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sn||Fi(u,a);var f=Ht,g=yr;Co(u.type)&&(Ht=u.stateNode,yr=!1),Ns(s,a,u),nh(u.stateNode),Ht=f,yr=g;break;case 5:sn||Fi(u,a);case 6:if(f=Ht,g=yr,Ht=null,Ns(s,a,u),Ht=f,yr=g,Ht!==null)if(yr)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(u.stateNode)}catch(E){Mt(u,a,E)}else try{Ht.removeChild(u.stateNode)}catch(E){Mt(u,a,E)}break;case 18:Ht!==null&&(yr?(s=Ht,rS(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),ch(s)):rS(Ht,u.stateNode));break;case 4:f=Ht,g=yr,Ht=u.stateNode.containerInfo,yr=!0,Ns(s,a,u),Ht=f,yr=g;break;case 0:case 11:case 14:case 15:sn||vo(2,u,a),sn||vo(4,u,a),Ns(s,a,u);break;case 1:sn||(Fi(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"&&l1(u,a,f)),Ns(s,a,u);break;case 21:Ns(s,a,u);break;case 22:sn=(f=sn)||u.memoizedState!==null,Ns(s,a,u),sn=f;break;default:Ns(s,a,u)}}function g1(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ch(s)}catch(u){Mt(a,a.return,u)}}function N2(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new f1),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new f1),a;default:throw Error(r(435,s.tag))}}function Uy(s,a){var u=N2(s);a.forEach(function(f){var g=j2.bind(null,s,f);u.has(f)||(u.add(f),f.then(g,g))})}function Dr(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f],E=s,w=a,R=w;e:for(;R!==null;){switch(R.tag){case 27:if(Co(R.type)){Ht=R.stateNode,yr=!1;break e}break;case 5:Ht=R.stateNode,yr=!1;break e;case 3:case 4:Ht=R.stateNode.containerInfo,yr=!0;break e}R=R.return}if(Ht===null)throw Error(r(160));m1(E,w,g),Ht=null,yr=!1,E=g.alternate,E!==null&&(E.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)y1(a,s),a=a.sibling}var Ei=null;function y1(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Dr(a,s),Pr(s),f&4&&(vo(3,s,s.return),Gc(3,s),vo(5,s,s.return));break;case 1:Dr(a,s),Pr(s),f&512&&(sn||u===null||Fi(u,u.return)),f&64&&Ms&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var g=Ei;if(Dr(a,s),Pr(s),f&512&&(sn||u===null||Fi(u,u.return)),f&4){var E=u!==null?u.memoizedState:null;if(f=s.memoizedState,u===null)if(f===null)if(s.stateNode===null){e:{f=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":E=g.getElementsByTagName("title")[0],(!E||E[_e]||E[V]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=g.createElement(f),g.head.insertBefore(E,g.querySelector("head > title"))),Bn(E,f,u),E[V]=s,Ye(E),f=E;break e;case"link":var w=hS("link","href",g).get(f+(u.href||""));if(w){for(var R=0;R<w.length;R++)if(E=w[R],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){w.splice(R,1);break t}}E=g.createElement(f),Bn(E,f,u),g.head.appendChild(E);break;case"meta":if(w=hS("meta","content",g).get(f+(u.content||""))){for(R=0;R<w.length;R++)if(E=w[R],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){w.splice(R,1);break t}}E=g.createElement(f),Bn(E,f,u),g.head.appendChild(E);break;default:throw Error(r(468,f))}E[V]=s,Ye(E),f=E}s.stateNode=f}else fS(g,s.type,s.stateNode);else s.stateNode=cS(g,f,s.memoizedProps);else E!==f?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,f===null?fS(g,s.type,s.stateNode):cS(g,f,s.memoizedProps)):f===null&&s.stateNode!==null&&Dy(s,s.memoizedProps,u.memoizedProps)}break;case 27:Dr(a,s),Pr(s),f&512&&(sn||u===null||Fi(u,u.return)),u!==null&&f&4&&Dy(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Dr(a,s),Pr(s),f&512&&(sn||u===null||Fi(u,u.return)),s.flags&32){g=s.stateNode;try{Yr(g,"")}catch(Q){Mt(s,s.return,Q)}}f&4&&s.stateNode!=null&&(g=s.memoizedProps,Dy(s,g,u!==null?u.memoizedProps:g)),f&1024&&(Vy=!0);break;case 6:if(Dr(a,s),Pr(s),f&4){if(s.stateNode===null)throw Error(r(162));f=s.memoizedProps,u=s.stateNode;try{u.nodeValue=f}catch(Q){Mt(s,s.return,Q)}}break;case 3:if(Ud=null,g=Ei,Ei=Ld(a.containerInfo),Dr(a,s),Ei=g,Pr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{ch(a.containerInfo)}catch(Q){Mt(s,s.return,Q)}Vy&&(Vy=!1,v1(s));break;case 4:f=Ei,Ei=Ld(s.stateNode.containerInfo),Dr(a,s),Pr(s),Ei=f;break;case 12:Dr(a,s),Pr(s);break;case 13:Dr(a,s),Pr(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(qy=fr()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Uy(s,f)));break;case 22:g=s.memoizedState!==null;var P=u!==null&&u.memoizedState!==null,K=Ms,ne=sn;if(Ms=K||g,sn=ne||P,Dr(a,s),sn=ne,Ms=K,Pr(s),f&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(u===null||P||Ms||sn||Ja(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){P=u=a;try{if(E=P.stateNode,g)w=E.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{R=P.stateNode;var se=P.memoizedProps.style,Y=se!=null&&se.hasOwnProperty("display")?se.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Q){Mt(P,P.return,Q)}}}else if(a.tag===6){if(u===null){P=a;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(Q){Mt(P,P.return,Q)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=s.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Uy(s,u))));break;case 19:Dr(a,s),Pr(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Uy(s,f)));break;case 30:break;case 21:break;default:Dr(a,s),Pr(s)}}function Pr(s){var a=s.flags;if(a&2){try{for(var u,f=s.return;f!==null;){if(c1(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var g=u.stateNode,E=Py(s);Sd(s,E,g);break;case 5:var w=u.stateNode;u.flags&32&&(Yr(w,""),u.flags&=-33);var R=Py(s);Sd(s,R,w);break;case 3:case 4:var P=u.stateNode.containerInfo,K=Py(s);Ly(s,K,P);break;default:throw Error(r(161))}}catch(ne){Mt(s,s.return,ne)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function v1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;v1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Eo(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)d1(s,a.alternate,a),a=a.sibling}function Ja(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:vo(4,a,a.return),Ja(a);break;case 1:Fi(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&l1(a,a.return,u),Ja(a);break;case 27:nh(a.stateNode);case 26:case 5:Fi(a,a.return),Ja(a);break;case 22:a.memoizedState===null&&Ja(a);break;case 30:Ja(a);break;default:Ja(a)}s=s.sibling}}function _o(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,g=s,E=a,w=E.flags;switch(E.tag){case 0:case 11:case 15:_o(g,E,u),Gc(4,E);break;case 1:if(_o(g,E,u),f=E,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(K){Mt(f,f.return,K)}if(f=E,g=f.updateQueue,g!==null){var R=f.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Kb(P[g],R)}catch(K){Mt(f,f.return,K)}}u&&w&64&&a1(E),Kc(E,E.return);break;case 27:h1(E);case 26:case 5:_o(g,E,u),u&&f===null&&w&4&&u1(E),Kc(E,E.return);break;case 12:_o(g,E,u);break;case 13:_o(g,E,u),u&&w&4&&g1(g,E);break;case 22:E.memoizedState===null&&_o(g,E,u),Kc(E,E.return);break;case 30:break;default:_o(g,E,u)}a=a.sibling}}function zy(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Nc(u))}function By(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Nc(s))}function qi(s,a,u,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)E1(s,a,u,f),a=a.sibling}function E1(s,a,u,f){var g=a.flags;switch(a.tag){case 0:case 11:case 15:qi(s,a,u,f),g&2048&&Gc(9,a);break;case 1:qi(s,a,u,f);break;case 3:qi(s,a,u,f),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Nc(s)));break;case 12:if(g&2048){qi(s,a,u,f),s=a.stateNode;try{var E=a.memoizedProps,w=E.id,R=E.onPostCommit;typeof R=="function"&&R(w,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){Mt(a,a.return,P)}}else qi(s,a,u,f);break;case 13:qi(s,a,u,f);break;case 23:break;case 22:E=a.stateNode,w=a.alternate,a.memoizedState!==null?E._visibility&2?qi(s,a,u,f):Wc(s,a):E._visibility&2?qi(s,a,u,f):(E._visibility|=2,hu(s,a,u,f,(a.subtreeFlags&10256)!==0)),g&2048&&zy(w,a);break;case 24:qi(s,a,u,f),g&2048&&By(a.alternate,a);break;default:qi(s,a,u,f)}}function hu(s,a,u,f,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=s,w=a,R=u,P=f,K=w.flags;switch(w.tag){case 0:case 11:case 15:hu(E,w,R,P,g),Gc(8,w);break;case 23:break;case 22:var ne=w.stateNode;w.memoizedState!==null?ne._visibility&2?hu(E,w,R,P,g):Wc(E,w):(ne._visibility|=2,hu(E,w,R,P,g)),g&&K&2048&&zy(w.alternate,w);break;case 24:hu(E,w,R,P,g),g&&K&2048&&By(w.alternate,w);break;default:hu(E,w,R,P,g)}a=a.sibling}}function Wc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,f=a,g=f.flags;switch(f.tag){case 22:Wc(u,f),g&2048&&zy(f.alternate,f);break;case 24:Wc(u,f),g&2048&&By(f.alternate,f);break;default:Wc(u,f)}a=a.sibling}}var Yc=8192;function fu(s){if(s.subtreeFlags&Yc)for(s=s.child;s!==null;)_1(s),s=s.sibling}function _1(s){switch(s.tag){case 26:fu(s),s.flags&Yc&&s.memoizedState!==null&&yO(Ei,s.memoizedState,s.memoizedProps);break;case 5:fu(s);break;case 3:case 4:var a=Ei;Ei=Ld(s.stateNode.containerInfo),fu(s),Ei=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Yc,Yc=16777216,fu(s),Yc=a):fu(s));break;default:fu(s)}}function b1(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Qc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];In=f,S1(f,s)}b1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)T1(s),s=s.sibling}function T1(s){switch(s.tag){case 0:case 11:case 15:Qc(s),s.flags&2048&&vo(9,s,s.return);break;case 3:Qc(s);break;case 12:Qc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,wd(s)):Qc(s);break;default:Qc(s)}}function wd(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];In=f,S1(f,s)}b1(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:vo(8,a,a.return),wd(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,wd(a));break;default:wd(a)}s=s.sibling}}function S1(s,a){for(;In!==null;){var u=In;switch(u.tag){case 0:case 11:case 15:vo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Nc(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,In=f;else e:for(u=s;In!==null;){f=In;var g=f.sibling,E=f.return;if(p1(f),f===u){In=null;break e}if(g!==null){g.return=E,In=g;break e}In=E}}}var O2={getCacheForType:function(s){var a=Yn(vn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u}},D2=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Vt=null,tt=null,ft=0,St=0,Lr=null,bo=!1,du=!1,jy=!1,Os=0,Xt=0,To=0,Za=0,Hy=0,ii=0,pu=0,Xc=null,vr=null,Fy=!1,qy=0,Ad=1/0,Cd=null,So=null,zn=0,wo=null,mu=null,gu=0,$y=0,Gy=null,w1=null,Jc=0,Ky=null;function Vr(){if((Tt&2)!==0&&ft!==0)return ft&-ft;if(Z.T!==null){var s=ru;return s!==0?s:ev()}return xr()}function A1(){ii===0&&(ii=(ft&536870912)===0||Et?Ni():536870912);var s=ri.current;return s!==null&&(s.flags|=32),ii}function Ur(s,a,u){(s===Vt&&(St===2||St===9)||s.cancelPendingCommit!==null)&&(yu(s,0),Ao(s,ft,ii,!1)),Cr(s,u),((Tt&2)===0||s!==Vt)&&(s===Vt&&((Tt&2)===0&&(Za|=u),Xt===4&&Ao(s,ft,ii,!1)),$i(s))}function C1(s,a,u){if((Tt&6)!==0)throw Error(r(327));var f=!u&&(a&124)===0&&(a&s.expiredLanes)===0||ps(s,a),g=f?V2(s,a):Qy(s,a,!0),E=f;do{if(g===0){du&&!f&&Ao(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!P2(u)){g=Qy(s,a,!1),E=!1;continue}if(g===2){if(E=a,s.errorRecoveryDisabledLanes&E)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var R=s;g=Xc;var P=R.current.memoizedState.isDehydrated;if(P&&(yu(R,w).flags|=256),w=Qy(R,w,!1),w!==2){if(jy&&!P){R.errorRecoveryDisabledLanes|=E,Za|=E,g=4;break e}E=vr,vr=g,E!==null&&(vr===null?vr=E:vr.push.apply(vr,E))}g=w}if(E=!1,g!==2)continue}}if(g===1){yu(s,0),Ao(s,a,0,!0);break}e:{switch(f=s,E=g,E){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ao(f,a,ii,!bo);break e;case 2:vr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=qy+300-fr(),10<g)){if(Ao(f,a,ii,!bo),ds(f,0,!0)!==0)break e;f.timeoutHandle=tS(R1.bind(null,f,u,vr,Cd,Fy,a,ii,Za,pu,bo,E,2,-0,0),g);break e}R1(f,u,vr,Cd,Fy,a,ii,Za,pu,bo,E,0,-0,0)}}break}while(!0);$i(s)}function R1(s,a,u,f,g,E,w,R,P,K,ne,se,Y,Q){if(s.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(sh={stylesheets:null,count:0,unsuspend:gO},_1(a),se=vO(),se!==null)){s.cancelPendingCommit=se(D1.bind(null,s,a,E,u,f,g,w,R,P,ne,1,Y,Q)),Ao(s,E,w,!K);return}D1(s,a,E,u,f,g,w,R,P)}function P2(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var g=u[f],E=g.getSnapshot;g=g.value;try{if(!Nr(E(),g))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ao(s,a,u,f){a&=~Hy,a&=~Za,s.suspendedLanes|=a,s.pingedLanes&=~a,f&&(s.warmLanes|=a),f=s.expirationTimes;for(var g=a;0<g;){var E=31-Dt(g),w=1<<E;f[E]=-1,g&=~w}u!==0&&Rr(s,u,a)}function Rd(){return(Tt&6)===0?(Zc(0),!1):!0}function Wy(){if(tt!==null){if(St===0)var s=tt.return;else s=tt,As=Ka=null,hy(s),uu=null,Fc=0,s=tt;for(;s!==null;)o1(s.alternate,s),s=s.return;tt=null}}function yu(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,Z2(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Wy(),Vt=s,tt=u=Ts(s.current,null),ft=a,St=0,Lr=null,bo=!1,du=ps(s,a),jy=!1,pu=ii=Hy=Za=To=Xt=0,vr=Xc=null,Fy=!1,(a&8)!==0&&(a|=a&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=a;0<f;){var g=31-Dt(f),E=1<<g;a|=s[g],f&=~E}return Os=a,Yf(),u}function x1(s,a){Qe=null,Z.H=pd,a===Dc||a===id?(a=$b(),St=3):a===Hb?(a=$b(),St=4):St=a===GT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Lr=a,tt===null&&(Xt=1,Ed(s,Zr(a,s.current)))}function k1(){var s=Z.H;return Z.H=pd,s===null?pd:s}function I1(){var s=Z.A;return Z.A=O2,s}function Yy(){Xt=4,bo||(ft&4194048)!==ft&&ri.current!==null||(du=!0),(To&134217727)===0&&(Za&134217727)===0||Vt===null||Ao(Vt,ft,ii,!1)}function Qy(s,a,u){var f=Tt;Tt|=2;var g=k1(),E=I1();(Vt!==s||ft!==a)&&(Cd=null,yu(s,a)),a=!1;var w=Xt;e:do try{if(St!==0&&tt!==null){var R=tt,P=Lr;switch(St){case 8:Wy(),w=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(a=!0);var K=St;if(St=0,Lr=null,vu(s,R,P,K),u&&du){w=0;break e}break;default:K=St,St=0,Lr=null,vu(s,R,P,K)}}L2(),w=Xt;break}catch(ne){x1(s,ne)}while(!0);return a&&s.shellSuspendCounter++,As=Ka=null,Tt=f,Z.H=g,Z.A=E,tt===null&&(Vt=null,ft=0,Yf()),w}function L2(){for(;tt!==null;)M1(tt)}function V2(s,a){var u=Tt;Tt|=2;var f=k1(),g=I1();Vt!==s||ft!==a?(Cd=null,Ad=fr()+500,yu(s,a)):du=ps(s,a);e:do try{if(St!==0&&tt!==null){a=tt;var E=Lr;t:switch(St){case 1:St=0,Lr=null,vu(s,a,E,1);break;case 2:case 9:if(Fb(E)){St=0,Lr=null,N1(a);break}a=function(){St!==2&&St!==9||Vt!==s||(St=7),$i(s)},E.then(a,a);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Fb(E)?(St=0,Lr=null,N1(a)):(St=0,Lr=null,vu(s,a,E,7));break;case 5:var w=null;switch(tt.tag){case 26:w=tt.memoizedState;case 5:case 27:var R=tt;if(!w||dS(w)){St=0,Lr=null;var P=R.sibling;if(P!==null)tt=P;else{var K=R.return;K!==null?(tt=K,xd(K)):tt=null}break t}}St=0,Lr=null,vu(s,a,E,5);break;case 6:St=0,Lr=null,vu(s,a,E,6);break;case 8:Wy(),Xt=6;break e;default:throw Error(r(462))}}U2();break}catch(ne){x1(s,ne)}while(!0);return As=Ka=null,Z.H=f,Z.A=g,Tt=u,tt!==null?0:(Vt=null,ft=0,Yf(),Xt)}function U2(){for(;tt!==null&&!wa();)M1(tt)}function M1(s){var a=i1(s.alternate,s,Os);s.memoizedProps=s.pendingProps,a===null?xd(s):tt=a}function N1(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=JT(u,a,a.pendingProps,a.type,void 0,ft);break;case 11:a=JT(u,a,a.pendingProps,a.type.render,a.ref,ft);break;case 5:hy(a);default:o1(u,a),a=tt=Ob(a,Os),a=i1(u,a,Os)}s.memoizedProps=s.pendingProps,a===null?xd(s):tt=a}function vu(s,a,u,f){As=Ka=null,hy(a),uu=null,Fc=0;var g=a.return;try{if(R2(s,g,a,u,ft)){Xt=1,Ed(s,Zr(u,s.current)),tt=null;return}}catch(E){if(g!==null)throw tt=g,E;Xt=1,Ed(s,Zr(u,s.current)),tt=null;return}a.flags&32768?(Et||f===1?s=!0:du||(ft&536870912)!==0?s=!1:(bo=s=!0,(f===2||f===9||f===3||f===6)&&(f=ri.current,f!==null&&f.tag===13&&(f.flags|=16384))),O1(a,s)):xd(a)}function xd(s){var a=s;do{if((a.flags&32768)!==0){O1(a,bo);return}s=a.return;var u=k2(a.alternate,a,Os);if(u!==null){tt=u;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=s}while(a!==null);Xt===0&&(Xt=5)}function O1(s,a){do{var u=I2(s.alternate,s);if(u!==null){u.flags&=32767,tt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){tt=s;return}tt=s=u}while(s!==null);Xt=6,tt=null}function D1(s,a,u,f,g,E,w,R,P){s.cancelPendingCommit=null;do kd();while(zn!==0);if((Tt&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(E=a.lanes|a.childLanes,E|=Bg,Ca(s,u,E,w,R,P),s===Vt&&(tt=Vt=null,ft=0),mu=a,wo=s,gu=u,$y=E,Gy=g,w1=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,H2(hs,function(){return z1(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=Z.T,Z.T=null,g=de.p,de.p=2,w=Tt,Tt|=4;try{M2(s,a,u)}finally{Tt=w,de.p=g,Z.T=f}}zn=1,P1(),L1(),V1()}}function P1(){if(zn===1){zn=0;var s=wo,a=mu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null;var f=de.p;de.p=2;var g=Tt;Tt|=4;try{y1(a,s);var E=lv,w=Sb(s.containerInfo),R=E.focusedElem,P=E.selectionRange;if(w!==R&&R&&R.ownerDocument&&Tb(R.ownerDocument.documentElement,R)){if(P!==null&&Pg(R)){var K=P.start,ne=P.end;if(ne===void 0&&(ne=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(ne,R.value.length);else{var se=R.ownerDocument||document,Y=se&&se.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),He=R.textContent.length,Le=Math.min(P.start,He),It=P.end===void 0?Le:Math.min(P.end,He);!Q.extend&&Le>It&&(w=It,It=Le,Le=w);var q=bb(R,Le),j=bb(R,It);if(q&&j&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==j.node||Q.focusOffset!==j.offset)){var G=se.createRange();G.setStart(q.node,q.offset),Q.removeAllRanges(),Le>It?(Q.addRange(G),Q.extend(j.node,j.offset)):(G.setEnd(j.node,j.offset),Q.addRange(G))}}}}for(se=[],Q=R;Q=Q.parentNode;)Q.nodeType===1&&se.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<se.length;R++){var re=se[R];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}jd=!!av,lv=av=null}finally{Tt=g,de.p=f,Z.T=u}}s.current=a,zn=2}}function L1(){if(zn===2){zn=0;var s=wo,a=mu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=Z.T,Z.T=null;var f=de.p;de.p=2;var g=Tt;Tt|=4;try{d1(s,a.alternate,a)}finally{Tt=g,de.p=f,Z.T=u}}zn=3}}function V1(){if(zn===4||zn===3){zn=0,Gr();var s=wo,a=mu,u=gu,f=w1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?zn=5:(zn=0,mu=wo=null,U1(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(So=null),gi(u),a=a.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Ut,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=Z.T,g=de.p,de.p=2,Z.T=null;try{for(var E=s.onRecoverableError,w=0;w<f.length;w++){var R=f[w];E(R.value,{componentStack:R.stack})}}finally{Z.T=a,de.p=g}}(gu&3)!==0&&kd(),$i(s),g=s.pendingLanes,(u&4194090)!==0&&(g&42)!==0?s===Ky?Jc++:(Jc=0,Ky=s):Jc=0,Zc(0)}}function U1(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Nc(a)))}function kd(s){return P1(),L1(),V1(),z1()}function z1(){if(zn!==5)return!1;var s=wo,a=$y;$y=0;var u=gi(gu),f=Z.T,g=de.p;try{de.p=32>u?32:u,Z.T=null,u=Gy,Gy=null;var E=wo,w=gu;if(zn=0,mu=wo=null,gu=0,(Tt&6)!==0)throw Error(r(331));var R=Tt;if(Tt|=4,T1(E.current),E1(E,E.current,w,u),Tt=R,Zc(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Ut,E)}catch{}return!0}finally{de.p=g,Z.T=f,U1(s,a)}}function B1(s,a,u){a=Zr(u,a),a=Ay(s.stateNode,a,2),s=po(s,a,2),s!==null&&(Cr(s,2),$i(s))}function Mt(s,a,u){if(s.tag===3)B1(s,s,u);else for(;a!==null;){if(a.tag===3){B1(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(So===null||!So.has(f))){s=Zr(u,s),u=qT(2),f=po(a,u,2),f!==null&&($T(u,f,a,s),Cr(f,2),$i(f));break}}a=a.return}}function Xy(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new D2;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(u)||(jy=!0,g.add(u),s=z2.bind(null,s,a,u),a.then(s,s))}function z2(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Vt===s&&(ft&u)===u&&(Xt===4||Xt===3&&(ft&62914560)===ft&&300>fr()-qy?(Tt&2)===0&&yu(s,0):Hy|=u,pu===ft&&(pu=0)),$i(s)}function j1(s,a){a===0&&(a=oo()),s=Zl(s,a),s!==null&&(Cr(s,a),$i(s))}function B2(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),j1(s,u)}function j2(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),j1(s,u)}function H2(s,a){return hr(s,a)}var Id=null,Eu=null,Jy=!1,Md=!1,Zy=!1,el=0;function $i(s){s!==Eu&&s.next===null&&(Eu===null?Id=Eu=s:Eu=Eu.next=s),Md=!0,Jy||(Jy=!0,q2())}function Zc(s,a){if(!Zy&&Md){Zy=!0;do for(var u=!1,f=Id;f!==null;){if(s!==0){var g=f.pendingLanes;if(g===0)var E=0;else{var w=f.suspendedLanes,R=f.pingedLanes;E=(1<<31-Dt(42|s)+1)-1,E&=g&~(w&~R),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,$1(f,E))}else E=ft,E=ds(f,f===Vt?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(E&3)===0||ps(f,E)||(u=!0,$1(f,E));f=f.next}while(u);Zy=!1}}function F2(){H1()}function H1(){Md=Jy=!1;var s=0;el!==0&&(J2()&&(s=el),el=0);for(var a=fr(),u=null,f=Id;f!==null;){var g=f.next,E=F1(f,a);E===0?(f.next=null,u===null?Id=g:u.next=g,g===null&&(Eu=u)):(u=f,(s!==0||(E&3)!==0)&&(Md=!0)),f=g}Zc(s)}function F1(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var w=31-Dt(E),R=1<<w,P=g[w];P===-1?((R&u)===0||(R&f)!==0)&&(g[w]=so(R,a)):P<=a&&(s.expiredLanes|=R),E&=~R}if(a=Vt,u=ft,u=ds(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,u===0||s===a&&(St===2||St===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&ki(f),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ps(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(f!==null&&ki(f),gi(u)){case 2:case 8:u=no;break;case 32:u=hs;break;case 268435456:u=ro;break;default:u=hs}return f=q1.bind(null,s),u=hr(u,f),s.callbackPriority=a,s.callbackNode=u,a}return f!==null&&f!==null&&ki(f),s.callbackPriority=2,s.callbackNode=null,2}function q1(s,a){if(zn!==0&&zn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(kd()&&s.callbackNode!==u)return null;var f=ft;return f=ds(s,s===Vt?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(C1(s,f,a),F1(s,fr()),s.callbackNode!=null&&s.callbackNode===u?q1.bind(null,s):null)}function $1(s,a){if(kd())return null;C1(s,a,!0)}function q2(){eO(function(){(Tt&6)!==0?hr(to,F2):H1()})}function ev(){return el===0&&(el=Ni()),el}function G1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:jl(""+s)}function K1(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function $2(s,a,u,f,g){if(a==="submit"&&u&&u.stateNode===g){var E=G1((g[F]||null).action),w=f.submitter;w&&(a=(a=w[F]||null)?G1(a.formAction):w.getAttribute("formAction"),a!==null&&(E=a,w=null));var R=new Hl("action","action",null,f,g);s.push({event:R,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(el!==0){var P=w?K1(g,w):new FormData(g);_y(u,{pending:!0,data:P,method:g.method,action:E},null,P)}}else typeof E=="function"&&(R.preventDefault(),P=w?K1(g,w):new FormData(g),_y(u,{pending:!0,data:P,method:g.method,action:E},E,P))},currentTarget:g}]})}}for(var tv=0;tv<zg.length;tv++){var nv=zg[tv],G2=nv.toLowerCase(),K2=nv[0].toUpperCase()+nv.slice(1);vi(G2,"on"+K2)}vi(Cb,"onAnimationEnd"),vi(Rb,"onAnimationIteration"),vi(xb,"onAnimationStart"),vi("dblclick","onDoubleClick"),vi("focusin","onFocus"),vi("focusout","onBlur"),vi(c2,"onTransitionRun"),vi(h2,"onTransitionStart"),vi(f2,"onTransitionCancel"),vi(kb,"onTransitionEnd"),Wn("onMouseEnter",["mouseout","mouseover"]),Wn("onMouseLeave",["mouseout","mouseover"]),Wn("onPointerEnter",["pointerout","pointerover"]),Wn("onPointerLeave",["pointerout","pointerover"]),ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eh));function W1(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],g=f.event;f=f.listeners;e:{var E=void 0;if(a)for(var w=f.length-1;0<=w;w--){var R=f[w],P=R.instance,K=R.currentTarget;if(R=R.listener,P!==E&&g.isPropagationStopped())break e;E=R,g.currentTarget=K;try{E(g)}catch(ne){vd(ne)}g.currentTarget=null,E=P}else for(w=0;w<f.length;w++){if(R=f[w],P=R.instance,K=R.currentTarget,R=R.listener,P!==E&&g.isPropagationStopped())break e;E=R,g.currentTarget=K;try{E(g)}catch(ne){vd(ne)}g.currentTarget=null,E=P}}}}function nt(s,a){var u=a[ue];u===void 0&&(u=a[ue]=new Set);var f=s+"__bubble";u.has(f)||(Y1(a,s,2,!1),u.add(f))}function rv(s,a,u){var f=0;a&&(f|=4),Y1(u,s,f,a)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function iv(s){if(!s[Nd]){s[Nd]=!0,mt.forEach(function(u){u!=="selectionchange"&&(W2.has(u)||rv(u,!1,s),rv(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Nd]||(a[Nd]=!0,rv("selectionchange",!1,a))}}function Y1(s,a,u,f){switch(ES(a)){case 2:var g=bO;break;case 8:g=TO;break;default:g=vv}u=g.bind(null,a,u,s),g=void 0,!Xr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function sv(s,a,u,f,g){var E=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var R=f.stateNode.containerInfo;if(R===g)break;if(w===4)for(w=f.return;w!==null;){var P=w.tag;if((P===3||P===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;R!==null;){if(w=Ee(R),w===null)return;if(P=w.tag,P===5||P===6||P===26||P===27){f=E=w;continue e}R=R.parentNode}}f=f.return}Df(function(){var K=E,ne=Qr(u),se=[];e:{var Y=Ib.get(s);if(Y!==void 0){var Q=Hl,He=s;switch(s){case"keypress":if(Li(u)===0)break e;case"keydown":case"keyup":Q=Wl;break;case"focusin":He="focus",Q=$l;break;case"focusout":He="blur",Q=$l;break;case"beforeblur":case"afterblur":Q=$l;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Mg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Hf;break;case Cb:case Rb:case xb:Q=Gl;break;case kb:Q=qf;break;case"scroll":case"scrollend":Q=Pf;break;case"wheel":Q=Yl;break;case"copy":case"cut":case"paste":Q=Kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=wc;break;case"toggle":case"beforetoggle":Q=Gf}var Le=(a&4)!==0,It=!Le&&(s==="scroll"||s==="scrollend"),q=Le?Y!==null?Y+"Capture":null:Y;Le=[];for(var j=K,G;j!==null;){var re=j;if(G=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||G===null||q===null||(re=Oa(j,q),re!=null&&Le.push(th(j,re,G))),It)break;j=j.return}0<Le.length&&(Y=new Q(Y,He,null,u,ne),se.push({event:Y,listeners:Le}))}}if((a&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",Y&&u!==gs&&(He=u.relatedTarget||u.fromElement)&&(Ee(He)||He[W]))break e;if((Q||Y)&&(Y=ne.window===ne?ne:(Y=ne.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(He=u.relatedTarget||u.toElement,Q=K,He=He?Ee(He):null,He!==null&&(It=o(He),Le=He.tag,He!==It||Le!==5&&Le!==27&&Le!==6)&&(He=null)):(Q=null,He=K),Q!==He)){if(Le=Jr,re="onMouseLeave",q="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(Le=wc,re="onPointerLeave",q="onPointerEnter",j="pointer"),It=Q==null?Y:De(Q),G=He==null?Y:De(He),Y=new Le(re,j+"leave",Q,u,ne),Y.target=It,Y.relatedTarget=G,re=null,Ee(ne)===K&&(Le=new Le(q,j+"enter",He,u,ne),Le.target=G,Le.relatedTarget=It,re=Le),It=re,Q&&He)t:{for(Le=Q,q=He,j=0,G=Le;G;G=_u(G))j++;for(G=0,re=q;re;re=_u(re))G++;for(;0<j-G;)Le=_u(Le),j--;for(;0<G-j;)q=_u(q),G--;for(;j--;){if(Le===q||q!==null&&Le===q.alternate)break t;Le=_u(Le),q=_u(q)}Le=null}else Le=null;Q!==null&&Q1(se,Y,Q,Le,!1),He!==null&&It!==null&&Q1(se,It,He,Le,!0)}}e:{if(Y=K?De(K):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Ae=mb;else if(yn(Y))if(gb)Ae=a2;else{Ae=s2;var Je=i2}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?K&&yc(K.elementType)&&(Ae=mb):Ae=o2;if(Ae&&(Ae=Ae(s,K))){bs(se,Ae,u,ne);break e}Je&&Je(s,Y,K),s==="focusout"&&K&&Y.type==="number"&&K.memoizedProps.value!=null&&lo(Y,"number",Y.value)}switch(Je=K?De(K):window,s){case"focusin":(yn(Je)||Je.contentEditable==="true")&&(Ql=Je,Lg=K,Rc=null);break;case"focusout":Rc=Lg=Ql=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,wb(se,u,ne);break;case"selectionchange":if(u2)break;case"keydown":case"keyup":wb(se,u,ne)}var ke;if(zi)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ct?J(s,u)&&(ze="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(ze="onCompositionStart");ze&&(S&&u.locale!=="ko"&&(ct||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ct&&(ke=Ec()):(Pi=ne,uo="value"in Pi?Pi.value:Pi.textContent,ct=!0)),Je=Od(K,ze),0<Je.length&&(ze=new Tc(ze,s,null,u,ne),se.push({event:ze,listeners:Je}),ke?ze.data=ke:(ke=me(u),ke!==null&&(ze.data=ke)))),(ke=b?gn(s,u):ht(s,u))&&(ze=Od(K,"onBeforeInput"),0<ze.length&&(Je=new Tc("onBeforeInput","beforeinput",null,u,ne),se.push({event:Je,listeners:ze}),Je.data=ke)),$2(se,s,K,u,ne)}W1(se,a)})}function th(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Od(s,a){for(var u=a+"Capture",f=[];s!==null;){var g=s,E=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||E===null||(g=Oa(s,u),g!=null&&f.unshift(th(s,g,E)),g=Oa(s,a),g!=null&&f.push(th(s,g,E))),s.tag===3)return f;s=s.return}return[]}function _u(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Q1(s,a,u,f,g){for(var E=a._reactName,w=[];u!==null&&u!==f;){var R=u,P=R.alternate,K=R.stateNode;if(R=R.tag,P!==null&&P===f)break;R!==5&&R!==26&&R!==27||K===null||(P=K,g?(K=Oa(u,E),K!=null&&w.unshift(th(u,K,P))):g||(K=Oa(u,E),K!=null&&w.push(th(u,K,P)))),u=u.return}w.length!==0&&s.push({event:a,listeners:w})}var Y2=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function X1(s){return(typeof s=="string"?s:""+s).replace(Y2,`
`).replace(Q2,"")}function J1(s,a){return a=X1(a),X1(s)===a}function Dd(){}function kt(s,a,u,f,g,E){switch(u){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||Yr(s,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&Yr(s,""+f);break;case"className":An(s,"class",f);break;case"tabIndex":An(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":An(s,u,f);break;case"style":gc(s,f,E);break;case"data":if(a!=="object"){An(s,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(u);break}f=jl(""+f),s.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&kt(s,a,"name",g.name,g,null),kt(s,a,"formEncType",g.formEncType,g,null),kt(s,a,"formMethod",g.formMethod,g,null),kt(s,a,"formTarget",g.formTarget,g,null)):(kt(s,a,"encType",g.encType,g,null),kt(s,a,"method",g.method,g,null),kt(s,a,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(u);break}f=jl(""+f),s.setAttribute(u,f);break;case"onClick":f!=null&&(s.onclick=Dd);break;case"onScroll":f!=null&&nt("scroll",s);break;case"onScrollEnd":f!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}u=jl(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,""+f):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":f===!0?s.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(u,f):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(u,f):s.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(u):s.setAttribute(u,f);break;case"popover":nt("beforetoggle",s),nt("toggle",s),mr(s,"popover",f);break;case"xlinkActuate":Yt(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Yt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Yt(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Yt(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Yt(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Yt(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Yt(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Yt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Yt(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":mr(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=kg.get(u)||u,mr(s,u,f))}}function ov(s,a,u,f,g,E){switch(u){case"style":gc(s,f,E);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof f=="string"?Yr(s,f):(typeof f=="number"||typeof f=="bigint")&&Yr(s,""+f);break;case"onScroll":f!=null&&nt("scroll",s);break;case"onScrollEnd":f!=null&&nt("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Dd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xe.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),a=u.slice(2,g?u.length-7:void 0),E=s[F]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,g),typeof f=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,f,g);break e}u in s?s[u]=f:f===!0?s.setAttribute(u,""):mr(s,u,f)}}}function Bn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var f=!1,g=!1,E;for(E in u)if(u.hasOwnProperty(E)){var w=u[E];if(w!=null)switch(E){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:kt(s,a,E,w,u,null)}}g&&kt(s,a,"srcSet",u.srcSet,u,null),f&&kt(s,a,"src",u.src,u,null);return;case"input":nt("invalid",s);var R=E=w=g=null,P=null,K=null;for(f in u)if(u.hasOwnProperty(f)){var ne=u[f];if(ne!=null)switch(f){case"name":g=ne;break;case"type":w=ne;break;case"checked":P=ne;break;case"defaultChecked":K=ne;break;case"value":E=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:kt(s,a,f,ne,u,null)}}Ia(s,E,R,P,K,w,g,!1),Bl(s);return;case"select":nt("invalid",s),f=w=E=null;for(g in u)if(u.hasOwnProperty(g)&&(R=u[g],R!=null))switch(g){case"value":E=R;break;case"defaultValue":w=R;break;case"multiple":f=R;default:kt(s,a,g,R,u,null)}a=E,u=w,s.multiple=!!f,a!=null?ms(s,!!f,a,!1):u!=null&&ms(s,!!f,u,!0);return;case"textarea":nt("invalid",s),E=g=f=null;for(w in u)if(u.hasOwnProperty(w)&&(R=u[w],R!=null))switch(w){case"value":f=R;break;case"defaultValue":g=R;break;case"children":E=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:kt(s,a,w,R,u,null)}Ma(s,f,g,E),Bl(s);return;case"option":for(P in u)if(u.hasOwnProperty(P)&&(f=u[P],f!=null))switch(P){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:kt(s,a,P,f,u,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(f=0;f<eh.length;f++)nt(eh[f],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in u)if(u.hasOwnProperty(K)&&(f=u[K],f!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:kt(s,a,K,f,u,null)}return;default:if(yc(a)){for(ne in u)u.hasOwnProperty(ne)&&(f=u[ne],f!==void 0&&ov(s,a,ne,f,u,void 0));return}}for(R in u)u.hasOwnProperty(R)&&(f=u[R],f!=null&&kt(s,a,R,f,u,null))}function X2(s,a,u,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,E=null,w=null,R=null,P=null,K=null,ne=null;for(Q in u){var se=u[Q];if(u.hasOwnProperty(Q)&&se!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=se;default:f.hasOwnProperty(Q)||kt(s,a,Q,null,f,se)}}for(var Y in f){var Q=f[Y];if(se=u[Y],f.hasOwnProperty(Y)&&(Q!=null||se!=null))switch(Y){case"type":E=Q;break;case"name":g=Q;break;case"checked":K=Q;break;case"defaultChecked":ne=Q;break;case"value":w=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,a));break;default:Q!==se&&kt(s,a,Y,Q,f,se)}}Mr(s,w,R,P,K,ne,E,g);return;case"select":Q=w=R=Y=null;for(E in u)if(P=u[E],u.hasOwnProperty(E)&&P!=null)switch(E){case"value":break;case"multiple":Q=P;default:f.hasOwnProperty(E)||kt(s,a,E,null,f,P)}for(g in f)if(E=f[g],P=u[g],f.hasOwnProperty(g)&&(E!=null||P!=null))switch(g){case"value":Y=E;break;case"defaultValue":R=E;break;case"multiple":w=E;default:E!==P&&kt(s,a,g,E,f,P)}a=R,u=w,f=Q,Y!=null?ms(s,!!u,Y,!1):!!f!=!!u&&(a!=null?ms(s,!!u,a,!0):ms(s,!!u,u?[]:"",!1));return;case"textarea":Q=Y=null;for(R in u)if(g=u[R],u.hasOwnProperty(R)&&g!=null&&!f.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:kt(s,a,R,null,f,g)}for(w in f)if(g=f[w],E=u[w],f.hasOwnProperty(w)&&(g!=null||E!=null))switch(w){case"value":Y=g;break;case"defaultValue":Q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==E&&kt(s,a,w,g,f,E)}Rt(s,Y,Q);return;case"option":for(var He in u)if(Y=u[He],u.hasOwnProperty(He)&&Y!=null&&!f.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:kt(s,a,He,null,f,Y)}for(P in f)if(Y=f[P],Q=u[P],f.hasOwnProperty(P)&&Y!==Q&&(Y!=null||Q!=null))switch(P){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:kt(s,a,P,Y,f,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)Y=u[Le],u.hasOwnProperty(Le)&&Y!=null&&!f.hasOwnProperty(Le)&&kt(s,a,Le,null,f,Y);for(K in f)if(Y=f[K],Q=u[K],f.hasOwnProperty(K)&&Y!==Q&&(Y!=null||Q!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,a));break;default:kt(s,a,K,Y,f,Q)}return;default:if(yc(a)){for(var It in u)Y=u[It],u.hasOwnProperty(It)&&Y!==void 0&&!f.hasOwnProperty(It)&&ov(s,a,It,void 0,f,Y);for(ne in f)Y=f[ne],Q=u[ne],!f.hasOwnProperty(ne)||Y===Q||Y===void 0&&Q===void 0||ov(s,a,ne,Y,f,Q);return}}for(var q in u)Y=u[q],u.hasOwnProperty(q)&&Y!=null&&!f.hasOwnProperty(q)&&kt(s,a,q,null,f,Y);for(se in f)Y=f[se],Q=u[se],!f.hasOwnProperty(se)||Y===Q||Y==null&&Q==null||kt(s,a,se,Y,f,Q)}var av=null,lv=null;function Pd(s){return s.nodeType===9?s:s.ownerDocument}function Z1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eS(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function uv(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var cv=null;function J2(){var s=window.event;return s&&s.type==="popstate"?s===cv?!1:(cv=s,!0):(cv=null,!1)}var tS=typeof setTimeout=="function"?setTimeout:void 0,Z2=typeof clearTimeout=="function"?clearTimeout:void 0,nS=typeof Promise=="function"?Promise:void 0,eO=typeof queueMicrotask=="function"?queueMicrotask:typeof nS<"u"?function(s){return nS.resolve(null).then(s).catch(tO)}:tS;function tO(s){setTimeout(function(){throw s})}function Co(s){return s==="head"}function rS(s,a){var u=a,f=0,g=0;do{var E=u.nextSibling;if(s.removeChild(u),E&&E.nodeType===8)if(u=E.data,u==="/$"){if(0<f&&8>f){u=f;var w=s.ownerDocument;if(u&1&&nh(w.documentElement),u&2&&nh(w.body),u&4)for(u=w.head,nh(u),w=u.firstChild;w;){var R=w.nextSibling,P=w.nodeName;w[_e]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=R}}if(g===0){s.removeChild(E),ch(a);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:f=u.charCodeAt(0)-48;else f=0;u=E}while(u);ch(a)}function hv(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":hv(u),Te(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function nO(s,a,u,f){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[_e])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=_i(s.nextSibling),s===null)break}return null}function rO(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=_i(s.nextSibling),s===null))return null;return s}function fv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function iO(s,a){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")a();else{var f=function(){a(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function _i(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var dv=null;function iS(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}function sS(s,a,u){switch(a=Pd(u),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function nh(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Te(s)}var si=new Map,oS=new Set;function Ld(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ds=de.d;de.d={f:sO,r:oO,D:aO,C:lO,L:uO,m:cO,X:fO,S:hO,M:dO};function sO(){var s=Ds.f(),a=Rd();return s||a}function oO(s){var a=Se(s);a!==null&&a.tag===5&&a.type==="form"?CT(a):Ds.r(s)}var bu=typeof document>"u"?null:document;function aS(s,a,u){var f=bu;if(f&&typeof a=="string"&&a){var g=ln(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),oS.has(g)||(oS.add(g),s={rel:s,crossOrigin:u,href:a},f.querySelector(g)===null&&(a=f.createElement("link"),Bn(a,"link",s),Ye(a),f.head.appendChild(a)))}}function aO(s){Ds.D(s),aS("dns-prefetch",s,null)}function lO(s,a){Ds.C(s,a),aS("preconnect",s,a)}function uO(s,a,u){Ds.L(s,a,u);var f=bu;if(f&&s&&a){var g='link[rel="preload"][as="'+ln(a)+'"]';a==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+ln(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+ln(u.imageSizes)+'"]')):g+='[href="'+ln(s)+'"]';var E=g;switch(a){case"style":E=Tu(s);break;case"script":E=Su(s)}si.has(E)||(s=m({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),si.set(E,s),f.querySelector(g)!==null||a==="style"&&f.querySelector(rh(E))||a==="script"&&f.querySelector(ih(E))||(a=f.createElement("link"),Bn(a,"link",s),Ye(a),f.head.appendChild(a)))}}function cO(s,a){Ds.m(s,a);var u=bu;if(u&&s){var f=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+ln(f)+'"][href="'+ln(s)+'"]',E=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Su(s)}if(!si.has(E)&&(s=m({rel:"modulepreload",href:s},a),si.set(E,s),u.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ih(E)))return}f=u.createElement("link"),Bn(f,"link",s),Ye(f),u.head.appendChild(f)}}}function hO(s,a,u){Ds.S(s,a,u);var f=bu;if(f&&s){var g=Ue(f).hoistableStyles,E=Tu(s);a=a||"default";var w=g.get(E);if(!w){var R={loading:0,preload:null};if(w=f.querySelector(rh(E)))R.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":a},u),(u=si.get(E))&&pv(s,u);var P=w=f.createElement("link");Ye(P),Bn(P,"link",s),P._p=new Promise(function(K,ne){P.onload=K,P.onerror=ne}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Vd(w,a,f)}w={type:"stylesheet",instance:w,count:1,state:R},g.set(E,w)}}}function fO(s,a){Ds.X(s,a);var u=bu;if(u&&s){var f=Ue(u).hoistableScripts,g=Su(s),E=f.get(g);E||(E=u.querySelector(ih(g)),E||(s=m({src:s,async:!0},a),(a=si.get(g))&&mv(s,a),E=u.createElement("script"),Ye(E),Bn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},f.set(g,E))}}function dO(s,a){Ds.M(s,a);var u=bu;if(u&&s){var f=Ue(u).hoistableScripts,g=Su(s),E=f.get(g);E||(E=u.querySelector(ih(g)),E||(s=m({src:s,async:!0,type:"module"},a),(a=si.get(g))&&mv(s,a),E=u.createElement("script"),Ye(E),Bn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},f.set(g,E))}}function lS(s,a,u,f){var g=(g=Me.current)?Ld(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Tu(u.href),u=Ue(g).hoistableStyles,f=u.get(a),f||(f={type:"style",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Tu(u.href);var E=Ue(g).hoistableStyles,w=E.get(s);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,w),(E=g.querySelector(rh(s)))&&!E._p&&(w.instance=E,w.state.loading=5),si.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},si.set(s,u),E||pO(g,s,u,w.state))),a&&f===null)throw Error(r(528,""));return w}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Su(u),u=Ue(g).hoistableScripts,f=u.get(a),f||(f={type:"script",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Tu(s){return'href="'+ln(s)+'"'}function rh(s){return'link[rel="stylesheet"]['+s+"]"}function uS(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function pO(s,a,u,f){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=s.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),Bn(a,"link",u),Ye(a),s.head.appendChild(a))}function Su(s){return'[src="'+ln(s)+'"]'}function ih(s){return"script[async]"+s}function cS(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var f=s.querySelector('style[data-href~="'+ln(u.href)+'"]');if(f)return a.instance=f,Ye(f),f;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),Ye(f),Bn(f,"style",g),Vd(f,u.precedence,s),a.instance=f;case"stylesheet":g=Tu(u.href);var E=s.querySelector(rh(g));if(E)return a.state.loading|=4,a.instance=E,Ye(E),E;f=uS(u),(g=si.get(g))&&pv(f,g),E=(s.ownerDocument||s).createElement("link"),Ye(E);var w=E;return w._p=new Promise(function(R,P){w.onload=R,w.onerror=P}),Bn(E,"link",f),a.state.loading|=4,Vd(E,u.precedence,s),a.instance=E;case"script":return E=Su(u.src),(g=s.querySelector(ih(E)))?(a.instance=g,Ye(g),g):(f=u,(g=si.get(E))&&(f=m({},u),mv(f,g)),s=s.ownerDocument||s,g=s.createElement("script"),Ye(g),Bn(g,"link",f),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Vd(f,u.precedence,s));return a.instance}function Vd(s,a,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,E=g,w=0;w<f.length;w++){var R=f[w];if(R.dataset.precedence===a)E=R;else if(E!==g)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function pv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function mv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Ud=null;function hS(s,a,u){if(Ud===null){var f=new Map,g=Ud=new Map;g.set(u,f)}else g=Ud,f=g.get(u),f||(f=new Map,g.set(u,f));if(f.has(s))return f;for(f.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var E=u[g];if(!(E[_e]||E[V]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var w=E.getAttribute(a)||"";w=s+w;var R=f.get(w);R?R.push(E):f.set(w,[E])}}return f}function fS(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function mO(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function dS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var sh=null;function gO(){}function yO(s,a,u){if(sh===null)throw Error(r(475));var f=sh;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Tu(u.href),E=s.querySelector(rh(g));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=zd.bind(f),s.then(f,f)),a.state.loading|=4,a.instance=E,Ye(E);return}E=s.ownerDocument||s,u=uS(u),(g=si.get(g))&&pv(u,g),E=E.createElement("link"),Ye(E);var w=E;w._p=new Promise(function(R,P){w.onload=R,w.onerror=P}),Bn(E,"link",u),a.instance=E}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(f.count++,a=zd.bind(f),s.addEventListener("load",a),s.addEventListener("error",a))}}function vO(){if(sh===null)throw Error(r(475));var s=sh;return s.stylesheets&&s.count===0&&gv(s,s.stylesheets),0<s.count?function(a){var u=setTimeout(function(){if(s.stylesheets&&gv(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(u)}}:null}function zd(){if(this.count--,this.count===0){if(this.stylesheets)gv(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Bd=null;function gv(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Bd=new Map,a.forEach(EO,s),Bd=null,zd.call(s))}function EO(s,a){if(!(a.state.loading&4)){var u=Bd.get(s);if(u)var f=u.get(null);else{u=new Map,Bd.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<g.length;E++){var w=g[E];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(u.set(w.dataset.precedence,w),f=w)}f&&u.set(null,f)}g=a.instance,w=g.getAttribute("data-precedence"),E=u.get(w)||f,E===f&&u.set(null,g),u.set(w,g),this.count++,f=zd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),E?E.parentNode.insertBefore(g,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var oh={$$typeof:X,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function _O(s,a,u,f,g,E,w,R){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ar(0),this.hiddenUpdates=Ar(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=E,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function pS(s,a,u,f,g,E,w,R,P,K,ne,se){return s=new _O(s,a,u,w,R,P,K,se),a=1,E===!0&&(a|=24),E=Or(3,null,null,a),s.current=E,E.stateNode=s,a=Xg(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:f,isDehydrated:u,cache:a},ty(E),s}function mS(s){return s?(s=eu,s):eu}function gS(s,a,u,f,g,E){g=mS(g),f.context===null?f.context=g:f.pendingContext=g,f=fo(a),f.payload={element:u},E=E===void 0?null:E,E!==null&&(f.callback=E),u=po(s,f,a),u!==null&&(Ur(u,s,a),Lc(u,s,a))}function yS(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function yv(s,a){yS(s,a),(s=s.alternate)&&yS(s,a)}function vS(s){if(s.tag===13){var a=Zl(s,67108864);a!==null&&Ur(a,s,67108864),yv(s,67108864)}}var jd=!0;function bO(s,a,u,f){var g=Z.T;Z.T=null;var E=de.p;try{de.p=2,vv(s,a,u,f)}finally{de.p=E,Z.T=g}}function TO(s,a,u,f){var g=Z.T;Z.T=null;var E=de.p;try{de.p=8,vv(s,a,u,f)}finally{de.p=E,Z.T=g}}function vv(s,a,u,f){if(jd){var g=Ev(f);if(g===null)sv(s,a,f,Hd,u),_S(s,f);else if(wO(g,s,a,u,f))f.stopPropagation();else if(_S(s,f),a&4&&-1<SO.indexOf(s)){for(;g!==null;){var E=Se(g);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var w=dr(E.pendingLanes);if(w!==0){var R=E;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var P=1<<31-Dt(w);R.entanglements[1]|=P,w&=~P}$i(E),(Tt&6)===0&&(Ad=fr()+500,Zc(0))}}break;case 13:R=Zl(E,2),R!==null&&Ur(R,E,2),Rd(),yv(E,2)}if(E=Ev(f),E===null&&sv(s,a,f,Hd,u),E===g)break;g=E}g!==null&&f.stopPropagation()}else sv(s,a,f,null,u)}}function Ev(s){return s=Qr(s),_v(s)}var Hd=null;function _v(s){if(Hd=null,s=Ee(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Hd=s,null}function ES(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dc()){case to:return 2;case no:return 8;case hs:case pc:return 32;case ro:return 268435456;default:return 32}default:return 32}}var bv=!1,Ro=null,xo=null,ko=null,ah=new Map,lh=new Map,Io=[],SO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _S(s,a){switch(s){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":ah.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":lh.delete(a.pointerId)}}function uh(s,a,u,f,g,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:E,targetContainers:[g]},a!==null&&(a=Se(a),a!==null&&vS(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function wO(s,a,u,f,g){switch(a){case"focusin":return Ro=uh(Ro,s,a,u,f,g),!0;case"dragenter":return xo=uh(xo,s,a,u,f,g),!0;case"mouseover":return ko=uh(ko,s,a,u,f,g),!0;case"pointerover":var E=g.pointerId;return ah.set(E,uh(ah.get(E)||null,s,a,u,f,g)),!0;case"gotpointercapture":return E=g.pointerId,lh.set(E,uh(lh.get(E)||null,s,a,u,f,g)),!0}return!1}function bS(s){var a=Ee(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,zl(s.priority,function(){if(u.tag===13){var f=Vr();f=mi(f);var g=Zl(u,f);g!==null&&Ur(g,u,f),yv(u,f)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fd(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Ev(s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);gs=f,u.target.dispatchEvent(f),gs=null}else return a=Se(u),a!==null&&vS(a),s.blockedOn=u,!1;a.shift()}return!0}function TS(s,a,u){Fd(s)&&u.delete(a)}function AO(){bv=!1,Ro!==null&&Fd(Ro)&&(Ro=null),xo!==null&&Fd(xo)&&(xo=null),ko!==null&&Fd(ko)&&(ko=null),ah.forEach(TS),lh.forEach(TS)}function qd(s,a){s.blockedOn===a&&(s.blockedOn=null,bv||(bv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AO)))}var $d=null;function SS(s){$d!==s&&($d=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){$d===s&&($d=null);for(var a=0;a<s.length;a+=3){var u=s[a],f=s[a+1],g=s[a+2];if(typeof f!="function"){if(_v(f||u)===null)continue;break}var E=Se(u);E!==null&&(s.splice(a,3),a-=3,_y(E,{pending:!0,data:g,method:u.method,action:f},f,g))}}))}function ch(s){function a(P){return qd(P,s)}Ro!==null&&qd(Ro,s),xo!==null&&qd(xo,s),ko!==null&&qd(ko,s),ah.forEach(a),lh.forEach(a);for(var u=0;u<Io.length;u++){var f=Io[u];f.blockedOn===s&&(f.blockedOn=null)}for(;0<Io.length&&(u=Io[0],u.blockedOn===null);)bS(u),u.blockedOn===null&&Io.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var g=u[f],E=u[f+1],w=g[F]||null;if(typeof E=="function")w||SS(u);else if(w){var R=null;if(E&&E.hasAttribute("formAction")){if(g=E,w=E[F]||null)R=w.formAction;else if(_v(g)!==null)continue}else R=w.action;typeof R=="function"?u[f+1]=R:(u.splice(f,3),f-=3),SS(u)}}}function Tv(s){this._internalRoot=s}Gd.prototype.render=Tv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,f=Vr();gS(u,f,s,a,null,null)},Gd.prototype.unmount=Tv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;gS(s.current,2,null,s,null,null),Rd(),a[W]=null}};function Gd(s){this._internalRoot=s}Gd.prototype.unstable_scheduleHydration=function(s){if(s){var a=xr();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Io.length&&a!==0&&a<Io[u].priority;u++);Io.splice(u,0,s),u===0&&bS(s)}};var wS=e.version;if(wS!=="19.1.0")throw Error(r(527,wS,"19.1.0"));de.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(a),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var CO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kd.isDisabled&&Kd.supportsFiber)try{Ut=Kd.inject(CO),pt=Kd}catch{}}return fh.createRoot=function(s,a){if(!i(s))throw Error(r(299));var u=!1,f="",g=BT,E=jT,w=HT,R=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks)),a=pS(s,1,!1,null,null,u,f,g,E,w,R,null),s[W]=a.current,iv(s),new Tv(a)},fh.hydrateRoot=function(s,a,u){if(!i(s))throw Error(r(299));var f=!1,g="",E=BT,w=jT,R=HT,P=null,K=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(R=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(P=u.unstable_transitionCallbacks),u.formState!==void 0&&(K=u.formState)),a=pS(s,1,!0,a,u??null,f,g,E,w,R,P,K),a.context=mS(null),u=a.current,f=Vr(),f=mi(f),g=fo(f),g.callback=null,po(u,g,f),u=f,a.current.lanes=u,Cr(a,u),$i(a),s[W]=a.current,iv(s),new Gd(a)},fh.version="19.1.0",fh}var DS;function LO(){if(DS)return Av.exports;DS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Av.exports=PO(),Av.exports}var VO=LO(),cR=uR();const hR=RE(cR),UO=lR({__proto__:null,default:hR},[cR]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ft(){return Ft=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ft.apply(this,arguments)}var fn;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(fn||(fn={}));const PS="popstate";function zO(n){n===void 0&&(n={});function e(i,o){let{pathname:l="/",search:c="",hash:h=""}=Js(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Gh("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let l=i.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let h=i.location.href,d=h.indexOf("#");c=d===-1?h:h.slice(0,d)}return c+"#"+(typeof o=="string"?o:_l(o))}function r(i,o){El(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return jO(e,t,r,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function El(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BO(){return Math.random().toString(36).substr(2,8)}function LS(n,e){return{usr:n.state,key:n.key,idx:e}}function Gh(n,e,t,r){return t===void 0&&(t=null),Ft({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Js(e):e,{state:t,key:e&&e.key||r||BO()})}function _l(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Js(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function jO(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=fn.Pop,h=null,d=m();d==null&&(d=0,l.replaceState(Ft({},l.state,{idx:d}),""));function m(){return(l.state||{idx:null}).idx}function y(){c=fn.Pop;let C=m(),N=C==null?null:C-d;d=C,h&&h({action:c,location:A.location,delta:N})}function v(C,N){c=fn.Push;let H=Gh(A.location,C,N);t&&t(H,C),d=m()+1;let X=LS(H,d),ie=A.createHref(H);try{l.pushState(X,"",ie)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;i.location.assign(ie)}o&&h&&h({action:c,location:A.location,delta:1})}function _(C,N){c=fn.Replace;let H=Gh(A.location,C,N);t&&t(H,C),d=m();let X=LS(H,d),ie=A.createHref(H);l.replaceState(X,"",ie),o&&h&&h({action:c,location:A.location,delta:0})}function T(C){let N=i.location.origin!=="null"?i.location.origin:i.location.href,H=typeof C=="string"?C:_l(C);return H=H.replace(/ $/,"%20"),ot(N,"No window.location.(origin|href) available to create URL for href: "+H),new URL(H,N)}let A={get action(){return c},get location(){return n(i,l)},listen(C){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(PS,y),h=C,()=>{i.removeEventListener(PS,y),h=null}},createHref(C){return e(i,C)},createURL:T,encodeLocation(C){let N=T(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:_,go(C){return l.go(C)}};return A}var At;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(At||(At={}));const HO=new Set(["lazy","caseSensitive","path","id","index","children"]);function FO(n){return n.index===!0}function Ip(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((i,o)=>{let l=[...t,String(o)],c=typeof i.id=="string"?i.id:l.join("-");if(ot(i.index!==!0||!i.children,"Cannot specify children on an index route"),ot(!r[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),FO(i)){let h=Ft({},i,e(i),{id:c});return r[c]=h,h}else{let h=Ft({},i,e(i),{id:c,children:void 0});return r[c]=h,i.children&&(h.children=Ip(i.children,e,l,r)),h}})}function rl(n,e,t){return t===void 0&&(t="/"),dp(n,e,t,!1)}function dp(n,e,t,r){let i=typeof e=="string"?Js(e):e,o=rc(i.pathname||"/",t);if(o==null)return null;let l=fR(n);$O(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let d=nD(o);c=eD(l[h],d,r)}return c}function qO(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],handle:t.handle}}function fR(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(ot(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let d=Fs([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(ot(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),fR(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:JO(d,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of dR(o.path))i(o,l,h)}),e}function dR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=dR(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function $O(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ZO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const GO=/^:[\w-]+$/,KO=3,WO=2,YO=1,QO=10,XO=-2,VS=n=>n==="*";function JO(n,e){let t=n.split("/"),r=t.length;return t.some(VS)&&(r+=XO),e&&(r+=WO),t.filter(i=>!VS(i)).reduce((i,o)=>i+(GO.test(o)?KO:o===""?YO:QO),r)}function ZO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function eD(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],d=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=US({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},m),v=h.route;if(!y&&d&&t&&!r[r.length-1].route.index&&(y=US({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Fs([o,y.pathname]),pathnameBase:sD(Fs([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Fs([o,y.pathnameBase]))}return l}function US(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=tD(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,m,y)=>{let{paramName:v,isOptional:_}=m;if(v==="*"){let A=c[y]||"";l=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const T=c[y];return _&&!T?d[v]=void 0:d[v]=(T||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:n}}function tD(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),El(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function nD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return El(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function rc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function rD(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Js(n):n;return{pathname:t?t.startsWith("/")?t:iD(t,e):e,search:oD(r),hash:aD(i)}}function iD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function kv(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xE(n,e){let t=pR(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function kE(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Js(n):(i=Ft({},n),ot(!i.pathname||!i.pathname.includes("?"),kv("?","pathname","search",i)),ot(!i.pathname||!i.pathname.includes("#"),kv("#","pathname","hash",i)),ot(!i.search||!i.search.includes("#"),kv("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;i.pathname=v.join("/")}c=y>=0?e[y]:"/"}let h=rD(i,c),d=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||m)&&(h.pathname+="/"),h}const Fs=n=>n.join("/").replace(/\/\/+/g,"/"),sD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,aD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Mp{constructor(e,t,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=t||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Kh(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const mR=["post","put","patch","delete"],lD=new Set(mR),uD=["get",...mR],cD=new Set(uD),hD=new Set([301,302,303,307,308]),fD=new Set([307,308]),Iv={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},dD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},dh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},IE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),gR="remix-router-transitions";function mD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;ot(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(n.mapRouteProperties)i=n.mapRouteProperties;else if(n.detectErrorBoundary){let V=n.detectErrorBoundary;i=F=>({hasErrorBoundary:V(F)})}else i=pD;let o={},l=Ip(n.routes,i,void 0,o),c,h=n.basename||"/",d=n.dataStrategy||ED,m=n.patchRoutesOnNavigation,y=Ft({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),v=null,_=new Set,T=null,A=null,C=null,N=n.hydrationData!=null,H=rl(l,n.history.location,h),X=!1,ie=null;if(H==null&&!m){let V=Er(404,{pathname:n.history.location.pathname}),{matches:F,route:W}=YS(l);H=F,ie={[W.id]:V}}H&&!n.hydrationData&&gi(H,l,n.history.location.pathname).active&&(H=null);let te;if(H)if(H.some(V=>V.route.lazy))te=!1;else if(!H.some(V=>V.route.loader))te=!0;else if(y.v7_partialHydration){let V=n.hydrationData?n.hydrationData.loaderData:null,F=n.hydrationData?n.hydrationData.errors:null;if(F){let W=H.findIndex(ue=>F[ue.route.id]!==void 0);te=H.slice(0,W+1).every(ue=>!w0(ue.route,V,F))}else te=H.every(W=>!w0(W.route,V,F))}else te=n.hydrationData!=null;else if(te=!1,H=[],y.v7_partialHydration){let V=gi(null,l,n.history.location.pathname);V.active&&V.matches&&(X=!0,H=V.matches)}let ge,k={historyAction:n.history.action,location:n.history.location,matches:H,initialized:te,navigation:Iv,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ie,fetchers:new Map,blockers:new Map},x=fn.Pop,M=!1,O,z=!1,B=new Map,D=null,rt=!1,Ze=!1,Z=[],de=new Set,ve=new Map,it=0,U=-1,oe=new Map,pe=new Set,he=new Map,xe=new Map,Ve=new Set,Me=new Map,Ot=new Map,vt;function $r(){if(v=n.history.listen(V=>{let{action:F,location:W,delta:ue}=V;if(vt){vt(),vt=void 0;return}El(Ot.size===0||ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ye=oo({currentLocation:k.location,nextLocation:W,historyAction:F});if(ye&&ue!=null){let Ce=new Promise(Pe=>{vt=Pe});n.history.go(ue*-1),Ni(ye,{state:"blocked",location:W,proceed(){Ni(ye,{state:"proceeding",proceed:void 0,reset:void 0,location:W}),Ce.then(()=>n.history.go(ue))},reset(){let Pe=new Map(k.blockers);Pe.set(ye,dh),qt({blockers:Pe})}});return}return Gr(F,W)}),t){OD(e,B);let V=()=>DD(e,B);e.addEventListener("pagehide",V),D=()=>e.removeEventListener("pagehide",V)}return k.initialized||Gr(fn.Pop,k.location,{initialHydration:!0}),ge}function xi(){v&&v(),D&&D(),_.clear(),O&&O.abort(),k.fetchers.forEach((V,F)=>io(F)),k.blockers.forEach((V,F)=>so(F))}function pi(V){return _.add(V),()=>_.delete(V)}function qt(V,F){F===void 0&&(F={}),k=Ft({},k,V);let W=[],ue=[];y.v7_fetcherPersist&&k.fetchers.forEach((ye,Ce)=>{ye.state==="idle"&&(Ve.has(Ce)?ue.push(Ce):W.push(Ce))}),Ve.forEach(ye=>{!k.fetchers.has(ye)&&!ve.has(ye)&&ue.push(ye)}),[..._].forEach(ye=>ye(k,{deletedFetchers:ue,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),y.v7_fetcherPersist?(W.forEach(ye=>k.fetchers.delete(ye)),ue.forEach(ye=>io(ye))):ue.forEach(ye=>Ve.delete(ye))}function hr(V,F,W){var ue,ye;let{flushSync:Ce}=W===void 0?{}:W,Pe=k.actionData!=null&&k.navigation.formMethod!=null&&bi(k.navigation.formMethod)&&k.navigation.state==="loading"&&((ue=V.state)==null?void 0:ue._isRedirect)!==!0,_e;F.actionData?Object.keys(F.actionData).length>0?_e=F.actionData:_e=null:Pe?_e=k.actionData:_e=null;let Te=F.loaderData?KS(k.loaderData,F.loaderData,F.matches||[],F.errors):k.loaderData,Ee=k.blockers;Ee.size>0&&(Ee=new Map(Ee),Ee.forEach((Ue,Ye)=>Ee.set(Ye,dh)));let Se=M===!0||k.navigation.formMethod!=null&&bi(k.navigation.formMethod)&&((ye=V.state)==null?void 0:ye._isRedirect)!==!0;c&&(l=c,c=void 0),rt||x===fn.Pop||(x===fn.Push?n.history.push(V,V.state):x===fn.Replace&&n.history.replace(V,V.state));let De;if(x===fn.Pop){let Ue=B.get(k.location.pathname);Ue&&Ue.has(V.pathname)?De={currentLocation:k.location,nextLocation:V}:B.has(V.pathname)&&(De={currentLocation:V,nextLocation:k.location})}else if(z){let Ue=B.get(k.location.pathname);Ue?Ue.add(V.pathname):(Ue=new Set([V.pathname]),B.set(k.location.pathname,Ue)),De={currentLocation:k.location,nextLocation:V}}qt(Ft({},F,{actionData:_e,loaderData:Te,historyAction:x,location:V,initialized:!0,navigation:Iv,revalidation:"idle",restoreScrollPosition:mi(V,F.matches||k.matches),preventScrollReset:Se,blockers:Ee}),{viewTransitionOpts:De,flushSync:Ce===!0}),x=fn.Pop,M=!1,z=!1,rt=!1,Ze=!1,Z=[]}async function ki(V,F){if(typeof V=="number"){n.history.go(V);return}let W=S0(k.location,k.matches,h,y.v7_prependBasename,V,y.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:ue,submission:ye,error:Ce}=zS(y.v7_normalizeFormMethod,!1,W,F),Pe=k.location,_e=Gh(k.location,ue,F&&F.state);_e=Ft({},_e,n.history.encodeLocation(_e));let Te=F&&F.replace!=null?F.replace:void 0,Ee=fn.Push;Te===!0?Ee=fn.Replace:Te===!1||ye!=null&&bi(ye.formMethod)&&ye.formAction===k.location.pathname+k.location.search&&(Ee=fn.Replace);let Se=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,De=(F&&F.flushSync)===!0,Ue=oo({currentLocation:Pe,nextLocation:_e,historyAction:Ee});if(Ue){Ni(Ue,{state:"blocked",location:_e,proceed(){Ni(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),ki(V,F)},reset(){let Ye=new Map(k.blockers);Ye.set(Ue,dh),qt({blockers:Ye})}});return}return await Gr(Ee,_e,{submission:ye,pendingError:Ce,preventScrollReset:Se,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:De})}function wa(){if(pt(),qt({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Gr(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Gr(x||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:z===!0})}}async function Gr(V,F,W){O&&O.abort(),O=null,x=V,rt=(W&&W.startUninterruptedRevalidation)===!0,Ra(k.location,k.matches),M=(W&&W.preventScrollReset)===!0,z=(W&&W.enableViewTransition)===!0;let ue=c||l,ye=W&&W.overrideNavigation,Ce=W!=null&&W.initialHydration&&k.matches&&k.matches.length>0&&!X?k.matches:rl(ue,F,h),Pe=(W&&W.flushSync)===!0;if(Ce&&k.initialized&&!Ze&&AD(k.location,F)&&!(W&&W.submission&&bi(W.submission.formMethod))){hr(F,{matches:Ce},{flushSync:Pe});return}let _e=gi(Ce,ue,F.pathname);if(_e.active&&_e.matches&&(Ce=_e.matches),!Ce){let{error:mt,notFoundMatches:Xe,route:ut}=Ar(F.pathname);hr(F,{matches:Xe,loaderData:{},errors:{[ut.id]:mt}},{flushSync:Pe});return}O=new AbortController;let Te=wu(n.history,F,O.signal,W&&W.submission),Ee;if(W&&W.pendingError)Ee=[il(Ce).route.id,{type:At.error,error:W.pendingError}];else if(W&&W.submission&&bi(W.submission.formMethod)){let mt=await fr(Te,F,W.submission,Ce,_e.active,{replace:W.replace,flushSync:Pe});if(mt.shortCircuited)return;if(mt.pendingActionResult){let[Xe,ut]=mt.pendingActionResult;if(zr(ut)&&Kh(ut.error)&&ut.error.status===404){O=null,hr(F,{matches:mt.matches,loaderData:{},errors:{[Xe]:ut.error}});return}}Ce=mt.matches||Ce,Ee=mt.pendingActionResult,ye=Mv(F,W.submission),Pe=!1,_e.active=!1,Te=wu(n.history,Te.url,Te.signal)}let{shortCircuited:Se,matches:De,loaderData:Ue,errors:Ye}=await dc(Te,F,Ce,_e.active,ye,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,Pe,Ee);Se||(O=null,hr(F,Ft({matches:De||Ce},WS(Ee),{loaderData:Ue,errors:Ye})))}async function fr(V,F,W,ue,ye,Ce){Ce===void 0&&(Ce={}),pt();let Pe=MD(F,W);if(qt({navigation:Pe},{flushSync:Ce.flushSync===!0}),ye){let Ee=await xr(ue,F.pathname,V.signal);if(Ee.type==="aborted")return{shortCircuited:!0};if(Ee.type==="error"){let Se=il(Ee.partialMatches).route.id;return{matches:Ee.partialMatches,pendingActionResult:[Se,{type:At.error,error:Ee.error}]}}else if(Ee.matches)ue=Ee.matches;else{let{notFoundMatches:Se,error:De,route:Ue}=Ar(F.pathname);return{matches:Se,pendingActionResult:[Ue.id,{type:At.error,error:De}]}}}let _e,Te=Eh(ue,F);if(!Te.route.action&&!Te.route.lazy)_e={type:At.error,error:Er(405,{method:V.method,pathname:F.pathname,routeId:Te.route.id})};else if(_e=(await Ii("action",k,V,[Te],ue,null))[Te.route.id],V.signal.aborted)return{shortCircuited:!0};if(ol(_e)){let Ee;return Ce&&Ce.replace!=null?Ee=Ce.replace:Ee=qS(_e.response.headers.get("Location"),new URL(V.url),h)===k.location.pathname+k.location.search,await wr(V,_e,!0,{submission:W,replace:Ee}),{shortCircuited:!0}}if(Ko(_e))throw Er(400,{type:"defer-action"});if(zr(_e)){let Ee=il(ue,Te.route.id);return(Ce&&Ce.replace)!==!0&&(x=fn.Push),{matches:ue,pendingActionResult:[Ee.route.id,_e]}}return{matches:ue,pendingActionResult:[Te.route.id,_e]}}async function dc(V,F,W,ue,ye,Ce,Pe,_e,Te,Ee,Se){let De=ye||Mv(F,Ce),Ue=Ce||Pe||XS(De),Ye=!rt&&(!y.v7_partialHydration||!Te);if(ue){if(Ye){let gt=to(Se);qt(Ft({navigation:De},gt!==void 0?{actionData:gt}:{}),{flushSync:Ee})}let et=await xr(W,F.pathname,V.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let gt=il(et.partialMatches).route.id;return{matches:et.partialMatches,loaderData:{},errors:{[gt]:et.error}}}else if(et.matches)W=et.matches;else{let{error:gt,notFoundMatches:kr,route:Wr}=Ar(F.pathname);return{matches:kr,loaderData:{},errors:{[Wr.id]:gt}}}}let mt=c||l,[Xe,ut]=jS(n.history,k,W,Ue,F,y.v7_partialHydration&&Te===!0,y.v7_skipActionErrorRevalidation,Ze,Z,de,Ve,he,pe,mt,h,Se);if(Cr(et=>!(W&&W.some(gt=>gt.route.id===et))||Xe&&Xe.some(gt=>gt.route.id===et)),U=++it,Xe.length===0&&ut.length===0){let et=dr();return hr(F,Ft({matches:W,loaderData:{},errors:Se&&zr(Se[1])?{[Se[0]]:Se[1].error}:null},WS(Se),et?{fetchers:new Map(k.fetchers)}:{}),{flushSync:Ee}),{shortCircuited:!0}}if(Ye){let et={};if(!ue){et.navigation=De;let gt=to(Se);gt!==void 0&&(et.actionData=gt)}ut.length>0&&(et.fetchers=no(ut)),qt(et,{flushSync:Ee})}ut.forEach(et=>{Kn(et.key),et.controller&&ve.set(et.key,et.controller)});let Wn=()=>ut.forEach(et=>Kn(et.key));O&&O.signal.addEventListener("abort",Wn);let{loaderResults:Oi,fetcherResults:pr}=await Ut(k,W,Xe,ut,V);if(V.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",Wn),ut.forEach(et=>ve.delete(et.key));let wn=Wd(Oi);if(wn)return await wr(V,wn.result,!0,{replace:_e}),{shortCircuited:!0};if(wn=Wd(pr),wn)return pe.add(wn.key),await wr(V,wn.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:ao,errors:mr}=GS(k,W,Oi,Se,ut,pr,Me);Me.forEach((et,gt)=>{et.subscribe(kr=>{(kr||et.done)&&Me.delete(gt)})}),y.v7_partialHydration&&Te&&k.errors&&(mr=Ft({},k.errors,mr));let An=dr(),Yt=ds(U),Kr=An||Yt||ut.length>0;return Ft({matches:W,loaderData:ao,errors:mr},Kr?{fetchers:new Map(k.fetchers)}:{})}function to(V){if(V&&!zr(V[1]))return{[V[0]]:V[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function no(V){return V.forEach(F=>{let W=k.fetchers.get(F.key),ue=ph(void 0,W?W.data:void 0);k.fetchers.set(F.key,ue)}),new Map(k.fetchers)}function hs(V,F,W,ue){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Kn(V);let ye=(ue&&ue.flushSync)===!0,Ce=c||l,Pe=S0(k.location,k.matches,h,y.v7_prependBasename,W,y.v7_relativeSplatPath,F,ue==null?void 0:ue.relative),_e=rl(Ce,Pe,h),Te=gi(_e,Ce,Pe);if(Te.active&&Te.matches&&(_e=Te.matches),!_e){Dt(V,F,Er(404,{pathname:Pe}),{flushSync:ye});return}let{path:Ee,submission:Se,error:De}=zS(y.v7_normalizeFormMethod,!0,Pe,ue);if(De){Dt(V,F,De,{flushSync:ye});return}let Ue=Eh(_e,Ee),Ye=(ue&&ue.preventScrollReset)===!0;if(Se&&bi(Se.formMethod)){pc(V,F,Ee,Ue,_e,Te.active,ye,Ye,Se);return}he.set(V,{routeId:F,path:Ee}),ro(V,F,Ee,Ue,_e,Te.active,ye,Ye,Se)}async function pc(V,F,W,ue,ye,Ce,Pe,_e,Te){pt(),he.delete(V);function Ee(Lt){if(!Lt.route.action&&!Lt.route.lazy){let Ir=Er(405,{method:Te.formMethod,pathname:W,routeId:F});return Dt(V,F,Ir,{flushSync:Pe}),!0}return!1}if(!Ce&&Ee(ue))return;let Se=k.fetchers.get(V);Wt(V,ND(Te,Se),{flushSync:Pe});let De=new AbortController,Ue=wu(n.history,W,De.signal,Te);if(Ce){let Lt=await xr(ye,new URL(Ue.url).pathname,Ue.signal,V);if(Lt.type==="aborted")return;if(Lt.type==="error"){Dt(V,F,Lt.error,{flushSync:Pe});return}else if(Lt.matches){if(ye=Lt.matches,ue=Eh(ye,W),Ee(ue))return}else{Dt(V,F,Er(404,{pathname:W}),{flushSync:Pe});return}}ve.set(V,De);let Ye=it,Xe=(await Ii("action",k,Ue,[ue],ye,V))[ue.route.id];if(Ue.signal.aborted){ve.get(V)===De&&ve.delete(V);return}if(y.v7_fetcherPersist&&Ve.has(V)){if(ol(Xe)||zr(Xe)){Wt(V,Do(void 0));return}}else{if(ol(Xe))if(ve.delete(V),U>Ye){Wt(V,Do(void 0));return}else return pe.add(V),Wt(V,ph(Te)),wr(Ue,Xe,!1,{fetcherSubmission:Te,preventScrollReset:_e});if(zr(Xe)){Dt(V,F,Xe.error);return}}if(Ko(Xe))throw Er(400,{type:"defer-action"});let ut=k.navigation.location||k.location,Wn=wu(n.history,ut,De.signal),Oi=c||l,pr=k.navigation.state!=="idle"?rl(Oi,k.navigation.location,h):k.matches;ot(pr,"Didn't find any matches after fetcher action");let wn=++it;oe.set(V,wn);let ao=ph(Te,Xe.data);k.fetchers.set(V,ao);let[mr,An]=jS(n.history,k,pr,Te,ut,!1,y.v7_skipActionErrorRevalidation,Ze,Z,de,Ve,he,pe,Oi,h,[ue.route.id,Xe]);An.filter(Lt=>Lt.key!==V).forEach(Lt=>{let Ir=Lt.key,Cn=k.fetchers.get(Ir),xa=ph(void 0,Cn?Cn.data:void 0);k.fetchers.set(Ir,xa),Kn(Ir),Lt.controller&&ve.set(Ir,Lt.controller)}),qt({fetchers:new Map(k.fetchers)});let Yt=()=>An.forEach(Lt=>Kn(Lt.key));De.signal.addEventListener("abort",Yt);let{loaderResults:Kr,fetcherResults:et}=await Ut(k,pr,mr,An,Wn);if(De.signal.aborted)return;De.signal.removeEventListener("abort",Yt),oe.delete(V),ve.delete(V),An.forEach(Lt=>ve.delete(Lt.key));let gt=Wd(Kr);if(gt)return wr(Wn,gt.result,!1,{preventScrollReset:_e});if(gt=Wd(et),gt)return pe.add(gt.key),wr(Wn,gt.result,!1,{preventScrollReset:_e});let{loaderData:kr,errors:Wr}=GS(k,pr,Kr,void 0,An,et,Me);if(k.fetchers.has(V)){let Lt=Do(Xe.data);k.fetchers.set(V,Lt)}ds(wn),k.navigation.state==="loading"&&wn>U?(ot(x,"Expected pending action"),O&&O.abort(),hr(k.navigation.location,{matches:pr,loaderData:kr,errors:Wr,fetchers:new Map(k.fetchers)})):(qt({errors:Wr,loaderData:KS(k.loaderData,kr,pr,Wr),fetchers:new Map(k.fetchers)}),Ze=!1)}async function ro(V,F,W,ue,ye,Ce,Pe,_e,Te){let Ee=k.fetchers.get(V);Wt(V,ph(Te,Ee?Ee.data:void 0),{flushSync:Pe});let Se=new AbortController,De=wu(n.history,W,Se.signal);if(Ce){let Xe=await xr(ye,new URL(De.url).pathname,De.signal,V);if(Xe.type==="aborted")return;if(Xe.type==="error"){Dt(V,F,Xe.error,{flushSync:Pe});return}else if(Xe.matches)ye=Xe.matches,ue=Eh(ye,W);else{Dt(V,F,Er(404,{pathname:W}),{flushSync:Pe});return}}ve.set(V,Se);let Ue=it,mt=(await Ii("loader",k,De,[ue],ye,V))[ue.route.id];if(Ko(mt)&&(mt=await ME(mt,De.signal,!0)||mt),ve.get(V)===Se&&ve.delete(V),!De.signal.aborted){if(Ve.has(V)){Wt(V,Do(void 0));return}if(ol(mt))if(U>Ue){Wt(V,Do(void 0));return}else{pe.add(V),await wr(De,mt,!1,{preventScrollReset:_e});return}if(zr(mt)){Dt(V,F,mt.error);return}ot(!Ko(mt),"Unhandled fetcher deferred data"),Wt(V,Do(mt.data))}}async function wr(V,F,W,ue){let{submission:ye,fetcherSubmission:Ce,preventScrollReset:Pe,replace:_e}=ue===void 0?{}:ue;F.response.headers.has("X-Remix-Revalidate")&&(Ze=!0);let Te=F.response.headers.get("Location");ot(Te,"Expected a Location header on the redirect Response"),Te=qS(Te,new URL(V.url),h);let Ee=Gh(k.location,Te,{_isRedirect:!0});if(t){let Xe=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Xe=!0;else if(IE.test(Te)){const ut=n.history.createURL(Te);Xe=ut.origin!==e.location.origin||rc(ut.pathname,h)==null}if(Xe){_e?e.location.replace(Te):e.location.assign(Te);return}}O=null;let Se=_e===!0||F.response.headers.has("X-Remix-Replace")?fn.Replace:fn.Push,{formMethod:De,formAction:Ue,formEncType:Ye}=k.navigation;!ye&&!Ce&&De&&Ue&&Ye&&(ye=XS(k.navigation));let mt=ye||Ce;if(fD.has(F.response.status)&&mt&&bi(mt.formMethod))await Gr(Se,Ee,{submission:Ft({},mt,{formAction:Te}),preventScrollReset:Pe||M,enableViewTransition:W?z:void 0});else{let Xe=Mv(Ee,ye);await Gr(Se,Ee,{overrideNavigation:Xe,fetcherSubmission:Ce,preventScrollReset:Pe||M,enableViewTransition:W?z:void 0})}}async function Ii(V,F,W,ue,ye,Ce){let Pe,_e={};try{Pe=await _D(d,V,F,W,ue,ye,Ce,o,i)}catch(Te){return ue.forEach(Ee=>{_e[Ee.route.id]={type:At.error,error:Te}}),_e}for(let[Te,Ee]of Object.entries(Pe))if(CD(Ee)){let Se=Ee.result;_e[Te]={type:At.redirect,response:SD(Se,W,Te,ye,h,y.v7_relativeSplatPath)}}else _e[Te]=await TD(Ee);return _e}async function Ut(V,F,W,ue,ye){let Ce=V.matches,Pe=Ii("loader",V,ye,W,F,null),_e=Promise.all(ue.map(async Se=>{if(Se.matches&&Se.match&&Se.controller){let Ue=(await Ii("loader",V,wu(n.history,Se.path,Se.controller.signal),[Se.match],Se.matches,Se.key))[Se.match.route.id];return{[Se.key]:Ue}}else return Promise.resolve({[Se.key]:{type:At.error,error:Er(404,{pathname:Se.path})}})})),Te=await Pe,Ee=(await _e).reduce((Se,De)=>Object.assign(Se,De),{});return await Promise.all([kD(F,Te,ye.signal,Ce,V.loaderData),ID(F,Ee,ue)]),{loaderResults:Te,fetcherResults:Ee}}function pt(){Ze=!0,Z.push(...Cr()),he.forEach((V,F)=>{ve.has(F)&&de.add(F),Kn(F)})}function Wt(V,F,W){W===void 0&&(W={}),k.fetchers.set(V,F),qt({fetchers:new Map(k.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Dt(V,F,W,ue){ue===void 0&&(ue={});let ye=il(k.matches,F);io(V),qt({errors:{[ye.route.id]:W},fetchers:new Map(k.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Aa(V){return xe.set(V,(xe.get(V)||0)+1),Ve.has(V)&&Ve.delete(V),k.fetchers.get(V)||dD}function io(V){let F=k.fetchers.get(V);ve.has(V)&&!(F&&F.state==="loading"&&oe.has(V))&&Kn(V),he.delete(V),oe.delete(V),pe.delete(V),y.v7_fetcherPersist&&Ve.delete(V),de.delete(V),k.fetchers.delete(V)}function fs(V){let F=(xe.get(V)||0)-1;F<=0?(xe.delete(V),Ve.add(V),y.v7_fetcherPersist||io(V)):xe.set(V,F),qt({fetchers:new Map(k.fetchers)})}function Kn(V){let F=ve.get(V);F&&(F.abort(),ve.delete(V))}function Mi(V){for(let F of V){let W=Aa(F),ue=Do(W.data);k.fetchers.set(F,ue)}}function dr(){let V=[],F=!1;for(let W of pe){let ue=k.fetchers.get(W);ot(ue,"Expected fetcher: "+W),ue.state==="loading"&&(pe.delete(W),V.push(W),F=!0)}return Mi(V),F}function ds(V){let F=[];for(let[W,ue]of oe)if(ue<V){let ye=k.fetchers.get(W);ot(ye,"Expected fetcher: "+W),ye.state==="loading"&&(Kn(W),oe.delete(W),F.push(W))}return Mi(F),F.length>0}function ps(V,F){let W=k.blockers.get(V)||dh;return Ot.get(V)!==F&&Ot.set(V,F),W}function so(V){k.blockers.delete(V),Ot.delete(V)}function Ni(V,F){let W=k.blockers.get(V)||dh;ot(W.state==="unblocked"&&F.state==="blocked"||W.state==="blocked"&&F.state==="blocked"||W.state==="blocked"&&F.state==="proceeding"||W.state==="blocked"&&F.state==="unblocked"||W.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+W.state+" -> "+F.state);let ue=new Map(k.blockers);ue.set(V,F),qt({blockers:ue})}function oo(V){let{currentLocation:F,nextLocation:W,historyAction:ue}=V;if(Ot.size===0)return;Ot.size>1&&El(!1,"A router only supports one blocker at a time");let ye=Array.from(Ot.entries()),[Ce,Pe]=ye[ye.length-1],_e=k.blockers.get(Ce);if(!(_e&&_e.state==="proceeding")&&Pe({currentLocation:F,nextLocation:W,historyAction:ue}))return Ce}function Ar(V){let F=Er(404,{pathname:V}),W=c||l,{matches:ue,route:ye}=YS(W);return Cr(),{notFoundMatches:ue,route:ye,error:F}}function Cr(V){let F=[];return Me.forEach((W,ue)=>{(!V||V(ue))&&(W.cancel(),F.push(ue),Me.delete(ue))}),F}function Ca(V,F,W){if(T=V,C=F,A=W||null,!N&&k.navigation===Iv){N=!0;let ue=mi(k.location,k.matches);ue!=null&&qt({restoreScrollPosition:ue})}return()=>{T=null,C=null,A=null}}function Rr(V,F){return A&&A(V,F.map(ue=>qO(ue,k.loaderData)))||V.key}function Ra(V,F){if(T&&C){let W=Rr(V,F);T[W]=C()}}function mi(V,F){if(T){let W=Rr(V,F),ue=T[W];if(typeof ue=="number")return ue}return null}function gi(V,F,W){if(m)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:dp(F,W,h,!0)}}else return{active:!0,matches:dp(F,W,h,!0)||[]};return{active:!1,matches:null}}async function xr(V,F,W,ue){if(!m)return{type:"success",matches:V};let ye=V;for(;;){let Ce=c==null,Pe=c||l,_e=o;try{await m({signal:W,path:F,matches:ye,fetcherKey:ue,patch:(Se,De)=>{W.aborted||FS(Se,De,Pe,_e,i)}})}catch(Se){return{type:"error",error:Se,partialMatches:ye}}finally{Ce&&!W.aborted&&(l=[...l])}if(W.aborted)return{type:"aborted"};let Te=rl(Pe,F,h);if(Te)return{type:"success",matches:Te};let Ee=dp(Pe,F,h,!0);if(!Ee||ye.length===Ee.length&&ye.every((Se,De)=>Se.route.id===Ee[De].route.id))return{type:"success",matches:null};ye=Ee}}function zl(V){o={},c=Ip(V,i,void 0,o)}function Pt(V,F){let W=c==null;FS(V,F,c||l,o,i),W&&(l=[...l],qt({}))}return ge={get basename(){return h},get future(){return y},get state(){return k},get routes(){return l},get window(){return e},initialize:$r,subscribe:pi,enableScrollRestoration:Ca,navigate:ki,fetch:hs,revalidate:wa,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:Aa,deleteFetcher:fs,dispose:xi,getBlocker:ps,deleteBlocker:so,patchRoutes:Pt,_internalFetchControllers:ve,_internalActiveDeferreds:Me,_internalSetRoutes:zl},ge}function gD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function S0(n,e,t,r,i,o,l,c){let h,d;if(l){h=[];for(let y of e)if(h.push(y),y.route.id===l){d=y;break}}else h=e,d=e[e.length-1];let m=kE(i||".",xE(h,o),rc(n.pathname,t)||n.pathname,c==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&d){let y=NE(m.search);if(d.route.index&&!y)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&y){let v=new URLSearchParams(m.search),_=v.getAll("index");v.delete("index"),_.filter(A=>A).forEach(A=>v.append("index",A));let T=v.toString();m.search=T?"?"+T:""}}return r&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Fs([t,m.pathname])),_l(m)}function zS(n,e,t,r){if(!r||!gD(r))return{path:t};if(r.formMethod&&!xD(r.formMethod))return{path:t,error:Er(405,{method:r.formMethod})};let i=()=>({path:t,error:Er(400,{type:"invalid-body"})}),o=r.formMethod||"get",l=n?o.toUpperCase():o.toLowerCase(),c=ER(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!bi(l))return i();let v=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,T)=>{let[A,C]=T;return""+_+A+"="+C+`
`},""):String(r.body);return{path:t,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:v}}}else if(r.formEncType==="application/json"){if(!bi(l))return i();try{let v=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}ot(typeof FormData=="function","FormData is not available in this environment");let h,d;if(r.formData)h=A0(r.formData),d=r.formData;else if(r.body instanceof FormData)h=A0(r.body),d=r.body;else if(r.body instanceof URLSearchParams)h=r.body,d=$S(h);else if(r.body==null)h=new URLSearchParams,d=new FormData;else try{h=new URLSearchParams(r.body),d=$S(h)}catch{return i()}let m={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(bi(m.formMethod))return{path:t,submission:m};let y=Js(t);return e&&y.search&&NE(y.search)&&h.append("index",""),y.search="?"+h,{path:_l(y),submission:m}}function BS(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(i=>i.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function jS(n,e,t,r,i,o,l,c,h,d,m,y,v,_,T,A){let C=A?zr(A[1])?A[1].error:A[1].data:void 0,N=n.createURL(e.location),H=n.createURL(i),X=t;o&&e.errors?X=BS(t,Object.keys(e.errors)[0],!0):A&&zr(A[1])&&(X=BS(t,A[0]));let ie=A?A[1].statusCode:void 0,te=l&&ie&&ie>=400,ge=X.filter((x,M)=>{let{route:O}=x;if(O.lazy)return!0;if(O.loader==null)return!1;if(o)return w0(O,e.loaderData,e.errors);if(yD(e.loaderData,e.matches[M],x)||h.some(D=>D===x.route.id))return!0;let z=e.matches[M],B=x;return HS(x,Ft({currentUrl:N,currentParams:z.params,nextUrl:H,nextParams:B.params},r,{actionResult:C,actionStatus:ie,defaultShouldRevalidate:te?!1:c||N.pathname+N.search===H.pathname+H.search||N.search!==H.search||yR(z,B)}))}),k=[];return y.forEach((x,M)=>{if(o||!t.some(rt=>rt.route.id===x.routeId)||m.has(M))return;let O=rl(_,x.path,T);if(!O){k.push({key:M,routeId:x.routeId,path:x.path,matches:null,match:null,controller:null});return}let z=e.fetchers.get(M),B=Eh(O,x.path),D=!1;v.has(M)?D=!1:d.has(M)?(d.delete(M),D=!0):z&&z.state!=="idle"&&z.data===void 0?D=c:D=HS(B,Ft({currentUrl:N,currentParams:e.matches[e.matches.length-1].params,nextUrl:H,nextParams:t[t.length-1].params},r,{actionResult:C,actionStatus:ie,defaultShouldRevalidate:te?!1:c})),D&&k.push({key:M,routeId:x.routeId,path:x.path,matches:O,match:B,controller:new AbortController})}),[ge,k]}function w0(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function yD(n,e,t){let r=!e||t.route.id!==e.route.id,i=n[t.route.id]===void 0;return r||i}function yR(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function HS(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function FS(n,e,t,r,i){var o;let l;if(n){let d=r[n];ot(d,"No route found to patch children into: routeId = "+n),d.children||(d.children=[]),l=d.children}else l=t;let c=e.filter(d=>!l.some(m=>vR(d,m))),h=Ip(c,i,[n||"_","patch",String(((o=l)==null?void 0:o.length)||"0")],r);l.push(...h)}function vR(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>vR(t,o))}):!1}async function vD(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let i=t[n.id];ot(i,"No route found in manifest");let o={};for(let l in r){let h=i[l]!==void 0&&l!=="hasErrorBoundary";El(!h,'Route "'+i.id+'" has a static property "'+l+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+l+'" will be ignored.')),!h&&!HO.has(l)&&(o[l]=r[l])}Object.assign(i,o),Object.assign(i,Ft({},e(i),{lazy:void 0}))}async function ED(n){let{matches:e}=n,t=e.filter(i=>i.shouldLoad);return(await Promise.all(t.map(i=>i.resolve()))).reduce((i,o,l)=>Object.assign(i,{[t[l].route.id]:o}),{})}async function _D(n,e,t,r,i,o,l,c,h,d){let m=o.map(_=>_.route.lazy?vD(_.route,h,c):void 0),y=o.map((_,T)=>{let A=m[T],C=i.some(H=>H.route.id===_.route.id);return Ft({},_,{shouldLoad:C,resolve:async H=>(H&&r.method==="GET"&&(_.route.lazy||_.route.loader)&&(C=!0),C?bD(e,r,_,A,H,d):Promise.resolve({type:At.data,result:void 0}))})}),v=await n({matches:y,request:r,params:o[0].params,fetcherKey:l,context:d});try{await Promise.all(m)}catch{}return v}async function bD(n,e,t,r,i,o){let l,c,h=d=>{let m,y=new Promise((T,A)=>m=A);c=()=>m(),e.signal.addEventListener("abort",c);let v=T=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):d({request:e,params:t.params,context:o},...T!==void 0?[T]:[]),_=(async()=>{try{return{type:"data",result:await(i?i(A=>v(A)):v())}}catch(T){return{type:"error",result:T}}})();return Promise.race([_,y])};try{let d=t.route[n];if(r)if(d){let m,[y]=await Promise.all([h(d).catch(v=>{m=v}),r]);if(m!==void 0)throw m;l=y}else if(await r,d=t.route[n],d)l=await h(d);else if(n==="action"){let m=new URL(e.url),y=m.pathname+m.search;throw Er(405,{method:e.method,pathname:y,routeId:t.route.id})}else return{type:At.data,result:void 0};else if(d)l=await h(d);else{let m=new URL(e.url),y=m.pathname+m.search;throw Er(404,{pathname:y})}ot(l.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:At.error,result:d}}finally{c&&e.signal.removeEventListener("abort",c)}return l}async function TD(n){let{result:e,type:t}=n;if(_R(e)){let y;try{let v=e.headers.get("Content-Type");v&&/\bapplication\/json\b/.test(v)?e.body==null?y=null:y=await e.json():y=await e.text()}catch(v){return{type:At.error,error:v}}return t===At.error?{type:At.error,error:new Mp(e.status,e.statusText,y),statusCode:e.status,headers:e.headers}:{type:At.data,data:y,statusCode:e.status,headers:e.headers}}if(t===At.error){if(QS(e)){var r,i;if(e.data instanceof Error){var o,l;return{type:At.error,error:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:At.error,error:new Mp(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Kh(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:At.error,error:e,statusCode:Kh(e)?e.status:void 0}}if(RD(e)){var c,h;return{type:At.deferred,deferredData:e,statusCode:(c=e.init)==null?void 0:c.status,headers:((h=e.init)==null?void 0:h.headers)&&new Headers(e.init.headers)}}if(QS(e)){var d,m;return{type:At.data,data:e.data,statusCode:(d=e.init)==null?void 0:d.status,headers:(m=e.init)!=null&&m.headers?new Headers(e.init.headers):void 0}}return{type:At.data,data:e}}function SD(n,e,t,r,i,o){let l=n.headers.get("Location");if(ot(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!IE.test(l)){let c=r.slice(0,r.findIndex(h=>h.route.id===t)+1);l=S0(new URL(e.url),c,i,!0,l,o),n.headers.set("Location",l)}return n}function qS(n,e,t){if(IE.test(n)){let r=n,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=rc(i.pathname,t)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return n}function wu(n,e,t,r){let i=n.createURL(ER(e)).toString(),o={signal:t};if(r&&bi(r.formMethod)){let{formMethod:l,formEncType:c}=r;o.method=l.toUpperCase(),c==="application/json"?(o.headers=new Headers({"Content-Type":c}),o.body=JSON.stringify(r.json)):c==="text/plain"?o.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?o.body=A0(r.formData):o.body=r.formData}return new Request(i,o)}function A0(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function $S(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function wD(n,e,t,r,i){let o={},l=null,c,h=!1,d={},m=t&&zr(t[1])?t[1].error:void 0;return n.forEach(y=>{if(!(y.route.id in e))return;let v=y.route.id,_=e[v];if(ot(!ol(_),"Cannot handle redirect results in processLoaderData"),zr(_)){let T=_.error;m!==void 0&&(T=m,m=void 0),l=l||{};{let A=il(n,v);l[A.route.id]==null&&(l[A.route.id]=T)}o[v]=void 0,h||(h=!0,c=Kh(_.error)?_.error.status:500),_.headers&&(d[v]=_.headers)}else Ko(_)?(r.set(v,_.deferredData),o[v]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!h&&(c=_.statusCode),_.headers&&(d[v]=_.headers)):(o[v]=_.data,_.statusCode&&_.statusCode!==200&&!h&&(c=_.statusCode),_.headers&&(d[v]=_.headers))}),m!==void 0&&t&&(l={[t[0]]:m},o[t[0]]=void 0),{loaderData:o,errors:l,statusCode:c||200,loaderHeaders:d}}function GS(n,e,t,r,i,o,l){let{loaderData:c,errors:h}=wD(e,t,r,l);return i.forEach(d=>{let{key:m,match:y,controller:v}=d,_=o[m];if(ot(_,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(zr(_)){let T=il(n.matches,y==null?void 0:y.route.id);h&&h[T.route.id]||(h=Ft({},h,{[T.route.id]:_.error})),n.fetchers.delete(m)}else if(ol(_))ot(!1,"Unhandled fetcher revalidation redirect");else if(Ko(_))ot(!1,"Unhandled fetcher deferred data");else{let T=Do(_.data);n.fetchers.set(m,T)}}),{loaderData:c,errors:h}}function KS(n,e,t,r){let i=Ft({},e);for(let o of t){let l=o.route.id;if(e.hasOwnProperty(l)?e[l]!==void 0&&(i[l]=e[l]):n[l]!==void 0&&o.route.loader&&(i[l]=n[l]),r&&r.hasOwnProperty(l))break}return i}function WS(n){return n?zr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function il(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function YS(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Er(n,e){let{pathname:t,routeId:r,method:i,type:o,message:l}=e===void 0?{}:e,c="Unknown Server Error",h="Unknown @remix-run/router error";return n===400?(c="Bad Request",i&&t&&r?h="You made a "+i+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?h="defer() is not supported in actions":o==="invalid-body"&&(h="Unable to encode submission body")):n===403?(c="Forbidden",h='Route "'+r+'" does not match URL "'+t+'"'):n===404?(c="Not Found",h='No route matches URL "'+t+'"'):n===405&&(c="Method Not Allowed",i&&t&&r?h="You made a "+i.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(h='Invalid request method "'+i.toUpperCase()+'"')),new Mp(n||500,c,new Error(h),!0)}function Wd(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(ol(i))return{key:r,result:i}}}function ER(n){let e=typeof n=="string"?Js(n):n;return _l(Ft({},e,{hash:""}))}function AD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function CD(n){return _R(n.result)&&hD.has(n.result.status)}function Ko(n){return n.type===At.deferred}function zr(n){return n.type===At.error}function ol(n){return(n&&n.type)===At.redirect}function QS(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function RD(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function _R(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function xD(n){return cD.has(n.toLowerCase())}function bi(n){return lD.has(n.toLowerCase())}async function kD(n,e,t,r,i){let o=Object.entries(e);for(let l=0;l<o.length;l++){let[c,h]=o[l],d=n.find(v=>(v==null?void 0:v.route.id)===c);if(!d)continue;let m=r.find(v=>v.route.id===d.route.id),y=m!=null&&!yR(m,d)&&(i&&i[d.route.id])!==void 0;Ko(h)&&y&&await ME(h,t,!1).then(v=>{v&&(e[c]=v)})}}async function ID(n,e,t){for(let r=0;r<t.length;r++){let{key:i,routeId:o,controller:l}=t[r],c=e[i];n.find(d=>(d==null?void 0:d.route.id)===o)&&Ko(c)&&(ot(l,"Expected an AbortController for revalidating fetcher deferred result"),await ME(c,l.signal,!0).then(d=>{d&&(e[i]=d)}))}}async function ME(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:At.data,data:n.deferredData.unwrappedData}}catch(i){return{type:At.error,error:i}}return{type:At.data,data:n.deferredData.data}}}function NE(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Eh(n,e){let t=typeof e=="string"?Js(e).search:e.search;if(n[n.length-1].route.index&&NE(t||""))return n[n.length-1];let r=pR(n);return r[r.length-1]}function XS(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:o,json:l}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:t,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function Mv(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function MD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ph(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ND(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Do(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function OD(n,e){try{let t=n.sessionStorage.getItem(gR);if(t){let r=JSON.parse(t);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function DD(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(gR,JSON.stringify(t))}catch(r){El(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Np(){return Np=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Np.apply(this,arguments)}const jm=ee.createContext(null),bR=ee.createContext(null),Ol=ee.createContext(null),OE=ee.createContext(null),Zs=ee.createContext({outlet:null,matches:[],isDataRoute:!1}),TR=ee.createContext(null);function PD(n,e){let{relative:t}=e===void 0?{}:e;yf()||ot(!1);let{basename:r,navigator:i}=ee.useContext(Ol),{hash:o,pathname:l,search:c}=AR(n,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Fs([r,l])),i.createHref({pathname:h,search:c,hash:o})}function yf(){return ee.useContext(OE)!=null}function ic(){return yf()||ot(!1),ee.useContext(OE).location}function SR(n){ee.useContext(Ol).static||ee.useLayoutEffect(n)}function vf(){let{isDataRoute:n}=ee.useContext(Zs);return n?YD():LD()}function LD(){yf()||ot(!1);let n=ee.useContext(jm),{basename:e,future:t,navigator:r}=ee.useContext(Ol),{matches:i}=ee.useContext(Zs),{pathname:o}=ic(),l=JSON.stringify(xE(i,t.v7_relativeSplatPath)),c=ee.useRef(!1);return SR(()=>{c.current=!0}),ee.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let y=kE(d,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Fs([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,l,o,n])}const VD=ee.createContext(null);function UD(n){let e=ee.useContext(Zs).outlet;return e&&ee.createElement(VD.Provider,{value:n},e)}function wR(){let{matches:n}=ee.useContext(Zs),e=n[n.length-1];return e?e.params:{}}function AR(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=ee.useContext(Ol),{matches:i}=ee.useContext(Zs),{pathname:o}=ic(),l=JSON.stringify(xE(i,r.v7_relativeSplatPath));return ee.useMemo(()=>kE(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function zD(n,e,t,r){yf()||ot(!1);let{navigator:i}=ee.useContext(Ol),{matches:o}=ee.useContext(Zs),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let d=ic(),m;m=d;let y=m.pathname||"/",v=y;if(h!=="/"){let A=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(A.length).join("/")}let _=rl(n,{pathname:v});return qD(_&&_.map(A=>Object.assign({},A,{params:Object.assign({},c,A.params),pathname:Fs([h,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Fs([h,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,t,r)}function BD(){let n=WD(),e=Kh(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?ee.createElement("pre",{style:i},t):null,null)}const jD=ee.createElement(BD,null);class HD extends ee.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ee.createElement(Zs.Provider,{value:this.props.routeContext},ee.createElement(TR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FD(n){let{routeContext:e,match:t,children:r}=n,i=ee.useContext(jm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),ee.createElement(Zs.Provider,{value:e},r)}function qD(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let m=l.findIndex(y=>y.route.id&&(c==null?void 0:c[y.route.id])!==void 0);m>=0||ot(!1),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let y=l[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=m),y.route.id){let{loaderData:v,errors:_}=t,T=y.route.loader&&v[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||T){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((m,y,v)=>{let _,T=!1,A=null,C=null;t&&(_=c&&y.route.id?c[y.route.id]:void 0,A=y.route.errorElement||jD,h&&(d<0&&v===0?(QD("route-fallback"),T=!0,C=null):d===v&&(T=!0,C=y.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,v+1)),H=()=>{let X;return _?X=A:T?X=C:y.route.Component?X=ee.createElement(y.route.Component,null):y.route.element?X=y.route.element:X=m,ee.createElement(FD,{match:y,routeContext:{outlet:m,matches:N,isDataRoute:t!=null},children:X})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?ee.createElement(HD,{location:t.location,revalidation:t.revalidation,component:A,error:_,children:H(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):H()},null)}var CR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(CR||{}),RR=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(RR||{});function $D(n){let e=ee.useContext(jm);return e||ot(!1),e}function GD(n){let e=ee.useContext(bR);return e||ot(!1),e}function KD(n){let e=ee.useContext(Zs);return e||ot(!1),e}function xR(n){let e=KD(),t=e.matches[e.matches.length-1];return t.route.id||ot(!1),t.route.id}function WD(){var n;let e=ee.useContext(TR),t=GD(RR.UseRouteError),r=xR();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function YD(){let{router:n}=$D(CR.UseNavigateStable),e=xR(),t=ee.useRef(!1);return SR(()=>{t.current=!0}),ee.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Np({fromRouteId:e},o)))},[n,e])}const JS={};function QD(n,e,t){JS[n]||(JS[n]=!0)}function XD(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function kR(n){return UD(n.context)}function JD(n){let{basename:e="/",children:t=null,location:r,navigationType:i=fn.Pop,navigator:o,static:l=!1,future:c}=n;yf()&&ot(!1);let h=e.replace(/^\/*/,"/"),d=ee.useMemo(()=>({basename:h,navigator:o,static:l,future:Np({v7_relativeSplatPath:!1},c)}),[h,c,o,l]);typeof r=="string"&&(r=Js(r));let{pathname:m="/",search:y="",hash:v="",state:_=null,key:T="default"}=r,A=ee.useMemo(()=>{let C=rc(m,h);return C==null?null:{location:{pathname:C,search:y,hash:v,state:_,key:T},navigationType:i}},[h,m,y,v,_,T,i]);return A==null?null:ee.createElement(Ol.Provider,{value:d},ee.createElement(OE.Provider,{children:t,value:A}))}new Promise(()=>{});function ZD(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:ee.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:ee.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:ee.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wh.apply(this,arguments)}function eP(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function tP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function nP(n,e){return n.button===0&&(!e||e==="_self")&&!tP(n)}const rP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],iP="6";try{window.__reactRouterVersion=iP}catch{}function sP(n,e){return mD({basename:void 0,future:Wh({},void 0,{v7_prependBasename:!0}),history:zO({window:void 0}),hydrationData:oP(),routes:n,mapRouteProperties:ZD,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function oP(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Wh({},e,{errors:aP(e.errors)})),e}function aP(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Mp(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let o=new Error(i.message);o.stack="",t[r]=o}}else t[r]=i;return t}const lP=ee.createContext({isTransitioning:!1}),uP=ee.createContext(new Map),cP="startTransition",ZS=MO[cP],hP="flushSync",ew=UO[hP];function fP(n){ZS?ZS(n):n()}function mh(n){ew?ew(n):n()}let dP=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function pP(n){let{fallbackElement:e,router:t,future:r}=n,[i,o]=ee.useState(t.state),[l,c]=ee.useState(),[h,d]=ee.useState({isTransitioning:!1}),[m,y]=ee.useState(),[v,_]=ee.useState(),[T,A]=ee.useState(),C=ee.useRef(new Map),{v7_startTransition:N}=r||{},H=ee.useCallback(x=>{N?fP(x):x()},[N]),X=ee.useCallback((x,M)=>{let{deletedFetchers:O,flushSync:z,viewTransitionOpts:B}=M;x.fetchers.forEach((rt,Ze)=>{rt.data!==void 0&&C.current.set(Ze,rt.data)}),O.forEach(rt=>C.current.delete(rt));let D=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!B||D){z?mh(()=>o(x)):H(()=>o(x));return}if(z){mh(()=>{v&&(m&&m.resolve(),v.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let rt=t.window.document.startViewTransition(()=>{mh(()=>o(x))});rt.finished.finally(()=>{mh(()=>{y(void 0),_(void 0),c(void 0),d({isTransitioning:!1})})}),mh(()=>_(rt));return}v?(m&&m.resolve(),v.skipTransition(),A({state:x,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(c(x),d({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[t.window,v,m,C,H]);ee.useLayoutEffect(()=>t.subscribe(X),[t,X]),ee.useEffect(()=>{h.isTransitioning&&!h.flushSync&&y(new dP)},[h]),ee.useEffect(()=>{if(m&&l&&t.window){let x=l,M=m.promise,O=t.window.document.startViewTransition(async()=>{H(()=>o(x)),await M});O.finished.finally(()=>{y(void 0),_(void 0),c(void 0),d({isTransitioning:!1})}),_(O)}},[H,l,m,t.window]),ee.useEffect(()=>{m&&l&&i.location.key===l.location.key&&m.resolve()},[m,v,i.location,l]),ee.useEffect(()=>{!h.isTransitioning&&T&&(c(T.state),d({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),A(void 0))},[h.isTransitioning,T]),ee.useEffect(()=>{},[]);let ie=ee.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:x=>t.navigate(x),push:(x,M,O)=>t.navigate(x,{state:M,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(x,M,O)=>t.navigate(x,{replace:!0,state:M,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[t]),te=t.basename||"/",ge=ee.useMemo(()=>({router:t,navigator:ie,static:!1,basename:te}),[t,ie,te]),k=ee.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return ee.useEffect(()=>XD(r,t.future),[r,t.future]),ee.createElement(ee.Fragment,null,ee.createElement(jm.Provider,{value:ge},ee.createElement(bR.Provider,{value:i},ee.createElement(uP.Provider,{value:C.current},ee.createElement(lP.Provider,{value:h},ee.createElement(JD,{basename:te,location:i.location,navigationType:i.historyAction,navigator:ie,future:k},i.initialized||t.future.v7_partialHydration?ee.createElement(mP,{routes:t.routes,future:t.future,state:i}):e))))),null)}const mP=ee.memo(gP);function gP(n){let{routes:e,future:t,state:r}=n;return zD(e,void 0,r,t)}const yP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zo=ee.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:h,to:d,preventScrollReset:m,viewTransition:y}=e,v=eP(e,rP),{basename:_}=ee.useContext(Ol),T,A=!1;if(typeof d=="string"&&vP.test(d)&&(T=d,yP))try{let X=new URL(window.location.href),ie=d.startsWith("//")?new URL(X.protocol+d):new URL(d),te=rc(ie.pathname,_);ie.origin===X.origin&&te!=null?d=te+ie.search+ie.hash:A=!0}catch{}let C=PD(d,{relative:i}),N=EP(d,{replace:l,state:c,target:h,preventScrollReset:m,relative:i,viewTransition:y});function H(X){r&&r(X),X.defaultPrevented||N(X)}return ee.createElement("a",Wh({},v,{href:T||C,onClick:A||o?r:H,ref:t,target:h}))});var tw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(tw||(tw={}));var nw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(nw||(nw={}));function EP(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,h=vf(),d=ic(),m=AR(n,{relative:l});return ee.useCallback(y=>{if(nP(y,t)){y.preventDefault();let v=r!==void 0?r:_l(d)===_l(m);h(n,{replace:v,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[d,h,m,r,i,t,n,o,l,c])}function _P(){return L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"relative bg-[url(/assets/hero.jpg)] h-[90vh]",children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-white opacity-70"}),L.jsxs("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 
                bg-white/80 opacity-70 p-8 rounded-xl shadow-lg
                w-1/2`,children:[L.jsx("h1",{className:"text-5xl text-center",children:""}),L.jsxs("div",{className:"mt-10 text-center",children:[L.jsx("span",{className:"text-xl",children:""}),L.jsx("div",{className:"mt-3",children:" "}),L.jsx("div",{className:"my-2",children:""}),"  4:8"]})]})]}),L.jsx("div",{})]})}function bP(){return L.jsx("div",{children:L.jsx(_P,{})})}function IR(){return L.jsx("h1",{className:"text-center mt-20 text-5xl",children:""})}function TP(){return L.jsx("div",{children:L.jsx(IR,{})})}function SP(){const n="/love-coffee",e=ic(),[t,r]=ee.useState(-1);return ee.useEffect(()=>{switch(e.pathname){case"/tutorial":r(0);break;case"/aboutus":r(1);break;case"/product":r(3);break;case"/gospel":r(4);break;default:r(2)}},[e.pathname]),L.jsxs("nav",{className:"shadow-md h-20 flex align-middle justify-center text-x sticky",children:[L.jsxs("div",{className:"h-20 flex items-center",children:[L.jsx(zo,{className:"hover:text-slate-600 mx-5",to:"/tutorial",children:L.jsx("span",{className:t===0?"underline underline-offset-6 decoration-lime-700":"",children:""})}),L.jsx(zo,{className:"hover:text-slate-600 mx-5",to:"/aboutus",children:L.jsx("span",{className:t===1?"underline underline-offset-6 decoration-lime-700":"",children:""})})]}),L.jsx(zo,{className:"flex items-center mx-5",to:"/",children:L.jsx("img",{className:"h-16 cursor-pointer",src:n+"/assets/site-icon.svg"})}),L.jsxs("div",{className:"h-20 flex items-center",children:[L.jsx(zo,{className:"hover:text-slate-600 mx-5",to:"/product",children:L.jsx("span",{className:t===3?"underline underline-offset-6 decoration-lime-700":"",children:""})}),L.jsx(zo,{className:"hover:text-slate-600 mx-5",to:"/gospel",children:L.jsx("span",{className:t===4?"underline underline-offset-6 decoration-lime-700":"",children:""})})]})]})}function wP(){return L.jsxs("div",{children:[L.jsx(SP,{}),L.jsx("main",{children:L.jsx(kR,{})})]})}const AP=()=>{};var rw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},CP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},NR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|d>>6,_=d&63;h||(_=64,l||(v=64)),r.push(t[m],t[y],t[v],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||y==null)throw new RP;const v=o<<2|c>>4;if(r.push(v),d!==64){const _=c<<4&240|d>>2;if(r.push(_),y!==64){const T=d<<6&192|y;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xP=function(n){const e=MR(n);return NR.encodeByteArray(e,!0)},Op=function(n){return xP(n).replace(/\./g,"")},OR=function(n){try{return NR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=()=>kP().__FIREBASE_DEFAULTS__,MP=()=>{if(typeof process>"u"||typeof rw>"u")return;const n=rw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&OR(n[1]);return e&&JSON.parse(e)},Hm=()=>{try{return AP()||IP()||MP()||NP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},DR=n=>{var e,t;return(t=(e=Hm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},PR=n=>{const e=DR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},LR=()=>{var n;return(n=Hm())==null?void 0:n.config},VR=n=>{var e;return(e=Hm())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Op(JSON.stringify(t)),Op(JSON.stringify(l)),""].join(".")}const Ih={};function DP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ih))Ih[e]?n.emulator.push(e):n.prod.push(e);return n}function PP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let iw=!1;function PE(n,e){if(typeof window>"u"||typeof document>"u"||!ya(window.location.host)||Ih[n]===e||Ih[n]||iw)return;Ih[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=DP().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,_){v.setAttribute("width","24"),v.setAttribute("id",_),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{iw=!0,l()},v}function m(v,_){v.setAttribute("id",_),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=PP(r),_=t("text"),T=document.getElementById(_)||document.createElement("span"),A=t("learnmore"),C=document.getElementById(A)||document.createElement("a"),N=t("preprendIcon"),H=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const X=v.element;c(X),m(C,A);const ie=d();h(H,N),X.append(H,T,C,ie),document.body.appendChild(X)}o?(T.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nr())}function VP(){var e;const n=(e=Hm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jP(){const n=nr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HP(){return!VP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FP(){try{return typeof indexedDB=="object"}catch{return!1}}function qP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="FirebaseError";class cs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$P,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ef.prototype.create)}}class Ef{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?GP(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new cs(i,c,r)}}function GP(n,e){return n.replace(KP,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KP=/\{\$([^}]+)}/g;function WP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(sw(o)&&sw(l)){if(!bl(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function sw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _h(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function bh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function YP(n,e){const t=new QP(n,e);return t.subscribe.bind(t)}class QP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XP(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nv),i.error===void 0&&(i.error=Nv),i.complete===void 0&&(i.complete=Nv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(n){return n&&n._delegate?n._delegate:n}class la{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new OP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eL(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZP(n){return n===nl?void 0:n}function eL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const nL={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},rL=st.INFO,iL={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},sL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=iL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class LE{constructor(e){this.name=e,this._logLevel=rL,this._logHandler=sL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const oL=(n,e)=>e.some(t=>n instanceof t);let ow,aw;function aL(){return ow||(ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lL(){return aw||(aw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zR=new WeakMap,C0=new WeakMap,BR=new WeakMap,Ov=new WeakMap,VE=new WeakMap;function uL(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Jo(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&zR.set(t,n)}).catch(()=>{}),VE.set(e,n),e}function cL(n){if(C0.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});C0.set(n,e)}let R0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return C0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Jo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hL(n){R0=n(R0)}function fL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Dv(this),e,...t);return BR.set(r,e.sort?e.sort():[e]),Jo(r)}:lL().includes(n)?function(...e){return n.apply(Dv(this),e),Jo(zR.get(this))}:function(...e){return Jo(n.apply(Dv(this),e))}}function dL(n){return typeof n=="function"?fL(n):(n instanceof IDBTransaction&&cL(n),oL(n,aL())?new Proxy(n,R0):n)}function Jo(n){if(n instanceof IDBRequest)return uL(n);if(Ov.has(n))return Ov.get(n);const e=dL(n);return e!==n&&(Ov.set(n,e),VE.set(e,n)),e}const Dv=n=>VE.get(n);function pL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=Jo(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Jo(l.result),h.oldVersion,h.newVersion,Jo(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const mL=["get","getKey","getAll","getAllKeys","count"],gL=["put","add","delete","clear"],Pv=new Map;function lw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pv.get(e))return Pv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=gL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mL.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return Pv.set(e,o),o}hL(n=>({...n,get:(e,t,r)=>lw(e,t)||n.get(e,t,r),has:(e,t)=>!!lw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const x0="@firebase/app",uw="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new LE("@firebase/app"),EL="@firebase/app-compat",_L="@firebase/analytics-compat",bL="@firebase/analytics",TL="@firebase/app-check-compat",SL="@firebase/app-check",wL="@firebase/auth",AL="@firebase/auth-compat",CL="@firebase/database",RL="@firebase/data-connect",xL="@firebase/database-compat",kL="@firebase/functions",IL="@firebase/functions-compat",ML="@firebase/installations",NL="@firebase/installations-compat",OL="@firebase/messaging",DL="@firebase/messaging-compat",PL="@firebase/performance",LL="@firebase/performance-compat",VL="@firebase/remote-config",UL="@firebase/remote-config-compat",zL="@firebase/storage",BL="@firebase/storage-compat",jL="@firebase/firestore",HL="@firebase/ai",FL="@firebase/firestore-compat",qL="firebase",$L="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="[DEFAULT]",GL={[x0]:"fire-core",[EL]:"fire-core-compat",[bL]:"fire-analytics",[_L]:"fire-analytics-compat",[SL]:"fire-app-check",[TL]:"fire-app-check-compat",[wL]:"fire-auth",[AL]:"fire-auth-compat",[CL]:"fire-rtdb",[RL]:"fire-data-connect",[xL]:"fire-rtdb-compat",[kL]:"fire-fn",[IL]:"fire-fn-compat",[ML]:"fire-iid",[NL]:"fire-iid-compat",[OL]:"fire-fcm",[DL]:"fire-fcm-compat",[PL]:"fire-perf",[LL]:"fire-perf-compat",[VL]:"fire-rc",[UL]:"fire-rc-compat",[zL]:"fire-gcs",[BL]:"fire-gcs-compat",[jL]:"fire-fst",[FL]:"fire-fst-compat",[HL]:"fire-vertex","fire-js":"fire-js",[qL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new Map,KL=new Map,I0=new Map;function cw(n,e){try{n.container.addComponent(e)}catch(t){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tl(n){const e=n.name;if(I0.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;I0.set(e,n);for(const t of Dp.values())cw(t,n);for(const t of KL.values())cw(t,n);return!0}function Fm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ui(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zo=new Ef("app","Firebase",WL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=$L;function jR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:k0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Zo.create("bad-app-name",{appName:String(i)});if(t||(t=LR()),!t)throw Zo.create("no-options");const o=Dp.get(i);if(o){if(bl(t,o.options)&&bl(r,o.config))return o;throw Zo.create("duplicate-app",{appName:i})}const l=new tL(i);for(const h of I0.values())l.addComponent(h);const c=new YL(t,r,l);return Dp.set(i,c),c}function UE(n=k0){const e=Dp.get(n);if(!e&&n===k0&&LR())return jR();if(!e)throw Zo.create("no-app",{appName:n});return e}function Xi(n,e,t){let r=GL[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(l.join(" "));return}Tl(new la(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="firebase-heartbeat-database",XL=1,Yh="firebase-heartbeat-store";let Lv=null;function HR(){return Lv||(Lv=pL(QL,XL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zo.create("idb-open",{originalErrorMessage:n.message})})),Lv}async function JL(n){try{const t=(await HR()).transaction(Yh),r=await t.objectStore(Yh).get(FR(n));return await t.done,r}catch(e){if(e instanceof cs)Ks.warn(e.message);else{const t=Zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ks.warn(t.message)}}}async function hw(n,e){try{const r=(await HR()).transaction(Yh,"readwrite");await r.objectStore(Yh).put(e,FR(n)),await r.done}catch(t){if(t instanceof cs)Ks.warn(t.message);else{const r=Zo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ks.warn(r.message)}}}function FR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=1024,e4=30;class t4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new r4(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>e4){const l=i4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ks.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fw(),{heartbeatsToSend:r,unsentEntries:i}=n4(this._heartbeatsCache.heartbeats),o=Op(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ks.warn(t),""}}}function fw(){return new Date().toISOString().substring(0,10)}function n4(n,e=ZL){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),dw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),dw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class r4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FP()?qP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return hw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dw(n){return Op(JSON.stringify({version:2,heartbeats:n})).length}function i4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){Tl(new la("platform-logger",e=>new yL(e),"PRIVATE")),Tl(new la("heartbeat",e=>new t4(e),"PRIVATE")),Xi(x0,uw,n),Xi(x0,uw,"esm2020"),Xi("fire-js","")}s4("");var pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ea,qR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,x){function M(){}M.prototype=x.prototype,k.D=x.prototype,k.prototype=new M,k.prototype.constructor=k,k.C=function(O,z,B){for(var D=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)D[rt-2]=arguments[rt];return x.prototype[z].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,x,M){M||(M=0);var O=Array(16);if(typeof x=="string")for(var z=0;16>z;++z)O[z]=x.charCodeAt(M++)|x.charCodeAt(M++)<<8|x.charCodeAt(M++)<<16|x.charCodeAt(M++)<<24;else for(z=0;16>z;++z)O[z]=x[M++]|x[M++]<<8|x[M++]<<16|x[M++]<<24;x=k.g[0],M=k.g[1],z=k.g[2];var B=k.g[3],D=x+(B^M&(z^B))+O[0]+3614090360&4294967295;x=M+(D<<7&4294967295|D>>>25),D=B+(z^x&(M^z))+O[1]+3905402710&4294967295,B=x+(D<<12&4294967295|D>>>20),D=z+(M^B&(x^M))+O[2]+606105819&4294967295,z=B+(D<<17&4294967295|D>>>15),D=M+(x^z&(B^x))+O[3]+3250441966&4294967295,M=z+(D<<22&4294967295|D>>>10),D=x+(B^M&(z^B))+O[4]+4118548399&4294967295,x=M+(D<<7&4294967295|D>>>25),D=B+(z^x&(M^z))+O[5]+1200080426&4294967295,B=x+(D<<12&4294967295|D>>>20),D=z+(M^B&(x^M))+O[6]+2821735955&4294967295,z=B+(D<<17&4294967295|D>>>15),D=M+(x^z&(B^x))+O[7]+4249261313&4294967295,M=z+(D<<22&4294967295|D>>>10),D=x+(B^M&(z^B))+O[8]+1770035416&4294967295,x=M+(D<<7&4294967295|D>>>25),D=B+(z^x&(M^z))+O[9]+2336552879&4294967295,B=x+(D<<12&4294967295|D>>>20),D=z+(M^B&(x^M))+O[10]+4294925233&4294967295,z=B+(D<<17&4294967295|D>>>15),D=M+(x^z&(B^x))+O[11]+2304563134&4294967295,M=z+(D<<22&4294967295|D>>>10),D=x+(B^M&(z^B))+O[12]+1804603682&4294967295,x=M+(D<<7&4294967295|D>>>25),D=B+(z^x&(M^z))+O[13]+4254626195&4294967295,B=x+(D<<12&4294967295|D>>>20),D=z+(M^B&(x^M))+O[14]+2792965006&4294967295,z=B+(D<<17&4294967295|D>>>15),D=M+(x^z&(B^x))+O[15]+1236535329&4294967295,M=z+(D<<22&4294967295|D>>>10),D=x+(z^B&(M^z))+O[1]+4129170786&4294967295,x=M+(D<<5&4294967295|D>>>27),D=B+(M^z&(x^M))+O[6]+3225465664&4294967295,B=x+(D<<9&4294967295|D>>>23),D=z+(x^M&(B^x))+O[11]+643717713&4294967295,z=B+(D<<14&4294967295|D>>>18),D=M+(B^x&(z^B))+O[0]+3921069994&4294967295,M=z+(D<<20&4294967295|D>>>12),D=x+(z^B&(M^z))+O[5]+3593408605&4294967295,x=M+(D<<5&4294967295|D>>>27),D=B+(M^z&(x^M))+O[10]+38016083&4294967295,B=x+(D<<9&4294967295|D>>>23),D=z+(x^M&(B^x))+O[15]+3634488961&4294967295,z=B+(D<<14&4294967295|D>>>18),D=M+(B^x&(z^B))+O[4]+3889429448&4294967295,M=z+(D<<20&4294967295|D>>>12),D=x+(z^B&(M^z))+O[9]+568446438&4294967295,x=M+(D<<5&4294967295|D>>>27),D=B+(M^z&(x^M))+O[14]+3275163606&4294967295,B=x+(D<<9&4294967295|D>>>23),D=z+(x^M&(B^x))+O[3]+4107603335&4294967295,z=B+(D<<14&4294967295|D>>>18),D=M+(B^x&(z^B))+O[8]+1163531501&4294967295,M=z+(D<<20&4294967295|D>>>12),D=x+(z^B&(M^z))+O[13]+2850285829&4294967295,x=M+(D<<5&4294967295|D>>>27),D=B+(M^z&(x^M))+O[2]+4243563512&4294967295,B=x+(D<<9&4294967295|D>>>23),D=z+(x^M&(B^x))+O[7]+1735328473&4294967295,z=B+(D<<14&4294967295|D>>>18),D=M+(B^x&(z^B))+O[12]+2368359562&4294967295,M=z+(D<<20&4294967295|D>>>12),D=x+(M^z^B)+O[5]+4294588738&4294967295,x=M+(D<<4&4294967295|D>>>28),D=B+(x^M^z)+O[8]+2272392833&4294967295,B=x+(D<<11&4294967295|D>>>21),D=z+(B^x^M)+O[11]+1839030562&4294967295,z=B+(D<<16&4294967295|D>>>16),D=M+(z^B^x)+O[14]+4259657740&4294967295,M=z+(D<<23&4294967295|D>>>9),D=x+(M^z^B)+O[1]+2763975236&4294967295,x=M+(D<<4&4294967295|D>>>28),D=B+(x^M^z)+O[4]+1272893353&4294967295,B=x+(D<<11&4294967295|D>>>21),D=z+(B^x^M)+O[7]+4139469664&4294967295,z=B+(D<<16&4294967295|D>>>16),D=M+(z^B^x)+O[10]+3200236656&4294967295,M=z+(D<<23&4294967295|D>>>9),D=x+(M^z^B)+O[13]+681279174&4294967295,x=M+(D<<4&4294967295|D>>>28),D=B+(x^M^z)+O[0]+3936430074&4294967295,B=x+(D<<11&4294967295|D>>>21),D=z+(B^x^M)+O[3]+3572445317&4294967295,z=B+(D<<16&4294967295|D>>>16),D=M+(z^B^x)+O[6]+76029189&4294967295,M=z+(D<<23&4294967295|D>>>9),D=x+(M^z^B)+O[9]+3654602809&4294967295,x=M+(D<<4&4294967295|D>>>28),D=B+(x^M^z)+O[12]+3873151461&4294967295,B=x+(D<<11&4294967295|D>>>21),D=z+(B^x^M)+O[15]+530742520&4294967295,z=B+(D<<16&4294967295|D>>>16),D=M+(z^B^x)+O[2]+3299628645&4294967295,M=z+(D<<23&4294967295|D>>>9),D=x+(z^(M|~B))+O[0]+4096336452&4294967295,x=M+(D<<6&4294967295|D>>>26),D=B+(M^(x|~z))+O[7]+1126891415&4294967295,B=x+(D<<10&4294967295|D>>>22),D=z+(x^(B|~M))+O[14]+2878612391&4294967295,z=B+(D<<15&4294967295|D>>>17),D=M+(B^(z|~x))+O[5]+4237533241&4294967295,M=z+(D<<21&4294967295|D>>>11),D=x+(z^(M|~B))+O[12]+1700485571&4294967295,x=M+(D<<6&4294967295|D>>>26),D=B+(M^(x|~z))+O[3]+2399980690&4294967295,B=x+(D<<10&4294967295|D>>>22),D=z+(x^(B|~M))+O[10]+4293915773&4294967295,z=B+(D<<15&4294967295|D>>>17),D=M+(B^(z|~x))+O[1]+2240044497&4294967295,M=z+(D<<21&4294967295|D>>>11),D=x+(z^(M|~B))+O[8]+1873313359&4294967295,x=M+(D<<6&4294967295|D>>>26),D=B+(M^(x|~z))+O[15]+4264355552&4294967295,B=x+(D<<10&4294967295|D>>>22),D=z+(x^(B|~M))+O[6]+2734768916&4294967295,z=B+(D<<15&4294967295|D>>>17),D=M+(B^(z|~x))+O[13]+1309151649&4294967295,M=z+(D<<21&4294967295|D>>>11),D=x+(z^(M|~B))+O[4]+4149444226&4294967295,x=M+(D<<6&4294967295|D>>>26),D=B+(M^(x|~z))+O[11]+3174756917&4294967295,B=x+(D<<10&4294967295|D>>>22),D=z+(x^(B|~M))+O[2]+718787259&4294967295,z=B+(D<<15&4294967295|D>>>17),D=M+(B^(z|~x))+O[9]+3951481745&4294967295,k.g[0]=k.g[0]+x&4294967295,k.g[1]=k.g[1]+(z+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+B&4294967295}r.prototype.u=function(k,x){x===void 0&&(x=k.length);for(var M=x-this.blockSize,O=this.B,z=this.h,B=0;B<x;){if(z==0)for(;B<=M;)i(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<x;)if(O[z++]=k.charCodeAt(B++),z==this.blockSize){i(this,O),z=0;break}}else for(;B<x;)if(O[z++]=k[B++],z==this.blockSize){i(this,O),z=0;break}}this.h=z,this.o+=x},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var x=1;x<k.length-8;++x)k[x]=0;var M=8*this.o;for(x=k.length-8;x<k.length;++x)k[x]=M&255,M/=256;for(this.u(k),k=Array(16),x=M=0;4>x;++x)for(var O=0;32>O;O+=8)k[M++]=this.g[x]>>>O&255;return k};function o(k,x){var M=c;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=x(k)}function l(k,x){this.h=x;for(var M=[],O=!0,z=k.length-1;0<=z;z--){var B=k[z]|0;O&&B==x||(M[z]=B,O=!1)}this.g=M}var c={};function h(k){return-128<=k&&128>k?o(k,function(x){return new l([x|0],0>x?-1:0)}):new l([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return y;if(0>k)return C(d(-k));for(var x=[],M=1,O=0;k>=M;O++)x[O]=k/M|0,M*=4294967296;return new l(x,0)}function m(k,x){if(k.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(k.charAt(0)=="-")return C(m(k.substring(1),x));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=d(Math.pow(x,8)),O=y,z=0;z<k.length;z+=8){var B=Math.min(8,k.length-z),D=parseInt(k.substring(z,z+B),x);8>B?(B=d(Math.pow(x,B)),O=O.j(B).add(d(D))):(O=O.j(M),O=O.add(d(D)))}return O}var y=h(0),v=h(1),_=h(16777216);n=l.prototype,n.m=function(){if(A(this))return-C(this).m();for(var k=0,x=1,M=0;M<this.g.length;M++){var O=this.i(M);k+=(0<=O?O:4294967296+O)*x,x*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(A(this))return"-"+C(this).toString(k);for(var x=d(Math.pow(k,6)),M=this,O="";;){var z=ie(M,x).g;M=N(M,z.j(x));var B=((0<M.g.length?M.g[0]:M.h)>>>0).toString(k);if(M=z,T(M))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function T(k){if(k.h!=0)return!1;for(var x=0;x<k.g.length;x++)if(k.g[x]!=0)return!1;return!0}function A(k){return k.h==-1}n.l=function(k){return k=N(this,k),A(k)?-1:T(k)?0:1};function C(k){for(var x=k.g.length,M=[],O=0;O<x;O++)M[O]=~k.g[O];return new l(M,~k.h).add(v)}n.abs=function(){return A(this)?C(this):this},n.add=function(k){for(var x=Math.max(this.g.length,k.g.length),M=[],O=0,z=0;z<=x;z++){var B=O+(this.i(z)&65535)+(k.i(z)&65535),D=(B>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);O=D>>>16,B&=65535,D&=65535,M[z]=D<<16|B}return new l(M,M[M.length-1]&-2147483648?-1:0)};function N(k,x){return k.add(C(x))}n.j=function(k){if(T(this)||T(k))return y;if(A(this))return A(k)?C(this).j(C(k)):C(C(this).j(k));if(A(k))return C(this.j(C(k)));if(0>this.l(_)&&0>k.l(_))return d(this.m()*k.m());for(var x=this.g.length+k.g.length,M=[],O=0;O<2*x;O++)M[O]=0;for(O=0;O<this.g.length;O++)for(var z=0;z<k.g.length;z++){var B=this.i(O)>>>16,D=this.i(O)&65535,rt=k.i(z)>>>16,Ze=k.i(z)&65535;M[2*O+2*z]+=D*Ze,H(M,2*O+2*z),M[2*O+2*z+1]+=B*Ze,H(M,2*O+2*z+1),M[2*O+2*z+1]+=D*rt,H(M,2*O+2*z+1),M[2*O+2*z+2]+=B*rt,H(M,2*O+2*z+2)}for(O=0;O<x;O++)M[O]=M[2*O+1]<<16|M[2*O];for(O=x;O<2*x;O++)M[O]=0;return new l(M,0)};function H(k,x){for(;(k[x]&65535)!=k[x];)k[x+1]+=k[x]>>>16,k[x]&=65535,x++}function X(k,x){this.g=k,this.h=x}function ie(k,x){if(T(x))throw Error("division by zero");if(T(k))return new X(y,y);if(A(k))return x=ie(C(k),x),new X(C(x.g),C(x.h));if(A(x))return x=ie(k,C(x)),new X(C(x.g),x.h);if(30<k.g.length){if(A(k)||A(x))throw Error("slowDivide_ only works with positive integers.");for(var M=v,O=x;0>=O.l(k);)M=te(M),O=te(O);var z=ge(M,1),B=ge(O,1);for(O=ge(O,2),M=ge(M,2);!T(O);){var D=B.add(O);0>=D.l(k)&&(z=z.add(M),B=D),O=ge(O,1),M=ge(M,1)}return x=N(k,z.j(x)),new X(z,x)}for(z=y;0<=k.l(x);){for(M=Math.max(1,Math.floor(k.m()/x.m())),O=Math.ceil(Math.log(M)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=d(M),D=B.j(x);A(D)||0<D.l(k);)M-=O,B=d(M),D=B.j(x);T(B)&&(B=v),z=z.add(B),k=N(k,D)}return new X(z,k)}n.A=function(k){return ie(this,k).h},n.and=function(k){for(var x=Math.max(this.g.length,k.g.length),M=[],O=0;O<x;O++)M[O]=this.i(O)&k.i(O);return new l(M,this.h&k.h)},n.or=function(k){for(var x=Math.max(this.g.length,k.g.length),M=[],O=0;O<x;O++)M[O]=this.i(O)|k.i(O);return new l(M,this.h|k.h)},n.xor=function(k){for(var x=Math.max(this.g.length,k.g.length),M=[],O=0;O<x;O++)M[O]=this.i(O)^k.i(O);return new l(M,this.h^k.h)};function te(k){for(var x=k.g.length+1,M=[],O=0;O<x;O++)M[O]=k.i(O)<<1|k.i(O-1)>>>31;return new l(M,k.h)}function ge(k,x){var M=x>>5;x%=32;for(var O=k.g.length-M,z=[],B=0;B<O;B++)z[B]=0<x?k.i(B+M)>>>x|k.i(B+M+1)<<32-x:k.i(B+M);return new l(z,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qR=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=m,ea=l}).apply(typeof pw<"u"?pw:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $R,Th,GR,pp,M0,KR,WR,YR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,b,S){return p==Array.prototype||p==Object.prototype||(p[b]=S.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var b=0;b<p.length;++b){var S=p[b];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(p,b){if(b)e:{var S=r;p=p.split(".");for(var I=0;I<p.length-1;I++){var $=p[I];if(!($ in S))break e;S=S[$]}p=p[p.length-1],I=S[p],b=b(I),b!=I&&b!=null&&e(S,p,{configurable:!0,writable:!0,value:b})}}function o(p,b){p instanceof String&&(p+="");var S=0,I=!1,$={next:function(){if(!I&&S<p.length){var J=S++;return{value:b(J,p[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(p){return p||function(){return o(this,function(b,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(p){var b=typeof p;return b=b!="object"?b:p?Array.isArray(p)?"array":b:"null",b=="array"||b=="object"&&typeof p.length=="number"}function d(p){var b=typeof p;return b=="object"&&p!=null||b=="function"}function m(p,b,S){return p.call.apply(p.bind,arguments)}function y(p,b,S){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),p.apply(b,$)}}return function(){return p.apply(b,arguments)}}function v(p,b,S){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,v.apply(null,arguments)}function _(p,b){var S=Array.prototype.slice.call(arguments,1);return function(){var I=S.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function T(p,b){function S(){}S.prototype=b.prototype,p.aa=b.prototype,p.prototype=new S,p.prototype.constructor=p,p.Qb=function(I,$,J){for(var me=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)me[ct-2]=arguments[ct];return b.prototype[$].apply(I,me)}}function A(p){const b=p.length;if(0<b){const S=Array(b);for(let I=0;I<b;I++)S[I]=p[I];return S}return[]}function C(p,b){for(let S=1;S<arguments.length;S++){const I=arguments[S];if(h(I)){const $=p.length||0,J=I.length||0;p.length=$+J;for(let me=0;me<J;me++)p[$+me]=I[me]}else p.push(I)}}class N{constructor(b,S){this.i=b,this.j=S,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function H(p){return/^[\s\xa0]*$/.test(p)}function X(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function ie(p){return ie[" "](p),p}ie[" "]=function(){};var te=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ge(p,b,S){for(const I in p)b.call(S,p[I],I,p)}function k(p,b){for(const S in p)b.call(void 0,p[S],S,p)}function x(p){const b={};for(const S in p)b[S]=p[S];return b}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(p,b){let S,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(S in I)p[S]=I[S];for(let J=0;J<M.length;J++)S=M[J],Object.prototype.hasOwnProperty.call(I,S)&&(p[S]=I[S])}}function z(p){var b=1;p=p.split(":");const S=[];for(;0<b&&p.length;)S.push(p.shift()),b--;return p.length&&S.push(p.join(":")),S}function B(p){c.setTimeout(()=>{throw p},0)}function D(){var p=it;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}class rt{constructor(){this.h=this.g=null}add(b,S){const I=Ze.get();I.set(b,S),this.h?this.h.next=I:this.g=I,this.h=I}}var Ze=new N(()=>new Z,p=>p.reset());class Z{constructor(){this.next=this.g=this.h=null}set(b,S){this.h=b,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ve=!1,it=new rt,U=()=>{const p=c.Promise.resolve(void 0);de=()=>{p.then(oe)}};var oe=()=>{for(var p;p=D();){try{p.h.call(p.g)}catch(S){B(S)}var b=Ze;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}ve=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var xe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const S=()=>{};c.addEventListener("test",S,b),c.removeEventListener("test",S,b)}catch{}return p}();function Ve(p,b){if(he.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var S=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(te){e:{try{ie(b.nodeName);var $=!0;break e}catch{}$=!1}$||(b=null)}}else S=="mouseover"?b=p.fromElement:S=="mouseout"&&(b=p.toElement);this.relatedTarget=b,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Me[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ve.aa.h.call(this)}}T(Ve,he);var Me={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),vt=0;function $r(p,b,S,I,$){this.listener=p,this.proxy=null,this.src=b,this.type=S,this.capture=!!I,this.ha=$,this.key=++vt,this.da=this.fa=!1}function xi(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function pi(p){this.src=p,this.g={},this.h=0}pi.prototype.add=function(p,b,S,I,$){var J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);var me=hr(p,b,I,$);return-1<me?(b=p[me],S||(b.fa=!1)):(b=new $r(b,this.src,J,!!I,$),b.fa=S,p.push(b)),b};function qt(p,b){var S=b.type;if(S in p.g){var I=p.g[S],$=Array.prototype.indexOf.call(I,b,void 0),J;(J=0<=$)&&Array.prototype.splice.call(I,$,1),J&&(xi(b),p.g[S].length==0&&(delete p.g[S],p.h--))}}function hr(p,b,S,I){for(var $=0;$<p.length;++$){var J=p[$];if(!J.da&&J.listener==b&&J.capture==!!S&&J.ha==I)return $}return-1}var ki="closure_lm_"+(1e6*Math.random()|0),wa={};function Gr(p,b,S,I,$){if(Array.isArray(b)){for(var J=0;J<b.length;J++)Gr(p,b[J],S,I,$);return null}return S=Ii(S),p&&p[Ot]?p.K(b,S,d(I)?!!I.capture:!1,$):fr(p,b,S,!1,I,$)}function fr(p,b,S,I,$,J){if(!b)throw Error("Invalid event type");var me=d($)?!!$.capture:!!$,ct=ro(p);if(ct||(p[ki]=ct=new pi(p)),S=ct.add(b,S,I,me,J),S.proxy)return S;if(I=dc(),S.proxy=I,I.src=p,I.listener=S,p.addEventListener)xe||($=me),$===void 0&&($=!1),p.addEventListener(b.toString(),I,$);else if(p.attachEvent)p.attachEvent(hs(b.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return S}function dc(){function p(S){return b.call(p.src,p.listener,S)}const b=pc;return p}function to(p,b,S,I,$){if(Array.isArray(b))for(var J=0;J<b.length;J++)to(p,b[J],S,I,$);else I=d(I)?!!I.capture:!!I,S=Ii(S),p&&p[Ot]?(p=p.i,b=String(b).toString(),b in p.g&&(J=p.g[b],S=hr(J,S,I,$),-1<S&&(xi(J[S]),Array.prototype.splice.call(J,S,1),J.length==0&&(delete p.g[b],p.h--)))):p&&(p=ro(p))&&(b=p.g[b.toString()],p=-1,b&&(p=hr(b,S,I,$)),(S=-1<p?b[p]:null)&&no(S))}function no(p){if(typeof p!="number"&&p&&!p.da){var b=p.src;if(b&&b[Ot])qt(b.i,p);else{var S=p.type,I=p.proxy;b.removeEventListener?b.removeEventListener(S,I,p.capture):b.detachEvent?b.detachEvent(hs(S),I):b.addListener&&b.removeListener&&b.removeListener(I),(S=ro(b))?(qt(S,p),S.h==0&&(S.src=null,b[ki]=null)):xi(p)}}}function hs(p){return p in wa?wa[p]:wa[p]="on"+p}function pc(p,b){if(p.da)p=!0;else{b=new Ve(b,this);var S=p.listener,I=p.ha||p.src;p.fa&&no(p),p=S.call(I,b)}return p}function ro(p){return p=p[ki],p instanceof pi?p:null}var wr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ii(p){return typeof p=="function"?p:(p[wr]||(p[wr]=function(b){return p.handleEvent(b)}),p[wr])}function Ut(){pe.call(this),this.i=new pi(this),this.M=this,this.F=null}T(Ut,pe),Ut.prototype[Ot]=!0,Ut.prototype.removeEventListener=function(p,b,S,I){to(this,p,b,S,I)};function pt(p,b){var S,I=p.F;if(I)for(S=[];I;I=I.F)S.push(I);if(p=p.M,I=b.type||b,typeof b=="string")b=new he(b,p);else if(b instanceof he)b.target=b.target||p;else{var $=b;b=new he(I,p),O(b,$)}if($=!0,S)for(var J=S.length-1;0<=J;J--){var me=b.g=S[J];$=Wt(me,I,!0,b)&&$}if(me=b.g=p,$=Wt(me,I,!0,b)&&$,$=Wt(me,I,!1,b)&&$,S)for(J=0;J<S.length;J++)me=b.g=S[J],$=Wt(me,I,!1,b)&&$}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var p=this.i,b;for(b in p.g){for(var S=p.g[b],I=0;I<S.length;I++)xi(S[I]);delete p.g[b],p.h--}}this.F=null},Ut.prototype.K=function(p,b,S,I){return this.i.add(String(p),b,!1,S,I)},Ut.prototype.L=function(p,b,S,I){return this.i.add(String(p),b,!0,S,I)};function Wt(p,b,S,I){if(b=p.i.g[String(b)],!b)return!0;b=b.concat();for(var $=!0,J=0;J<b.length;++J){var me=b[J];if(me&&!me.da&&me.capture==S){var ct=me.listener,gn=me.ha||me.src;me.fa&&qt(p.i,me),$=ct.call(gn,I)!==!1&&$}}return $&&!I.defaultPrevented}function Dt(p,b,S){if(typeof p=="function")S&&(p=v(p,S));else if(p&&typeof p.handleEvent=="function")p=v(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:c.setTimeout(p,b||0)}function Aa(p){p.g=Dt(()=>{p.g=null,p.i&&(p.i=!1,Aa(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}class io extends pe{constructor(b,S){super(),this.m=b,this.l=S,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Aa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(p){pe.call(this),this.h=p,this.g={}}T(fs,pe);var Kn=[];function Mi(p){ge(p.g,function(b,S){this.g.hasOwnProperty(S)&&no(b)},p),p.g={}}fs.prototype.N=function(){fs.aa.N.call(this),Mi(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=c.JSON.stringify,ds=c.JSON.parse,ps=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function so(){}so.prototype.h=null;function Ni(p){return p.h||(p.h=p.i())}function oo(){}var Ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cr(){he.call(this,"d")}T(Cr,he);function Ca(){he.call(this,"c")}T(Ca,he);var Rr={},Ra=null;function mi(){return Ra=Ra||new Ut}Rr.La="serverreachability";function gi(p){he.call(this,Rr.La,p)}T(gi,he);function xr(p){const b=mi();pt(b,new gi(b))}Rr.STAT_EVENT="statevent";function zl(p,b){he.call(this,Rr.STAT_EVENT,p),this.stat=b}T(zl,he);function Pt(p){const b=mi();pt(b,new zl(b,p))}Rr.Ma="timingevent";function V(p,b){he.call(this,Rr.Ma,p),this.size=b}T(V,he);function F(p,b){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},b)}function W(){this.g=!0}W.prototype.xa=function(){this.g=!1};function ue(p,b,S,I,$,J){p.info(function(){if(p.g)if(J)for(var me="",ct=J.split("&"),gn=0;gn<ct.length;gn++){var ht=ct[gn].split("=");if(1<ht.length){var xn=ht[0];ht=ht[1];var yn=xn.split("_");me=2<=yn.length&&yn[1]=="type"?me+(xn+"="+ht+"&"):me+(xn+"=redacted&")}}else me=null;else me=J;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+b+`
`+S+`
`+me})}function ye(p,b,S,I,$,J,me){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+b+`
`+S+`
`+J+" "+me})}function Ce(p,b,S,I){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+_e(p,S)+(I?" "+I:"")})}function Pe(p,b){p.info(function(){return"TIMEOUT: "+b})}W.prototype.info=function(){};function _e(p,b){if(!p.g)return b;if(!b)return null;try{var S=JSON.parse(b);if(S){for(p=0;p<S.length;p++)if(Array.isArray(S[p])){var I=S[p];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var J=$[0];if(J!="noop"&&J!="stop"&&J!="close")for(var me=1;me<$.length;me++)$[me]=""}}}}return dr(S)}catch{return b}}var Te={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ee={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Se;function De(){}T(De,so),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Se=new De;function Ue(p,b,S,I){this.j=p,this.i=b,this.l=S,this.R=I||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ye}function Ye(){this.i=null,this.g="",this.h=!1}var mt={},Xe={};function ut(p,b,S){p.L=1,p.v=Ma(Mr(b)),p.m=S,p.P=!0,Wn(p,null)}function Wn(p,b){p.F=Date.now(),wn(p),p.A=Mr(p.v);var S=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),vc(S.i,"t",I),p.C=0,S=p.j.J,p.h=new Ye,p.g=qf(p.j,S?b:null,!p.m),0<p.O&&(p.M=new io(v(p.Y,p,p.g),p.O)),b=p.U,S=p.g,I=p.ca;var $="readystatechange";Array.isArray($)||($&&(Kn[0]=$.toString()),$=Kn);for(var J=0;J<$.length;J++){var me=Gr(S,$[J],I||b.handleEvent,!1,b.h||b);if(!me)break;b.g[me.key]=me}b=p.H?x(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),xr(),ue(p.i,p.u,p.A,p.l,p.R,p.m)}Ue.prototype.ca=function(p){p=p.target;const b=this.M;b&&Jr(p)==3?b.j():this.Y(p)},Ue.prototype.Y=function(p){try{if(p==this.g)e:{const yn=Jr(this.g);var b=this.g.Ba();const bs=this.g.Z();if(!(3>yn)&&(yn!=3||this.g&&(this.h.h||this.g.oa()||Lf(this.g)))){this.J||yn!=4||b==7||(b==8||0>=bs?xr(3):xr(2)),mr(this);var S=this.g.Z();this.X=S;t:if(Oi(this)){var I=Lf(this.g);p="";var $=I.length,J=Jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),An(this);var me="";break t}this.h.i=new c.TextDecoder}for(b=0;b<$;b++)this.h.h=!0,p+=this.h.i.decode(I[b],{stream:!(J&&b==$-1)});I.length=0,this.h.g+=p,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=S==200,ye(this.i,this.u,this.A,this.l,this.R,yn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,gn=this.g;if((ct=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ct)){var ht=ct;break t}}ht=null}if(S=ht)Ce(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kr(this,S);else{this.o=!1,this.s=3,Pt(12),Yt(this),An(this);break e}}if(this.P){S=!0;let Vn;for(;!this.J&&this.C<me.length;)if(Vn=pr(this,me),Vn==Xe){yn==4&&(this.s=4,Pt(14),S=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==mt){this.s=4,Pt(15),Ce(this.i,this.l,me,"[Invalid Chunk]"),S=!1;break}else Ce(this.i,this.l,Vn,null),Kr(this,Vn);if(Oi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yn!=4||me.length!=0||this.h.h||(this.s=1,Pt(16),S=!1),this.o=this.o&&S,!S)Ce(this.i,this.l,me,"[Invalid Chunked Response]"),Yt(this),An(this);else if(0<me.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),za(xn),xn.M=!0,Pt(11))}}else Ce(this.i,this.l,me,null),Kr(this,me);yn==4&&Yt(this),this.o&&!this.J&&(yn==4?jf(this.j,this):(this.o=!1,wn(this)))}else Mg(this.g),S==400&&0<me.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),Yt(this),An(this)}}}catch{}finally{}};function Oi(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function pr(p,b){var S=p.C,I=b.indexOf(`
`,S);return I==-1?Xe:(S=Number(b.substring(S,I)),isNaN(S)?mt:(I+=1,I+S>b.length?Xe:(b=b.slice(I,I+S),p.C=I+S,b)))}Ue.prototype.cancel=function(){this.J=!0,Yt(this)};function wn(p){p.S=Date.now()+p.I,ao(p,p.I)}function ao(p,b){if(p.B!=null)throw Error("WatchDog timer not null");p.B=F(v(p.ba,p),b)}function mr(p){p.B&&(c.clearTimeout(p.B),p.B=null)}Ue.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(Pe(this.i,this.A),this.L!=2&&(xr(),Pt(17)),Yt(this),this.s=2,An(this)):ao(this,this.S-p)};function An(p){p.j.G==0||p.J||jf(p.j,p)}function Yt(p){mr(p);var b=p.M;b&&typeof b.ma=="function"&&b.ma(),p.M=null,Mi(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function Kr(p,b){try{var S=p.j;if(S.G!=0&&(S.g==p||Lt(S.h,p))){if(!p.K&&Lt(S.h,p)&&S.G==3){try{var I=S.Da.g.parse(b)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<p.F)Wl(S),Gl(S);else break e;Sc(S),Pt(18)}}else S.za=$[1],0<S.za-S.T&&37500>$[2]&&S.F&&S.v==0&&!S.C&&(S.C=F(v(S.Za,S),6e3));if(1>=Wr(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else _s(S,11)}else if((p.K||S.g==p)&&Wl(S),!H(b))for($=S.Da.g.parse(b),b=0;b<$.length;b++){let ht=$[b];if(S.T=ht[0],ht=ht[1],S.G==2)if(ht[0]=="c"){S.K=ht[1],S.ia=ht[2];const xn=ht[3];xn!=null&&(S.la=xn,S.j.info("VER="+S.la));const yn=ht[4];yn!=null&&(S.Aa=yn,S.j.info("SVER="+S.Aa));const bs=ht[5];bs!=null&&typeof bs=="number"&&0<bs&&(I=1.5*bs,S.L=I,S.j.info("backChannelRequestTimeoutMs_="+I)),I=S;const Vn=p.g;if(Vn){const Bi=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var J=I.h;J.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Ir(J,J.h),J.h=null))}if(I.D){const Ac=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(I.ya=Ac,Rt(I.I,I.D,Ac))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-p.F,S.j.info("Handshake RTT: "+S.R+"ms")),I=S;var me=p;if(I.qa=Ff(I,I.J?I.ia:null,I.W),me.K){Cn(I.h,me);var ct=me,gn=I.L;gn&&(ct.I=gn),ct.B&&(mr(ct),wn(ct)),I.g=me}else zf(I);0<S.i.length&&Kl(S)}else ht[0]!="stop"&&ht[0]!="close"||_s(S,7);else S.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?_s(S,7):bc(S):ht[0]!="noop"&&S.l&&S.l.ta(ht),S.v=0)}}xr(4)}catch{}}var et=class{constructor(p,b){this.g=p,this.map=b}};function gt(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kr(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Wr(p){return p.h?1:p.g?p.g.size:0}function Lt(p,b){return p.h?p.h==b:p.g?p.g.has(b):!1}function Ir(p,b){p.g?p.g.add(b):p.h=b}function Cn(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}gt.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function xa(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let b=p.i;for(const S of p.g.values())b=b.concat(S.D);return b}return A(p.i)}function Rg(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(h(p)){for(var b=[],S=p.length,I=0;I<S;I++)b.push(p[I]);return b}b=[],S=0;for(I in p)b[S++]=p[I];return b}function Bl(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(h(p)||typeof p=="string"){var b=[];p=p.length;for(var S=0;S<p;S++)b.push(S);return b}b=[],S=0;for(const I in p)b[S++]=I;return b}}}function mc(p,b){if(p.forEach&&typeof p.forEach=="function")p.forEach(b,void 0);else if(h(p)||typeof p=="string")Array.prototype.forEach.call(p,b,void 0);else for(var S=Bl(p),I=Rg(p),$=I.length,J=0;J<$;J++)b.call(void 0,I[J],S&&S[J],p)}var ka=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xg(p,b){if(p){p=p.split("&");for(var S=0;S<p.length;S++){var I=p[S].indexOf("="),$=null;if(0<=I){var J=p[S].substring(0,I);$=p[S].substring(I+1)}else J=p[S];b(J,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ln(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ln){this.h=p.h,Ia(this,p.j),this.o=p.o,this.g=p.g,lo(this,p.s),this.l=p.l;var b=p.i,S=new gs;S.i=b.i,b.g&&(S.g=new Map(b.g),S.h=b.h),ms(this,S),this.m=p.m}else p&&(b=String(p).match(ka))?(this.h=!1,Ia(this,b[1]||"",!0),this.o=Yr(b[2]||""),this.g=Yr(b[3]||"",!0),lo(this,b[4]),this.l=Yr(b[5]||"",!0),ms(this,b[6]||"",!0),this.m=Yr(b[7]||"")):(this.h=!1,this.i=new gs(null,this.h))}ln.prototype.toString=function(){var p=[],b=this.j;b&&p.push(Na(b,gc,!0),":");var S=this.g;return(S||b=="file")&&(p.push("//"),(b=this.o)&&p.push(Na(b,gc,!0),"@"),p.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&p.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&p.push("/"),p.push(Na(S,S.charAt(0)=="/"?kg:yc,!0))),(S=this.i.toString())&&p.push("?",S),(S=this.m)&&p.push("#",Na(S,jl)),p.join("")};function Mr(p){return new ln(p)}function Ia(p,b,S){p.j=S?Yr(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function lo(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function ms(p,b,S){b instanceof gs?(p.i=b,Df(p.i,p.h)):(S||(b=Na(b,Ig)),p.i=new gs(b,p.h))}function Rt(p,b,S){p.i.set(b,S)}function Ma(p){return Rt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Yr(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Na(p,b,S){return typeof p=="string"?(p=encodeURI(p).replace(b,Of),S&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Of(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var gc=/[#\/\?@]/g,yc=/[#\?:]/g,kg=/[#\?]/g,Ig=/[#\?@]/g,jl=/#/g;function gs(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function Qr(p){p.g||(p.g=new Map,p.h=0,p.i&&xg(p.i,function(b,S){p.add(decodeURIComponent(b.replace(/\+/g," ")),S)}))}n=gs.prototype,n.add=function(p,b){Qr(this),this.i=null,p=Di(this,p);var S=this.g.get(p);return S||this.g.set(p,S=[]),S.push(b),this.h+=1,this};function ys(p,b){Qr(p),b=Di(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function vs(p,b){return Qr(p),b=Di(p,b),p.g.has(b)}n.forEach=function(p,b){Qr(this),this.g.forEach(function(S,I){S.forEach(function($){p.call(b,$,I,this)},this)},this)},n.na=function(){Qr(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),S=[];for(let I=0;I<b.length;I++){const $=p[I];for(let J=0;J<$.length;J++)S.push(b[I])}return S},n.V=function(p){Qr(this);let b=[];if(typeof p=="string")vs(this,p)&&(b=b.concat(this.g.get(Di(this,p))));else{p=Array.from(this.g.values());for(let S=0;S<p.length;S++)b=b.concat(p[S])}return b},n.set=function(p,b){return Qr(this),this.i=null,p=Di(this,p),vs(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},n.get=function(p,b){return p?(p=this.V(p),0<p.length?String(p[0]):b):b};function vc(p,b,S){ys(p,b),0<S.length&&(p.i=null,p.g.set(Di(p,b),A(S)),p.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var S=0;S<b.length;S++){var I=b[S];const J=encodeURIComponent(String(I)),me=this.V(I);for(I=0;I<me.length;I++){var $=J;me[I]!==""&&($+="="+encodeURIComponent(String(me[I]))),p.push($)}}return this.i=p.join("&")};function Di(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function Df(p,b){b&&!p.j&&(Qr(p),p.i=null,p.g.forEach(function(S,I){var $=I.toLowerCase();I!=$&&(ys(this,I),vc(this,$,S))},p)),p.j=b}function Oa(p,b){const S=new W;if(c.Image){const I=new Image;I.onload=_(Xr,S,"TestLoadImage: loaded",!0,b,I),I.onerror=_(Xr,S,"TestLoadImage: error",!1,b,I),I.onabort=_(Xr,S,"TestLoadImage: abort",!1,b,I),I.ontimeout=_(Xr,S,"TestLoadImage: timeout",!1,b,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else b(!1)}function yi(p,b){const S=new W,I=new AbortController,$=setTimeout(()=>{I.abort(),Xr(S,"TestPingServer: timeout",!1,b)},1e4);fetch(p,{signal:I.signal}).then(J=>{clearTimeout($),J.ok?Xr(S,"TestPingServer: ok",!0,b):Xr(S,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout($),Xr(S,"TestPingServer: error",!1,b)})}function Xr(p,b,S,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(S)}catch{}}function Da(){this.g=new ps}function Pi(p,b,S){const I=S||"";try{mc(p,function($,J){let me=$;d($)&&(me=dr($)),b.push(I+J+"="+encodeURIComponent(me))})}catch($){throw b.push(I+"type="+encodeURIComponent("_badmap")),$}}function uo(p){this.l=p.Ub||null,this.j=p.eb||!1}T(uo,so),uo.prototype.g=function(){return new Es(this.l,this.j)},uo.prototype.i=function(p){return function(){return p}}({});function Es(p,b){Ut.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Es,Ut),n=Es.prototype,n.open=function(p,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,Vi(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||c).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ec(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ec(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?Li(this):Vi(this),this.readyState==3&&Ec(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Li(this))},n.Qa=function(p){this.g&&(this.response=p,Li(this))},n.ga=function(){this.g&&Li(this)};function Li(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Vi(p)}n.setRequestHeader=function(p,b){this.u.append(p,b)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var S=b.next();!S.done;)S=S.value,p.push(S[0]+": "+S[1]),S=b.next();return p.join(`\r
`)};function Vi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function _c(p){let b="";return ge(p,function(S,I){b+=I,b+=":",b+=S,b+=`\r
`}),b}function Rn(p,b,S){e:{for(I in S){var I=!1;break e}I=!0}I||(S=_c(S),typeof p=="string"?S!=null&&encodeURIComponent(String(S)):Rt(p,b,S))}function _t(p){Ut.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(_t,Ut);var Hl=/^https?$/i,Pa=["POST","PUT"];n=_t.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,b,S,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Se.g(),this.v=this.o?Ni(this.o):Ni(Se),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(J){Pf(this,J);return}if(p=S||"",S=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)S.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())S.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(S.keys()).find(J=>J.toLowerCase()=="content-type"),$=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Pa,b,void 0))||I||$||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,me]of S)this.g.setRequestHeader(J,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{La(this),this.u=!0,this.g.send(p),this.u=!1}catch(J){Pf(this,J)}};function Pf(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,Fl(p),Ui(p)}function Fl(p){p.A||(p.A=!0,pt(p,"complete"),pt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,pt(this,"complete"),pt(this,"abort"),Ui(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},n.bb=function(){ql(this)};function ql(p){if(p.h&&typeof l<"u"&&(!p.v[1]||Jr(p)!=4||p.Z()!=2)){if(p.u&&Jr(p)==4)Dt(p.Ea,0,p);else if(pt(p,"readystatechange"),Jr(p)==4){p.h=!1;try{const me=p.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var S;if(!(S=b)){var I;if(I=me===0){var $=String(p.D).match(ka)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),I=!Hl.test($?$.toLowerCase():"")}S=I}if(S)pt(p,"complete"),pt(p,"success");else{p.m=6;try{var J=2<Jr(p)?p.g.statusText:""}catch{J=""}p.l=J+" ["+p.Z()+"]",Fl(p)}}finally{Ui(p)}}}}function Ui(p,b){if(p.g){La(p);const S=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||pt(p,"ready");try{S.onreadystatechange=I}catch{}}}function La(p){p.I&&(c.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function Jr(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&b.indexOf(p)==0&&(b=b.substring(p.length)),ds(b)}};function Lf(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Mg(p){const b={};p=(p.g&&2<=Jr(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(H(p[I]))continue;var S=z(p[I]);const $=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const J=b[$]||[];b[$]=J,J.push(S)}k(b,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Va(p,b,S){return S&&S.internalChannelParams&&S.internalChannelParams[p]||b}function $l(p){this.Aa=0,this.i=[],this.j=new W,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Va("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Va("baseRetryDelayMs",5e3,p),this.cb=Va("retryDelaySeedMs",1e4,p),this.Wa=Va("forwardChannelMaxRetries",2,p),this.wa=Va("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new gt(p&&p.concurrentRequestLimit),this.Da=new Da,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$l.prototype,n.la=8,n.G=1,n.connect=function(p,b,S,I){Pt(0),this.W=p,this.H=b||{},S&&I!==void 0&&(this.H.OSID=S,this.H.OAID=I),this.F=this.X,this.I=Ff(this,null,this.W),Kl(this)};function bc(p){if(Vf(p),p.G==3){var b=p.U++,S=Mr(p.I);if(Rt(S,"SID",p.K),Rt(S,"RID",b),Rt(S,"TYPE","terminate"),Ua(p,S),b=new Ue(p,p.j,b),b.L=2,b.v=Ma(Mr(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(b.v.toString(),"")}catch{}!S&&c.Image&&(new Image().src=b.v,S=!0),S||(b.g=qf(b.j,null),b.g.ea(b.v)),b.F=Date.now(),wn(b)}Hf(p)}function Gl(p){p.g&&(za(p),p.g.cancel(),p.g=null)}function Vf(p){Gl(p),p.u&&(c.clearTimeout(p.u),p.u=null),Wl(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function Kl(p){if(!kr(p.h)&&!p.s){p.s=!0;var b=p.Ga;de||U(),ve||(de(),ve=!0),it.add(b,p),p.B=0}}function Ng(p,b){return Wr(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=b.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=F(v(p.Ga,p,b),wc(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const $=new Ue(this,this.j,p);let J=this.o;if(this.S&&(J?(J=x(J),O(J,this.S)):J=this.S),this.m!==null||this.O||($.H=J,J=null),this.P)e:{for(var b=0,S=0;S<this.i.length;S++){t:{var I=this.i[S];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(b+=I,4096<b){b=S;break e}if(b===4096||S===this.i.length-1){b=S+1;break e}}b=1e3}else b=1e3;b=Uf(this,$,b),S=Mr(this.I),Rt(S,"RID",p),Rt(S,"CVER",22),this.D&&Rt(S,"X-HTTP-Session-Id",this.D),Ua(this,S),J&&(this.O?b="headers="+encodeURIComponent(String(_c(J)))+"&"+b:this.m&&Rn(S,this.m,J)),Ir(this.h,$),this.Ua&&Rt(S,"TYPE","init"),this.P?(Rt(S,"$req",b),Rt(S,"SID","null"),$.T=!0,ut($,S,null)):ut($,S,b),this.G=2}}else this.G==3&&(p?Tc(this,p):this.i.length==0||kr(this.h)||Tc(this))};function Tc(p,b){var S;b?S=b.l:S=p.U++;const I=Mr(p.I);Rt(I,"SID",p.K),Rt(I,"RID",S),Rt(I,"AID",p.T),Ua(p,I),p.m&&p.o&&Rn(I,p.m,p.o),S=new Ue(p,p.j,S,p.B+1),p.m===null&&(S.H=p.o),b&&(p.i=b.D.concat(p.i)),b=Uf(p,S,1e3),S.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Ir(p.h,S),ut(S,I,b)}function Ua(p,b){p.H&&ge(p.H,function(S,I){Rt(b,I,S)}),p.l&&mc({},function(S,I){Rt(b,I,S)})}function Uf(p,b,S){S=Math.min(p.i.length,S);var I=p.l?v(p.l.Na,p.l,p):null;e:{var $=p.i;let J=-1;for(;;){const me=["count="+S];J==-1?0<S?(J=$[0].g,me.push("ofs="+J)):J=0:me.push("ofs="+J);let ct=!0;for(let gn=0;gn<S;gn++){let ht=$[gn].g;const xn=$[gn].map;if(ht-=J,0>ht)J=Math.max(0,$[gn].g-100),ct=!1;else try{Pi(xn,me,"req"+ht+"_")}catch{I&&I(xn)}}if(ct){I=me.join("&");break e}}}return p=p.i.splice(0,S),b.D=p,I}function zf(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;de||U(),ve||(de(),ve=!0),it.add(b,p),p.v=0}}function Sc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=F(v(p.Fa,p),wc(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,Bf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=F(v(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Gl(this),Bf(this))};function za(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function Bf(p){p.g=new Ue(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var b=Mr(p.qa);Rt(b,"RID","rpc"),Rt(b,"SID",p.K),Rt(b,"AID",p.T),Rt(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&Rt(b,"TO",p.ja),Rt(b,"TYPE","xmlhttp"),Ua(p,b),p.m&&p.o&&Rn(b,p.m,p.o),p.L&&(p.g.I=p.L);var S=p.g;p=p.ia,S.L=1,S.v=Ma(Mr(b)),S.m=null,S.P=!0,Wn(S,p)}n.Za=function(){this.C!=null&&(this.C=null,Gl(this),Sc(this),Pt(19))};function Wl(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function jf(p,b){var S=null;if(p.g==b){Wl(p),za(p),p.g=null;var I=2}else if(Lt(p.h,b))S=b.D,Cn(p.h,b),I=1;else return;if(p.G!=0){if(b.o)if(I==1){S=b.m?b.m.length:0,b=Date.now()-b.F;var $=p.B;I=mi(),pt(I,new V(I,S)),Kl(p)}else zf(p);else if($=b.s,$==3||$==0&&0<b.X||!(I==1&&Ng(p,b)||I==2&&Sc(p)))switch(S&&0<S.length&&(b=p.h,b.i=b.i.concat(S)),$){case 1:_s(p,5);break;case 4:_s(p,10);break;case 3:_s(p,6);break;default:_s(p,2)}}}function wc(p,b){let S=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(S*=2),S*b}function _s(p,b){if(p.j.info("Error code "+b),b==2){var S=v(p.fb,p),I=p.Xa;const $=!I;I=new ln(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ia(I,"https"),Ma(I),$?Oa(I.toString(),S):yi(I.toString(),S)}else Pt(2);p.G=0,p.l&&p.l.sa(b),Hf(p),Vf(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Hf(p){if(p.G=0,p.ka=[],p.l){const b=xa(p.h);(b.length!=0||p.i.length!=0)&&(C(p.ka,b),C(p.ka,p.i),p.h.i.length=0,A(p.i),p.i.length=0),p.l.ra()}}function Ff(p,b,S){var I=S instanceof ln?Mr(S):new ln(S);if(I.g!="")b&&(I.g=b+"."+I.g),lo(I,I.s);else{var $=c.location;I=$.protocol,b=b?b+"."+$.hostname:$.hostname,$=+$.port;var J=new ln(null);I&&Ia(J,I),b&&(J.g=b),$&&lo(J,$),S&&(J.l=S),I=J}return S=p.D,b=p.ya,S&&b&&Rt(I,S,b),Rt(I,"VER",p.la),Ua(p,I),I}function qf(p,b,S){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=p.Ca&&!p.pa?new _t(new uo({eb:S})):new _t(p.pa),b.Ha(p.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $f(){}n=$f.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Yl(){}Yl.prototype.g=function(p,b){return new ir(p,b)};function ir(p,b){Ut.call(this),this.g=new $l(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!H(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!H(b)&&(this.g.D=b,p=this.h,p!==null&&b in p&&(p=this.h,b in p&&delete p[b])),this.j=new zi(this)}T(ir,Ut),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){bc(this.g)},ir.prototype.o=function(p){var b=this.g;if(typeof p=="string"){var S={};S.__data__=p,p=S}else this.u&&(S={},S.__data__=dr(p),p=S);b.i.push(new et(b.Ya++,p)),b.G==3&&Kl(b)},ir.prototype.N=function(){this.g.l=null,delete this.j,bc(this.g),delete this.g,ir.aa.N.call(this)};function Gf(p){Cr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const S in b){p=S;break e}p=void 0}(this.i=p)&&(p=this.i,b=b!==null&&p in b?b[p]:void 0),this.data=b}else this.data=p}T(Gf,Cr);function Kf(){Ca.call(this),this.status=1}T(Kf,Ca);function zi(p){this.g=p}T(zi,$f),zi.prototype.ua=function(){pt(this.g,"a")},zi.prototype.ta=function(p){pt(this.g,new Gf(p))},zi.prototype.sa=function(p){pt(this.g,new Kf)},zi.prototype.ra=function(){pt(this.g,"b")},Yl.prototype.createWebChannel=Yl.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,YR=function(){return new Yl},WR=function(){return mi()},KR=Rr,M0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Te.NO_ERROR=0,Te.TIMEOUT=8,Te.HTTP_ERROR=6,pp=Te,Ee.COMPLETE="complete",GR=Ee,oo.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,Th=oo,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,$R=_t}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const mw="@firebase/firestore",gw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zn.UNAUTHENTICATED=new Zn(null),Zn.GOOGLE_CREDENTIALS=new Zn("google-credentials-uid"),Zn.FIRST_PARTY=new Zn("first-party-uid"),Zn.MOCK_USER=new Zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=new LE("@firebase/firestore");function Ru(){return Sl.logLevel}function we(n,...e){if(Sl.logLevel<=st.DEBUG){const t=e.map(zE);Sl.debug(`Firestore (${sc}): ${n}`,...t)}}function Ws(n,...e){if(Sl.logLevel<=st.ERROR){const t=e.map(zE);Sl.error(`Firestore (${sc}): ${n}`,...t)}}function qu(n,...e){if(Sl.logLevel<=st.WARN){const t=e.map(zE);Sl.warn(`Firestore (${sc}): ${n}`,...t)}}function zE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QR(n,r,t)}function QR(n,e,t){let r=`FIRESTORE (${sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ws(r),new Error(r)}function bt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||QR(e,i,r)}function $e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zn.UNAUTHENTICATED))}shutdown(){}}class a4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class l4{constructor(e){this.t=e,this.currentUser=Zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qs,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qs)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string",31837,{l:r}),new XR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Zn(e)}}class u4{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c4{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new u4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Zn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ui(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const r=o=>{o.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,we("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new yw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=f4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function N0(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Vv(i)===Vv(o)?at(i,o):Vv(i)?1:-1}return at(n.length,e.length)}const d4=55296,p4=57343;function Vv(n){const e=n.charCodeAt(0);return e>=d4&&e<=p4}function $u(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="__name__";class Yi{constructor(e,t,r){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&je(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Yi.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return at(e.length,t.length)}static compareSegments(e,t){const r=Yi.isNumericId(e),i=Yi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Yi.extractNumericId(e).compare(Yi.extractNumericId(t)):N0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ea.fromString(e.substring(4,e.length-2))}}class Bt extends Yi{construct(e,t,r){return new Bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Bt(t)}static emptyPath(){return new Bt([])}}const m4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Yi{construct(e,t,r){return new $n(e,t,r)}static isValidIdentifier(e){return m4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vw}static keyField(){return new $n([vw])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Bt.fromString(e))}static fromName(e){return new Oe(Bt.fromString(e).popFirst(5))}static empty(){return new Oe(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n,e,t){if(!t)throw new Re(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function g4(n,e,t,r){if(e===!0&&r===!0)throw new Re(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ew(n){if(!Oe.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _w(n){if(Oe.isDocumentKey(n))throw new Re(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function Ys(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jE(n);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n,e){const t={typeString:n};return e&&(t.value=e),t}function bf(n,e){if(!ZR(n))throw new Re(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Re(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=-62135596800,Tw=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Tw);return new jt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bw)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tw}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bf(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:dn("string",jt._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new jt(0,0))}static max(){return new qe(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=-1;function y4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(r===1e9?new jt(t+1,0):new jt(t,r));return new ua(i,Oe.empty(),e)}function v4(n){return new ua(n.readTime,n.key,Qh)}class ua{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ua(qe.min(),Oe.empty(),Qh)}static max(){return new ua(qe.max(),Oe.empty(),Qh)}}function E4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==_4)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const d=h;t(e[d]).next(m=>{l[d]=m,++c,c===o&&r(l)},m=>i(m))}})}static doWhile(e,t){return new ae((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function T4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ac(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=-1;function $m(n){return n==null}function Pp(n){return n===0&&1/n==-1/0}function S4(n){return typeof n=="number"&&Number.isInteger(n)&&!Pp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="";function w4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sw(e)),e=A4(n.get(t),e);return Sw(e)}function A4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case ex:t+="";break;default:t+=o}}return t}function Sw(n){return n+ex+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function va(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||Hn.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Hn.RED,this.left=i??Hn.EMPTY,this.right=o??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Hn(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class Aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new jr([])}unionWith(e){let t=new Tn($n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nx("Invalid base64 string: "+o):o}}(e);return new Gn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new Gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gn.EMPTY_BYTE_STRING=new Gn("");const C4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(n){if(bt(!!n,39018),typeof n=="string"){let e=0;const t=C4.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ha(n){return typeof n=="string"?Gn.fromBase64String(n):Gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="server_timestamp",ix="__type__",sx="__previous_value__",ox="__local_write_time__";function FE(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ix])==null?void 0:r.stringValue)===rx}function Gm(n){const e=n.mapValue.fields[sx];return FE(e)?Gm(e):e}function Xh(n){const e=ca(n.mapValue.fields[ox].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,t,r,i,o,l,c,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=m}}const Lp="(default)";class Jh{constructor(e,t){this.projectId=e,this.database=t||Lp}static empty(){return new Jh("","")}get isDefaultDatabase(){return this.database===Lp}isEqual(e){return e instanceof Jh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="__type__",x4="__max__",Xd={mapValue:{}},lx="__vector__",Vp="value";function fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FE(n)?4:I4(n)?9007199254740991:k4(n)?10:11:je(28295,{value:n})}function ss(n,e){if(n===e)return!0;const t=fa(n);if(t!==fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xh(n).isEqual(Xh(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=ca(i.timestampValue),c=ca(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ha(i.bytesValue).isEqual(ha(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return on(i.geoPointValue.latitude)===on(o.geoPointValue.latitude)&&on(i.geoPointValue.longitude)===on(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return on(i.integerValue)===on(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=on(i.doubleValue),c=on(o.doubleValue);return l===c?Pp(l)===Pp(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return $u(n.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(ww(l)!==ww(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!ss(l[h],c[h])))return!1;return!0}(n,e);default:return je(52216,{left:n})}}function Zh(n,e){return(n.values||[]).find(t=>ss(t,e))!==void 0}function Gu(n,e){if(n===e)return 0;const t=fa(n),r=fa(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=on(o.integerValue||o.doubleValue),h=on(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Cw(n.timestampValue,e.timestampValue);case 4:return Cw(Xh(n),Xh(e));case 5:return N0(n.stringValue,e.stringValue);case 6:return function(o,l){const c=ha(o),h=ha(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let d=0;d<c.length&&d<h.length;d++){const m=at(c[d],h[d]);if(m!==0)return m}return at(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=at(on(o.latitude),on(l.latitude));return c!==0?c:at(on(o.longitude),on(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Rw(n.arrayValue,e.arrayValue);case 10:return function(o,l){var v,_,T,A;const c=o.fields||{},h=l.fields||{},d=(v=c[Vp])==null?void 0:v.arrayValue,m=(_=h[Vp])==null?void 0:_.arrayValue,y=at(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((A=m==null?void 0:m.values)==null?void 0:A.length)||0);return y!==0?y:Rw(d,m)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===Xd.mapValue&&l===Xd.mapValue)return 0;if(o===Xd.mapValue)return 1;if(l===Xd.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),d=l.fields||{},m=Object.keys(d);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const v=N0(h[y],m[y]);if(v!==0)return v;const _=Gu(c[h[y]],d[m[y]]);if(_!==0)return _}return at(h.length,m.length)}(n.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function Cw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=ca(n),r=ca(e),i=at(t.seconds,r.seconds);return i!==0?i:at(t.nanos,r.nanos)}function Rw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Gu(t[i],r[i]);if(o)return o}return at(t.length,r.length)}function Ku(n){return O0(n)}function O0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ca(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ha(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=O0(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${O0(t.fields[l])}`;return i+"}"}(n.mapValue):je(61005,{value:n})}function mp(n){switch(fa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gm(n);return e?16+mp(e):16;case 5:return 2*n.stringValue.length;case 6:return ha(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+mp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return va(r.fields,(o,l)=>{i+=o.length+mp(l)}),i}(n.mapValue);default:throw je(13486,{value:n})}}function D0(n){return!!n&&"integerValue"in n}function qE(n){return!!n&&"arrayValue"in n}function xw(n){return!!n&&"nullValue"in n}function kw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gp(n){return!!n&&"mapValue"in n}function k4(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ax])==null?void 0:r.stringValue)===lx}function Mh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return va(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Mh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mh(n.arrayValue.values[t]);return e}return{...n}}function I4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===x4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.value=e}static empty(){return new Tr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mh(t)}setAll(e){let t=$n.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Mh(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());gp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){va(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Tr(Mh(this.value))}}function ux(n){const e=[];return va(n.fields,(t,r)=>{const i=new $n([t]);if(gp(r)){const o=ux(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new er(e,0,qe.min(),qe.min(),qe.min(),Tr.empty(),0)}static newFoundDocument(e,t,r,i){return new er(e,1,t,qe.min(),r,i,0)}static newNoDocument(e,t){return new er(e,2,t,qe.min(),qe.min(),Tr.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,qe.min(),qe.min(),Tr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.position=e,this.inclusive=t}}function Iw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Oe.comparator(Oe.fromName(l.referenceValue),t.key):r=Gu(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ss(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t="asc"){this.field=e,this.dir=t}}function M4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{}class _n extends cx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new O4(e,t,r):t==="array-contains"?new L4(e,r):t==="in"?new V4(e,r):t==="not-in"?new U4(e,r):t==="array-contains-any"?new z4(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new D4(e,r):new P4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gu(t,this.value)):t!==null&&fa(this.value)===fa(t)&&this.matchesComparison(Gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends cx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new as(e,t)}matches(e){return hx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hx(n){return n.op==="and"}function fx(n){return N4(n)&&hx(n)}function N4(n){for(const e of n.filters)if(e instanceof as)return!1;return!0}function P0(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+Ku(n.value);if(fx(n))return n.filters.map(e=>P0(e)).join(",");{const e=n.filters.map(t=>P0(t)).join(",");return`${n.op}(${e})`}}function dx(n,e){return n instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.field.isEqual(i.field)&&ss(r.value,i.value)}(n,e):n instanceof as?function(r,i){return i instanceof as&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&dx(l,i.filters[c]),!0):!1}(n,e):void je(19439)}function px(n){return n instanceof _n?function(t){return`${t.field.canonicalString()} ${t.op} ${Ku(t.value)}`}(n):n instanceof as?function(t){return t.op.toString()+" {"+t.getFilters().map(px).join(" ,")+"}"}(n):"Filter"}class O4 extends _n{constructor(e,t,r){super(e,t,r),this.key=Oe.fromName(r.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class D4 extends _n{constructor(e,t){super(e,"in",t),this.keys=mx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class P4 extends _n{constructor(e,t){super(e,"not-in",t),this.keys=mx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Oe.fromName(r.referenceValue))}class L4 extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qE(t)&&Zh(t.arrayValue,this.value)}}class V4 extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zh(this.value.arrayValue,t)}}class U4 extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zh(this.value.arrayValue,t)}}class z4 extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function Nw(n,e=null,t=[],r=[],i=null,o=null,l=null){return new B4(n,e,t,r,i,o,l)}function $E(n){const e=$e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>P0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$m(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ku(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ku(r)).join(",")),e.Te=t}return e.Te}function GE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!M4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mw(n.startAt,e.startAt)&&Mw(n.endAt,e.endAt)}function L0(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function j4(n,e,t,r,i,o,l,c){return new Km(n,e,t,r,i,o,l,c)}function KE(n){return new Km(n)}function Ow(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function H4(n){return n.collectionGroup!==null}function Nh(n){const e=$e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Tn($n.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new zp(o,r))}),t.has($n.keyField().canonicalString())||e.Ie.push(new zp($n.keyField(),r))}return e.Ie}function Ji(n){const e=$e(n);return e.Ee||(e.Ee=F4(e,Nh(n))),e.Ee}function F4(n,e){if(n.limitType==="F")return Nw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new zp(i.field,o)});const t=n.endAt?new Up(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Up(n.startAt.position,n.startAt.inclusive):null;return Nw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function V0(n,e,t){return new Km(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wm(n,e){return GE(Ji(n),Ji(e))&&n.limitType===e.limitType}function gx(n){return`${$E(Ji(n))}|lt:${n.limitType}`}function xu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>px(i)).join(", ")}]`),$m(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ku(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ku(i)).join(",")),`Target(${r})`}(Ji(n))}; limitType=${n.limitType})`}function Ym(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Nh(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const d=Iw(l,c,h);return l.inclusive?d<=0:d<0}(r.startAt,Nh(r),i)||r.endAt&&!function(l,c,h){const d=Iw(l,c,h);return l.inclusive?d>=0:d>0}(r.endAt,Nh(r),i))}(n,e)}function q4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yx(n){return(e,t)=>{let r=!1;for(const i of Nh(n)){const o=$4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $4(n,e,t){const r=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),d=c.data.field(o);return h!==null&&d!==null?Gu(h,d):je(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return tx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=new Kt(Oe.comparator);function Qs(){return G4}const vx=new Kt(Oe.comparator);function Sh(...n){let e=vx;for(const t of n)e=e.insert(t.key,t);return e}function Ex(n){let e=vx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function al(){return Oh()}function _x(){return Oh()}function Oh(){return new Pl(n=>n.toString(),(n,e)=>n.isEqual(e))}const K4=new Kt(Oe.comparator),W4=new Tn(Oe.comparator);function lt(...n){let e=W4;for(const t of n)e=e.add(t);return e}const Y4=new Tn(at);function Q4(){return Y4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pp(e)?"-0":e}}function bx(n){return{integerValue:""+n}}function X4(n,e){return S4(e)?bx(e):WE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this._=void 0}}function J4(n,e,t){return n instanceof Bp?function(i,o){const l={fields:{[ix]:{stringValue:rx},[ox]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&FE(o)&&(o=Gm(o)),o&&(l.fields[sx]=o),{mapValue:l}}(t,e):n instanceof ef?Sx(n,e):n instanceof tf?wx(n,e):function(i,o){const l=Tx(i,o),c=Dw(l)+Dw(i.Ae);return D0(l)&&D0(i.Ae)?bx(c):WE(i.serializer,c)}(n,e)}function Z4(n,e,t){return n instanceof ef?Sx(n,e):n instanceof tf?wx(n,e):t}function Tx(n,e){return n instanceof jp?function(r){return D0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Bp extends Qm{}class ef extends Qm{constructor(e){super(),this.elements=e}}function Sx(n,e){const t=Ax(e);for(const r of n.elements)t.some(i=>ss(i,r))||t.push(r);return{arrayValue:{values:t}}}class tf extends Qm{constructor(e){super(),this.elements=e}}function wx(n,e){let t=Ax(e);for(const r of n.elements)t=t.filter(i=>!ss(i,r));return{arrayValue:{values:t}}}class jp extends Qm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Dw(n){return on(n.integerValue||n.doubleValue)}function Ax(n){return qE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function eV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ef&&i instanceof ef||r instanceof tf&&i instanceof tf?$u(r.elements,i.elements,ss):r instanceof jp&&i instanceof jp?ss(r.Ae,i.Ae):r instanceof Bp&&i instanceof Bp}(n.transform,e.transform)}class tV{constructor(e,t){this.version=e,this.transformResults=t}}class Ai{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xm{}function Cx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new YE(n.key,Ai.none()):new Tf(n.key,n.data,Ai.none());{const t=n.data,r=Tr.empty();let i=new Tn($n.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Ea(n.key,r,new jr(i.toArray()),Ai.none())}}function nV(n,e,t){n instanceof Tf?function(i,o,l){const c=i.value.clone(),h=Lw(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ea?function(i,o,l){if(!yp(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Lw(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(Rx(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Dh(n,e,t,r){return n instanceof Tf?function(o,l,c,h){if(!yp(o.precondition,l))return c;const d=o.value.clone(),m=Vw(o.fieldTransforms,h,l);return d.setAll(m),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ea?function(o,l,c,h){if(!yp(o.precondition,l))return c;const d=Vw(o.fieldTransforms,h,l),m=l.data;return m.setAll(Rx(o)),m.setAll(d),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,l,c){return yp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function rV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Tx(r.transform,i||null);o!=null&&(t===null&&(t=Tr.empty()),t.set(r.field,o))}return t||null}function Pw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$u(r,i,(o,l)=>eV(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tf extends Xm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ea extends Xm{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Rx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Lw(n,e,t){const r=new Map;bt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,Z4(l,c,t[i]))}return r}function Vw(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,J4(o,l,e))}return r}class YE extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iV extends Xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&nV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Dh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_x();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=Cx(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(qe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lt())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,(t,r)=>Pw(t,r))&&$u(this.baseMutations,e.baseMutations,(t,r)=>Pw(t,r))}}class QE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return K4}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new QE(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn,dt;function lV(n){switch(n){case le.OK:return je(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function xx(n){if(n===void 0)return Ws("GRPC error has no .code"),le.UNKNOWN;switch(n){case hn.OK:return le.OK;case hn.CANCELLED:return le.CANCELLED;case hn.UNKNOWN:return le.UNKNOWN;case hn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case hn.INTERNAL:return le.INTERNAL;case hn.UNAVAILABLE:return le.UNAVAILABLE;case hn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case hn.NOT_FOUND:return le.NOT_FOUND;case hn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case hn.ABORTED:return le.ABORTED;case hn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case hn.DATA_LOSS:return le.DATA_LOSS;default:return je(39323,{code:n})}}(dt=hn||(hn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new ea([4294967295,4294967295],0);function Uw(n){const e=uV().encode(n),t=new qR;return t.update(e),new Uint8Array(t.digest())}function zw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ea([t,r],0),new ea([i,o],0)]}class XE{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wh(`Invalid padding: ${t}`);if(r<0)throw new wh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ea.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ea.fromNumber(r)));return i.compare(cV)===1&&(i=new ea([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Uw(e),[r,i]=zw(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new XE(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.ge===0)return;const t=Uw(e),[r,i]=zw(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class wh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jm(qe.min(),i,new Kt(at),Qs(),lt())}}class Sf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sf(r,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class kx{constructor(e,t){this.targetId=e,this.Ce=t}}class Ix{constructor(e,t,r=Gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Bw{constructor(){this.ve=0,this.Fe=jw(),this.Me=Gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),t=lt(),r=lt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:je(38017,{changeType:o})}}),new Sf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=jw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qs(),this.Je=Jd(),this.He=Jd(),this.Ye=new Kt(at)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(L0(o))if(r===0){const l=new Oe(o.path);this.et(t,l,er.newNoDocument(l,qe.min()))}else bt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=ha(r).toUint8Array()}catch(h){if(h instanceof nx)return qu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new XE(l,i,o)}catch(h){return qu(h instanceof wh?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,l)=>{const c=this.ot(l);if(c){if(o.current&&L0(c.target)){const h=new Oe(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,er.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}});let r=lt();this.He.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new Jm(e,t,this.Ye,this.je,r);return this.je=Qs(),this.Je=Jd(),this.He=Jd(),this.Ye=new Kt(at),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Bw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tn(at),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tn(at),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bw),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jd(){return new Kt(Oe.comparator)}function jw(){return new Kt(Oe.comparator)}const fV={asc:"ASCENDING",desc:"DESCENDING"},dV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pV={and:"AND",or:"OR"};class mV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function U0(n,e){return n.useProto3Json||$m(e)?e:{value:e}}function Hp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gV(n,e){return Hp(n,e.toTimestamp())}function Zi(n){return bt(!!n,49232),qe.fromTimestamp(function(t){const r=ca(t);return new jt(r.seconds,r.nanos)}(n))}function JE(n,e){return z0(n,e).canonicalString()}function z0(n,e){const t=function(i){return new Bt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Nx(n){const e=Bt.fromString(n);return bt(Vx(e),10190,{key:e.toString()}),e}function B0(n,e){return JE(n.databaseId,e.path)}function Uv(n,e){const t=Nx(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(Dx(t))}function Ox(n,e){return JE(n.databaseId,e)}function yV(n){const e=Nx(n);return e.length===4?Bt.emptyPath():Dx(e)}function j0(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dx(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Hw(n,e,t){return{name:B0(n,e),fields:t.value.mapValue.fields}}function vV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:je(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(bt(m===void 0||typeof m=="string",58123),Gn.fromBase64String(m||"")):(bt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Gn.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(d){const m=d.code===void 0?le.UNKNOWN:xx(d.code);return new Re(m,d.message||"")}(l);t=new Ix(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uv(n,r.document.name),o=Zi(r.document.updateTime),l=r.document.createTime?Zi(r.document.createTime):qe.min(),c=new Tr({mapValue:{fields:r.document.fields}}),h=er.newFoundDocument(i,o,l,c),d=r.targetIds||[],m=r.removedTargetIds||[];t=new vp(d,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uv(n,r.document),o=r.readTime?Zi(r.readTime):qe.min(),l=er.newNoDocument(i,o),c=r.removedTargetIds||[];t=new vp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uv(n,r.document),o=r.removedTargetIds||[];t=new vp([],o,i,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new aV(i,o),c=r.targetId;t=new kx(c,l)}}return t}function EV(n,e){let t;if(e instanceof Tf)t={update:Hw(n,e.key,e.value)};else if(e instanceof YE)t={delete:B0(n,e.key)};else if(e instanceof Ea)t={update:Hw(n,e.key,e.data),updateMask:xV(e.fieldMask)};else{if(!(e instanceof iV))return je(16599,{Vt:e.type});t={verify:B0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Bp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ef)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof tf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jp)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw je(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:gV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:je(27497)}(n,e.precondition)),t}function _V(n,e){return n&&n.length>0?(bt(e!==void 0,14353),n.map(t=>function(i,o){let l=i.updateTime?Zi(i.updateTime):Zi(o);return l.isEqual(qe.min())&&(l=Zi(o)),new tV(l,i.transformResults||[])}(t,e))):[]}function bV(n,e){return{documents:[Ox(n,e.path)]}}function TV(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ox(n,i);const o=function(d){if(d.length!==0)return Lx(as.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(d){if(d.length!==0)return d.map(m=>function(v){return{field:ku(v.field),direction:AV(v.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=U0(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function SV(n){let e=yV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(y){const v=Px(y);return v instanceof as&&fx(v)?v.getFilters():[v]}(t.where));let l=[];t.orderBy&&(l=function(y){return y.map(v=>function(T){return new zp(Iu(T.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(v))}(t.orderBy));let c=null;t.limit&&(c=function(y){let v;return v=typeof y=="object"?y.value:y,$m(v)?null:v}(t.limit));let h=null;t.startAt&&(h=function(y){const v=!!y.before,_=y.values||[];return new Up(_,v)}(t.startAt));let d=null;return t.endAt&&(d=function(y){const v=!y.before,_=y.values||[];return new Up(_,v)}(t.endAt)),j4(e,i,l,o,c,"F",h,d)}function wV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Px(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Iu(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Iu(t.unaryFilter.field);return _n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Iu(t.unaryFilter.field);return _n.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Iu(t.unaryFilter.field);return _n.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(n):n.fieldFilter!==void 0?function(t){return _n.create(Iu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return as.create(t.compositeFilter.filters.map(r=>Px(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(t.compositeFilter.op))}(n):je(30097,{filter:n})}function AV(n){return fV[n]}function CV(n){return dV[n]}function RV(n){return pV[n]}function ku(n){return{fieldPath:n.canonicalString()}}function Iu(n){return $n.fromServerFormat(n.fieldPath)}function Lx(n){return n instanceof _n?function(t){if(t.op==="=="){if(kw(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NAN"}};if(xw(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kw(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NAN"}};if(xw(t.value))return{unaryFilter:{field:ku(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(t.field),op:CV(t.op),value:t.value}}}(n):n instanceof as?function(t){const r=t.getFilters().map(i=>Lx(i));return r.length===1?r[0]:{compositeFilter:{op:RV(t.op),filters:r}}}(n):je(54877,{filter:n})}function xV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Vx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,r,i,o=qe.min(),l=qe.min(),c=Gn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.yt=e}}function IV(n){const e=SV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.Cn=new NV}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(ua.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(ua.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class NV{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(Bt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ux=41943040;class _r{static withCacheSize(e){return new _r(e,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(Ux,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wu(0)}static cr(){return new Wu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="LruGarbageCollector",OV=1048576;function $w([n,e],[t,r]){const i=at(n,t);return i===0?at(e,r):i}class DV{constructor(e){this.Ir=e,this.buffer=new Tn($w),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$w(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(qw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ac(t)?we(qw,"Ignoring IndexedDB error during garbage collection: ",t):await oc(t)}await this.Vr(3e5)})}}class LV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(qm.ce);const r=new DV(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Fw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,c,h,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(d=Date.now(),Ru()<=st.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(d-h)+`ms
Total Duration: ${d-m}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function VV(n,e){return new LV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.changes=new Pl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Dh(r.mutation,i,jr.empty(),jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,lt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=lt()){const i=al();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Sh();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=al();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,lt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Qs();const l=Oh(),c=function(){return Oh()}();return t.forEach((h,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof Ea)?o=o.insert(d.key,d):m!==void 0?(l.set(d.key,m.mutation.getFieldMask()),Dh(m.mutation,d,m.mutation.getFieldMask(),jt.now())):l.set(d.key,jr.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((d,m)=>l.set(d,m)),t.forEach((d,m)=>c.set(d,new zV(m,l.get(d)??null))),c))}recalculateAndSaveOverlays(e,t){const r=Oh();let i=new Kt((l,c)=>l-c),o=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let m=r.get(h)||jr.empty();m=c.applyToLocalView(d,m),r.set(h,m);const y=(i.get(c.batchId)||lt()).add(h);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,m=h.value,y=_x();m.forEach(v=>{if(!o.has(v)){const _=Cx(t.get(v),r.get(v));_!==null&&y.set(v,_),o=o.add(v)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,y))}return ae.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return Oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):H4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ae.resolve(al());let c=Qh,h=o;return l.next(d=>ae.forEach(d,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?ae.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,h,d,lt())).next(m=>({batchId:c,changes:Ex(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(r=>{let i=Sh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Sh();return this.indexManager.getCollectionParents(e,o).next(c=>ae.forEach(c,h=>{const d=function(y,v){return new Km(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((y,v)=>{l=l.insert(y,v)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,d)=>{const m=d.getKey();l.get(m)===null&&(l=l.insert(m,er.newInvalidDocument(m)))});let c=Sh();return l.forEach((h,d)=>{const m=o.get(h);m!==void 0&&Dh(m.mutation,d,jr.empty(),jt.now()),Ym(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zi(i.createTime)}}(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:IV(i.bundledQuery),readTime:Zi(i.readTime)}}(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.overlays=new Kt(Oe.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=al();return ae.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=al(),o=t.length+1,l=new Oe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Kt((d,m)=>d-m);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=al(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=al(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return ae.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new oV(t,r));let o=this.qr.get(t);o===void 0&&(o=lt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.sessionToken=Gn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.Qr=new Tn(Nn.$r),this.Ur=new Tn(Nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Nn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Nn(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Oe(new Bt([])),r=new Nn(t,e),i=new Nn(t,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Oe(new Bt([])),r=new Nn(t,e),i=new Nn(t,e+1);let o=lt();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Nn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Oe.comparator(e.key,t.key)||at(e.Yr,t.Yr)}static Kr(e,t){return at(e.Yr,t.Yr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tn(Nn.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new sV(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Nn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ae.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?HE:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nn(t,0),i=new Nn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const c=this.Xr(l.Yr);o.push(c)}),ae.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(at);return t.forEach(i=>{const o=new Nn(i,0),l=new Nn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],c=>{r=r.add(c.Yr)})}),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Oe.isDocumentKey(o)||(o=o.child(""));const l=new Nn(new Oe(o),0);let c=new Tn(at);return this.Zr.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.Yr)),!0)},l),ae.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(t.mutations,i=>{const o=new Nn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Nn(t,0),i=this.Zr.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.ri=e,this.docs=function(){return new Kt(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let r=Qs();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():er.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Qs();const l=t.path,c=new Oe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:m}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||E4(v4(m),r)<=0||(i.has(m.key)||Ym(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ae.resolve(o)}getAllFromCollectionGroup(e,t,r,i){je(9500)}ii(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GV(this)}getSize(e){return ae.resolve(this.size)}}class GV extends UV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.persistence=e,this.si=new Pl(t=>$E(t),GE),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new ZE,this.targetCount=0,this.ai=Wu.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Wu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ae.waitFor(o).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ae.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t){this.ui={},this.overlays={},this.ci=new qm(0),this.li=!1,this.li=!0,this.hi=new FV,this.referenceDelegate=e(this),this.Pi=new KV(this),this.indexManager=new MV,this.remoteDocumentCache=function(i){return new $V(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new kV(t),this.Ii=new jV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new qV(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){we("MemoryPersistence","Starting transaction:",e);const i=new WV(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ae.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class WV extends b4{constructor(e){super(),this.currentSequenceNumber=e}}class e_{constructor(e){this.persistence=e,this.Ri=new ZE,this.Vi=null}static mi(e){return new e_(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,r=>{const i=Oe.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,qe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Fp{constructor(e,t){this.persistence=e,this.pi=new Pl(r=>w4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=VV(this,t)}static mi(e,t){return new Fp(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ae.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ae.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,t).next(c=>{c||(r++,o.removeEntry(l,qe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mp(e.data.value)),t}br(e,t,r){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ae.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=lt(),i=lt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t_(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return HP()?8:T4(nr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new YV;return this.Ss(e,t,l).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ru()<=st.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",xu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Ru()<=st.DEBUG&&we("QueryEngine","Query:",xu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ru()<=st.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",xu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(t))):ae.resolve())}ys(e,t){if(Ow(t))return ae.resolve(null);let r=Ji(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=V0(t,null,"F"),r=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=lt(...o);return this.ps.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.Ds(t,c);return this.Cs(t,d,l,h.readTime)?this.ys(e,V0(t,null,"F")):this.vs(e,d,t,h)}))})))}ws(e,t,r,i){return Ow(t)||i.isEqual(qe.min())?ae.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?ae.resolve(null):(Ru()<=st.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xu(t)),this.vs(e,l,t,y4(i,Qh)).next(c=>c))})}Ds(e,t){let r=new Tn(yx(e));return t.forEach((i,o)=>{Ym(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ru()<=st.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",xu(t)),this.ps.getDocumentsMatchingQuery(e,t,ua.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="LocalStore",XV=3e8;class JV{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Kt(at),this.xs=new Pl(o=>$E(o),GE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function ZV(n,e,t,r){return new JV(n,e,t,r)}async function Bx(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=lt();for(const d of i){l.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(d=>({Ls:d,removedBatchIds:l,addedBatchIds:c}))})})}function e3(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,h,d,m){const y=d.batch,v=y.keys();let _=ae.resolve();return v.forEach(T=>{_=_.next(()=>m.getEntry(h,T)).next(A=>{const C=d.docVersions.get(T);bt(C!==null,48541),A.version.compareTo(C)<0&&(y.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),m.addEntry(A)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=lt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function jx(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function t3(n,e){const t=$e(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach((m,y)=>{const v=i.get(y);if(!v)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y)));let _=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?_=_.withResumeToken(Gn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,r)),i=i.insert(y,_),function(A,C,N){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=XV?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(v,_,m)&&c.push(t.Pi.updateTargetData(o,_))});let h=Qs(),d=lt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(n3(o,l,e.documentUpdates).next(m=>{h=m.ks,d=m.qs})),!r.isEqual(qe.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next(y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return ae.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,d)).next(()=>h)}).then(o=>(t.Ms=i,o))}function n3(n,e,t){let r=lt(),i=lt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Qs();return t.forEach((c,h)=>{const d=o.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(qe.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):we(n_,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{ks:l,qs:i}})}function r3(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=HE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i3(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,ae.resolve(i)):t.Pi.allocateTargetId(r).next(l=>(i=new Wo(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function H0(n,e,t){const r=$e(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!ac(l))throw l;we(n_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Gw(n,e,t){const r=$e(n);let i=qe.min(),o=lt();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,m){const y=$e(h),v=y.xs.get(m);return v!==void 0?ae.resolve(y.Ms.get(v)):y.Pi.getTargetData(d,m)}(r,l,Ji(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:qe.min(),t?o:lt())).next(c=>(s3(r,q4(e),c),{documents:c,Qs:o})))}function s3(n,e,t){let r=n.Os.get(e)||qe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class Kw{constructor(){this.activeTargetIds=Q4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o3{constructor(){this.Mo=new Kw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Kw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="ConnectivityMonitor";class Yw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(Ww,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(Ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd=null;function F0(){return Zd===null?Zd=function(){return 268435456+Math.round(2147483648*Math.random())}():Zd++,"0x"+Zd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="RestConnection",l3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Lp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=F0(),c=this.zo(e,t.toUriEncodedString());we(zv,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:d}=new URL(c),m=ya(d);return this.Jo(e,c,h,r,m).then(y=>(we(zv,`Received RPC '${e}' ${l}: `,y),y),y=>{throw qu(zv,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=l3[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class h3 extends u3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=F0();return new Promise((c,h)=>{const d=new $R;d.setWithCredentials(!0),d.listenOnce(GR.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case pp.NO_ERROR:const y=d.getResponseJson();we(Xn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case pp.TIMEOUT:we(Xn,`RPC '${e}' ${l} timed out`),h(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case pp.HTTP_ERROR:const v=d.getStatus();if(we(Xn,`RPC '${e}' ${l} failed with status:`,v,"response text:",d.getResponseText()),v>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const A=function(N){const H=N.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN}(T.status);h(new Re(A,T.message))}else h(new Re(le.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new Re(le.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{we(Xn,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(i);we(Xn,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",m,r,15)})}T_(e,t,r){const i=F0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=YR(),c=WR(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");we(Xn,`Creating RPC '${e}' stream ${i}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let v=!1,_=!1;const T=new c3({Yo:C=>{_?we(Xn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(we(Xn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),we(Xn,`RPC '${e}' stream ${i} sending:`,C),y.send(C))},Zo:()=>y.close()}),A=(C,N,H)=>{C.listen(N,X=>{try{H(X)}catch(ie){setTimeout(()=>{throw ie},0)}})};return A(y,Th.EventType.OPEN,()=>{_||(we(Xn,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),A(y,Th.EventType.CLOSE,()=>{_||(_=!0,we(Xn,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(y))}),A(y,Th.EventType.ERROR,C=>{_||(_=!0,qu(Xn,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),T.a_(new Re(le.UNAVAILABLE,"The operation could not be completed")))}),A(y,Th.EventType.MESSAGE,C=>{var N;if(!_){const H=C.data[0];bt(!!H,16349);const X=H,ie=(X==null?void 0:X.error)||((N=X[0])==null?void 0:N.error);if(ie){we(Xn,`RPC '${e}' stream ${i} received error:`,ie);const te=ie.status;let ge=function(M){const O=hn[M];if(O!==void 0)return xx(O)}(te),k=ie.message;ge===void 0&&(ge=le.INTERNAL,k="Unknown error status: "+te+" with message "+ie.message),_=!0,T.a_(new Re(ge,k)),y.close()}else we(Xn,`RPC '${e}' stream ${i} received:`,H),T.u_(H)}}),A(c,KR.STAT_EVENT,C=>{C.stat===M0.PROXY?we(Xn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===M0.NOPROXY&&we(Xn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Bv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n){return new mV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="PersistentStream";class Fx{constructor(e,t,r,i,o,l,c,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new Re(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return we(Qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(we(Qw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f3 extends Fx{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vV(this.serializer,e),r=function(o){if(!("targetChange"in o))return qe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?qe.min():l.readTime?Zi(l.readTime):qe.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=j0(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=L0(h)?{documents:bV(o,h)}:{query:TV(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Mx(o,l.resumeToken);const d=U0(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(qe.min())>0){c.readTime=Hp(o,l.snapshotVersion.toTimestamp());const d=U0(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=wV(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=j0(this.serializer),t.removeTarget=e,this.q_(t)}}class d3 extends Fx{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_V(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=j0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>EV(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{}class m3 extends p3{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,z0(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(le.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(e,z0(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(le.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class g3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="RemoteStore";class y3{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Ll(this)&&(we(wl,"Restarting streams for network reachability change."),await async function(h){const d=$e(h);d.Ea.add(4),await wf(d),d.Ra.set("Unknown"),d.Ea.delete(4),await eg(d)}(this))})}),this.Ra=new g3(r,i)}}async function eg(n){if(Ll(n))for(const e of n.da)await e(!0)}async function wf(n){for(const e of n.da)await e(!1)}function qx(n,e){const t=$e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),o_(t)?s_(t):lc(t).O_()&&i_(t,e))}function r_(n,e){const t=$e(n),r=lc(t);t.Ia.delete(e),r.O_()&&$x(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ll(t)&&t.Ra.set("Unknown"))}function i_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lc(n).Y_(e)}function $x(n,e){n.Va.Ue(e),lc(n).Z_(e)}function s_(n){n.Va=new hV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),lc(n).start(),n.Ra.ua()}function o_(n){return Ll(n)&&!lc(n).x_()&&n.Ia.size>0}function Ll(n){return $e(n).Ea.size===0}function Gx(n){n.Va=void 0}async function v3(n){n.Ra.set("Online")}async function E3(n){n.Ia.forEach((e,t)=>{i_(n,e)})}async function _3(n,e){Gx(n),o_(n)?(n.Ra.ha(e),s_(n)):n.Ra.set("Unknown")}async function b3(n,e,t){if(n.Ra.set("Online"),e instanceof Ix&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))}(n,e)}catch(r){we(wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qp(n,r)}else if(e instanceof vp?n.Va.Ze(e):e instanceof kx?n.Va.st(e):n.Va.tt(e),!t.isEqual(qe.min()))try{const r=await jx(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(d);m&&o.Ia.set(d,m.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,d)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Gn.EMPTY_BYTE_STRING,m.snapshotVersion)),$x(o,h);const y=new Wo(m.target,h,d,m.sequenceNumber);i_(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){we(wl,"Failed to raise snapshot:",r),await qp(n,r)}}async function qp(n,e,t){if(!ac(e))throw e;n.Ea.add(1),await wf(n),n.Ra.set("Offline"),t||(t=()=>jx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{we(wl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await eg(n)})}function Kx(n,e){return e().catch(t=>qp(n,t,e))}async function tg(n){const e=$e(n),t=da(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:HE;for(;T3(e);)try{const i=await r3(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,S3(e,i)}catch(i){await qp(e,i)}Wx(e)&&Yx(e)}function T3(n){return Ll(n)&&n.Ta.length<10}function S3(n,e){n.Ta.push(e);const t=da(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Wx(n){return Ll(n)&&!da(n).x_()&&n.Ta.length>0}function Yx(n){da(n).start()}async function w3(n){da(n).ra()}async function A3(n){const e=da(n);for(const t of n.Ta)e.ea(t.mutations)}async function C3(n,e,t){const r=n.Ta.shift(),i=QE.from(r,e,t);await Kx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await tg(n)}async function R3(n,e){e&&da(n).X_&&await async function(r,i){if(function(l){return lV(l)&&l!==le.ABORTED}(i.code)){const o=r.Ta.shift();da(r).B_(),await Kx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await tg(r)}}(n,e),Wx(n)&&Yx(n)}async function Xw(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),we(wl,"RemoteStore received new credentials");const r=Ll(t);t.Ea.add(3),await wf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await eg(t)}async function x3(n,e){const t=$e(n);e?(t.Ea.delete(2),await eg(t)):e||(t.Ea.add(2),await wf(t),t.Ra.set("Unknown"))}function lc(n){return n.ma||(n.ma=function(t,r,i){const o=$e(t);return o.sa(),new f3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:v3.bind(null,n),t_:E3.bind(null,n),r_:_3.bind(null,n),H_:b3.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),o_(n)?s_(n):n.Ra.set("Unknown")):(await n.ma.stop(),Gx(n))})),n.ma}function da(n){return n.fa||(n.fa=function(t,r,i){const o=$e(t);return o.sa(),new d3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:w3.bind(null,n),r_:R3.bind(null,n),ta:A3.bind(null,n),na:C3.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await tg(n)):(await n.fa.stop(),n.Ta.length>0&&(we(wl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new a_(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l_(n,e){if(Ws("AsyncQueue",`${e}: ${n}`),ac(n))return new Re(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{static emptySet(e){return new Vu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Oe.comparator(t.key,r.key):(t,r)=>Oe.comparator(t.key,r.key),this.keyedMap=Sh(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.ga=new Kt(Oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yu{constructor(e,t,r,i,o,l,c,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new Yu(e,t,Vu.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class I3{constructor(){this.queries=Zw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=$e(t),o=i.queries;i.queries=Zw(),o.forEach((l,c)=>{for(const h of c.Sa)h.onError(r)})})(this,new Re(le.ABORTED,"Firestore shutting down"))}}function Zw(){return new Pl(n=>gx(n),Wm)}async function Qx(n,e){const t=$e(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new k3,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=l_(l,`Initialization of query '${xu(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&u_(t)}async function Xx(n,e){const t=$e(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function M3(n,e){const t=$e(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&u_(t)}function N3(n,e,t){const r=$e(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function u_(n){n.Ca.forEach(e=>{e.next()})}var q0,eA;(eA=q0||(q0={})).Ma="default",eA.Cache="cache";class Jx{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==q0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.key=e}}class ek{constructor(e){this.key=e}}class O3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=yx(e),this.tu=new Vu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Jw,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const v=i.get(m),_=Ym(this.query,y)?y:null,T=!!v&&this.mutatedKeys.has(v.key),A=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;v&&_?v.data.isEqual(_.data)?T!==A&&(r.track({type:3,doc:_}),C=!0):this.su(v,_)||(r.track({type:2,doc:_}),C=!0,(h&&this.eu(_,h)>0||d&&this.eu(_,d)<0)&&(c=!0)):!v&&_?(r.track({type:0,doc:_}),C=!0):v&&!_&&(r.track({type:1,doc:v}),C=!0,(h||d)&&(c=!0)),C&&(_?(l=l.add(_),o=A?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((m,y)=>function(_,T){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:C})}};return A(_)-A(T)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,d=h!==this.Za;return this.Za=h,l.length!==0||d?{snapshot:new Yu(this.query,e.tu,o,l,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new ek(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Zx(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=lt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const c_="SyncEngine";class D3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P3{constructor(e){this.key=e,this.hu=!1}}class L3{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Pl(c=>gx(c),Wm),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(Oe.comparator),this.Au=new Map,this.Ru=new ZE,this.Vu={},this.mu=new Map,this.fu=Wu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V3(n,e,t=!0){const r=ok(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await tk(r,e,t,!0),i}async function U3(n,e){const t=ok(n);await tk(t,e,!0,!1)}async function tk(n,e,t,r){const i=await i3(n.localStore,Ji(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await z3(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&qx(n.remoteStore,i),c}async function z3(n,e,t,r,i){n.pu=(y,v,_)=>async function(A,C,N,H){let X=C.view.ru(N);X.Cs&&(X=await Gw(A.localStore,C.query,!1).then(({documents:k})=>C.view.ru(k,X)));const ie=H&&H.targetChanges.get(C.targetId),te=H&&H.targetMismatches.get(C.targetId)!=null,ge=C.view.applyChanges(X,A.isPrimaryClient,ie,te);return nA(A,C.targetId,ge.au),ge.snapshot}(n,y,v,_);const o=await Gw(n.localStore,e,!0),l=new O3(e,o.Qs),c=l.ru(o.documents),h=Sf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=l.applyChanges(c,n.isPrimaryClient,h);nA(n,t,d.au);const m=new D3(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function B3(n,e,t){const r=$e(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!Wm(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await H0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&r_(r.remoteStore,i.targetId),$0(r,i.targetId)}).catch(oc)):($0(r,i.targetId),await H0(r.localStore,i.targetId,!0))}async function j3(n,e){const t=$e(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),r_(t.remoteStore,r.targetId))}async function H3(n,e,t){const r=Y3(n);try{const i=await function(l,c){const h=$e(l),d=jt.now(),m=c.reduce((_,T)=>_.add(T.key),lt());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",_=>{let T=Qs(),A=lt();return h.Ns.getEntries(_,m).next(C=>{T=C,T.forEach((N,H)=>{H.isValidDocument()||(A=A.add(N))})}).next(()=>h.localDocuments.getOverlayedDocuments(_,T)).next(C=>{y=C;const N=[];for(const H of c){const X=rV(H,y.get(H.key).overlayedDocument);X!=null&&N.push(new Ea(H.key,X,ux(X.value.mapValue),Ai.exists(!0)))}return h.mutationQueue.addMutationBatch(_,d,N,c)}).next(C=>{v=C;const N=C.applyToLocalDocumentSet(y,A);return h.documentOverlayCache.saveOverlays(_,C.batchId,N)})}).then(()=>({batchId:v.batchId,changes:Ex(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let d=l.Vu[l.currentUser.toKey()];d||(d=new Kt(at)),d=d.insert(c,h),l.Vu[l.currentUser.toKey()]=d}(r,i.batchId,t),await Af(r,i.changes),await tg(r.remoteStore)}catch(i){const o=l_(i,"Failed to persist write");t.reject(o)}}async function nk(n,e){const t=$e(n);try{const r=await t3(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Au.get(o);l&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?bt(l.hu,14607):i.removedDocuments.size>0&&(bt(l.hu,42227),l.hu=!1))}),await Af(t,r,e)}catch(r){await oc(r)}}function tA(n,e,t){const r=$e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=$e(l);h.onlineState=c;let d=!1;h.queries.forEach((m,y)=>{for(const v of y.Sa)v.va(c)&&(d=!0)}),d&&u_(h)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F3(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new Kt(Oe.comparator);l=l.insert(o,er.newNoDocument(o,qe.min()));const c=lt().add(o),h=new Jm(qe.min(),new Map,new Kt(at),l,c);await nk(r,h),r.du=r.du.remove(o),r.Au.delete(e),h_(r)}else await H0(r.localStore,e,!1).then(()=>$0(r,e,t)).catch(oc)}async function q3(n,e){const t=$e(n),r=e.batch.batchId;try{const i=await e3(t.localStore,e);ik(t,r,null),rk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Af(t,i)}catch(i){await oc(i)}}async function $3(n,e,t){const r=$e(n);try{const i=await function(l,c){const h=$e(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return h.mutationQueue.lookupMutationBatch(d,c).next(y=>(bt(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(d,y))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>h.localDocuments.getDocuments(d,m))})}(r.localStore,e);ik(r,e,t),rk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Af(r,i)}catch(i){await oc(i)}}function rk(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function ik(n,e,t){const r=$e(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function $0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||sk(n,r)})}function sk(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(r_(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),h_(n))}function nA(n,e,t){for(const r of t)r instanceof Zx?(n.Ru.addReference(r.key,e),G3(n,r)):r instanceof ek?(we(c_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||sk(n,r.key)):je(19791,{wu:r})}function G3(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(we(c_,"New document in limbo: "+t),n.Eu.add(r),h_(n))}function h_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Oe(Bt.fromString(e)),r=n.fu.next();n.Au.set(r,new P3(t)),n.du=n.du.insert(t,r),qx(n.remoteStore,new Wo(Ji(KE(t.path)),r,"TargetPurposeLimboResolution",qm.ce))}}async function Af(n,e,t){const r=$e(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((c,h)=>{l.push(r.pu(h,e,t).then(d=>{var m;if((d||t)&&r.isPrimaryClient){const y=d?!d.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(d){i.push(d);const y=t_.As(h.targetId,d);o.push(y)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(h,d){const m=$e(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ae.forEach(d,v=>ae.forEach(v.Es,_=>m.persistence.referenceDelegate.addReference(y,v.targetId,_)).next(()=>ae.forEach(v.ds,_=>m.persistence.referenceDelegate.removeReference(y,v.targetId,_)))))}catch(y){if(!ac(y))throw y;we(n_,"Failed to update sequence numbers: "+y)}for(const y of d){const v=y.targetId;if(!y.fromCache){const _=m.Ms.get(v),T=_.snapshotVersion,A=_.withLastLimboFreeSnapshotVersion(T);m.Ms=m.Ms.insert(v,A)}}}(r.localStore,o))}async function K3(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){we(c_,"User change. New user:",e.toKey());const r=await Bx(t.localStore,e);t.currentUser=e,function(o,l){o.mu.forEach(c=>{c.forEach(h=>{h.reject(new Re(le.CANCELLED,l))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Af(t,r.Ls)}}function W3(n,e){const t=$e(n),r=t.Au.get(e);if(r&&r.hu)return lt().add(r.key);{let i=lt();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function ok(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F3.bind(null,e),e.Pu.H_=M3.bind(null,e.eventManager),e.Pu.yu=N3.bind(null,e.eventManager),e}function Y3(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$3.bind(null,e),e}class $p{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ZV(this.persistence,new QV,e.initialUser,this.serializer)}Cu(e){return new zx(e_.mi,this.serializer)}Du(e){return new o3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$p.provider={build:()=>new $p};class Q3 extends $p{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){bt(this.persistence.referenceDelegate instanceof Fp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PV(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new zx(r=>Fp.mi(r,t),this.serializer)}}class G0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=K3.bind(null,this.syncEngine),await x3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I3}()}createDatastore(e){const t=Zm(e.databaseInfo.databaseId),r=function(o){return new h3(o)}(e.databaseInfo);return function(o,l,c,h){return new m3(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new y3(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>tA(this.syncEngine,t,0),function(){return Yw.v()?new Yw:new a3}())}createSyncEngine(e,t){return function(i,o,l,c,h,d,m){const y=new L3(i,o,l,c,h,d);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=$e(i);we(wl,"RemoteStore shutting down."),o.Ea.add(5),await wf(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}G0.provider={build:()=>new G0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="FirestoreClient";class X3{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zn.UNAUTHENTICATED,this.clientId=BE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{we(pa,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(we(pa,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=l_(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jv(n,e){n.asyncQueue.verifyOperationInProgress(),we(pa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Bx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function rA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await J3(n);we(pa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Xw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Xw(e.remoteStore,i)),n._onlineComponents=e}async function J3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(pa,"Using user provided OfflineComponentProvider");try{await jv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qu("Error using user provided cache. Falling back to memory cache: "+t),await jv(n,new $p)}}else we(pa,"Using default OfflineComponentProvider"),await jv(n,new Q3(void 0));return n._offlineComponents}async function lk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(pa,"Using user provided OnlineComponentProvider"),await rA(n,n._uninitializedComponentsProvider._online)):(we(pa,"Using default OnlineComponentProvider"),await rA(n,new G0))),n._onlineComponents}function Z3(n){return lk(n).then(e=>e.syncEngine)}async function uk(n){const e=await lk(n),t=e.eventManager;return t.onListen=V3.bind(null,e.syncEngine),t.onUnlisten=B3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j3.bind(null,e.syncEngine),t}function eU(n,e,t={}){const r=new qs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,d){const m=new ak({next:v=>{m.Nu(),l.enqueueAndForget(()=>Xx(o,y));const _=v.docs.has(c);!_&&v.fromCache?d.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&h&&h.source==="server"?d.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new Jx(KE(c.path),m,{includeMetadataChanges:!0,qa:!0});return Qx(o,y)}(await uk(n),n.asyncQueue,e,t,r)),r.promise}function tU(n,e,t={}){const r=new qs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,d){const m=new ak({next:v=>{m.Nu(),l.enqueueAndForget(()=>Xx(o,y)),v.fromCache&&h.source==="server"?d.reject(new Re(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new Jx(c,m,{includeMetadataChanges:!0,qa:!0});return Qx(o,y)}(await uk(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="firestore.googleapis.com",sA=!0;class oA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hk,this.ssl=sA}else this.host=e.host,this.ssl=e.ssl??sA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ux;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OV)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ck(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ng{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o4;switch(r.type){case"firstParty":return new c4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=iA.get(t);r&&(we("ComponentProvider","Removing Datastore"),iA.delete(t),r.terminate())}(this),Promise.resolve()}}function nU(n,e,t,r={}){var d;n=Ys(n,ng);const i=ya(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(DE(`https://${c}`),PE("Firestore",!0)),o.host!==hk&&o.host!==c&&qu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:i,emulatorOptions:r};if(!bl(h,l)&&(n._setSettings(h),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=Zn.MOCK_USER;else{m=UR(r.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Zn(v)}n._authCredentials=new a4(new XR(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rg(this.firestore,e,this._query)}}class bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ta(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}toJSON(){return{type:bn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bf(t,bn._jsonSchema))return new bn(e,r||null,new Oe(Bt.fromString(t.referencePath)))}}bn._jsonSchemaVersion="firestore/documentReference/1.0",bn._jsonSchema={type:dn("string",bn._jsonSchemaVersion),referencePath:dn("string")};class ta extends rg{constructor(e,t,r){super(e,t,KE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Oe(e))}withConverter(e){return new ta(this.firestore,e,this._path)}}function ig(n,e,...t){if(n=Sn(n),JR("collection","path",e),n instanceof ng){const r=Bt.fromString(e,...t);return _w(r),new ta(n,null,r)}{if(!(n instanceof bn||n instanceof ta))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return _w(r),new ta(n.firestore,null,r)}}function Al(n,e,...t){if(n=Sn(n),arguments.length===1&&(e=BE.newId()),JR("doc","path",e),n instanceof ng){const r=Bt.fromString(e,...t);return Ew(r),new bn(n,null,new Oe(r))}{if(!(n instanceof bn||n instanceof ta))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return Ew(r),new bn(n.firestore,n instanceof ta?n.converter:null,new Oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="AsyncQueue";class lA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hx(this,"async_queue_retry"),this._c=()=>{const r=Bv();r&&we(aA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Bv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new qs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ac(e))throw e;we(aA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",uA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=a_.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&je(47125,{Pc:uA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function uA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class uc extends ng{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lA(e),this._firestoreClient=void 0,await e}}}function rU(n,e){const t=typeof n=="object"?n:UE(),r=typeof n=="string"?n:Lp,i=Fm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=PR("firestore");o&&nU(i,...o)}return i}function f_(n){if(n._terminated)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iU(n),n._firestoreClient}function iU(n){var r,i,o;const e=n._freezeSettings(),t=function(c,h,d,m){return new R4(c,h,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ck(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new X3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ci(Gn.fromBase64String(e))}catch(t){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ci(Gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ci._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bf(e,ci._jsonSchema))return ci.fromBase64String(e.bytes)}}ci._jsonSchemaVersion="firestore/bytes/1.0",ci._jsonSchema={type:dn("string",ci._jsonSchemaVersion),bytes:dn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(bf(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:dn("string",es._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bf(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ts(e.vectorValues);throw new Re(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:dn("string",ts._jsonSchemaVersion),vectorValues:dn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=/^__.*__$/;class oU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ea(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tf(e,this.data,t,this.fieldTransforms)}}class fk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ea(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:n})}}class p_{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new p_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dk(this.Ac)&&sU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zm(e)}Cc(e,t,r,i=!1){return new p_({Ac:e,methodName:t,Dc:r,path:$n.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pk(n){const e=n._freezeSettings(),t=Zm(n._databaseId);return new aU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lU(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);m_("Data must be an object, but it was:",l,r);const c=mk(r,l);let h,d;if(o.merge)h=new jr(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const v=K0(e,y,t);if(!l.contains(v))throw new Re(le.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);yk(m,v)||m.push(v)}h=new jr(m),d=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,d=l.fieldTransforms;return new oU(new Tr(c),h,d)}class og extends d_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof og}}function uU(n,e,t,r){const i=n.Cc(1,e,t);m_("Data must be an object, but it was:",i,r);const o=[],l=Tr.empty();va(r,(h,d)=>{const m=g_(e,h,t);d=Sn(d);const y=i.yc(m);if(d instanceof og)o.push(m);else{const v=ag(d,y);v!=null&&(o.push(m),l.set(m,v))}});const c=new jr(o);return new fk(l,c,i.fieldTransforms)}function cU(n,e,t,r,i,o){const l=n.Cc(1,e,t),c=[K0(e,r,t)],h=[i];if(o.length%2!=0)throw new Re(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)c.push(K0(e,o[v])),h.push(o[v+1]);const d=[],m=Tr.empty();for(let v=c.length-1;v>=0;--v)if(!yk(d,c[v])){const _=c[v];let T=h[v];T=Sn(T);const A=l.yc(_);if(T instanceof og)d.push(_);else{const C=ag(T,A);C!=null&&(d.push(_),m.set(_,C))}}const y=new jr(d);return new fk(m,y,l.fieldTransforms)}function ag(n,e){if(gk(n=Sn(n)))return m_("Unsupported field value:",e,n),mk(n,e);if(n instanceof d_)return function(r,i){if(!dk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=ag(c,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return X4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=jt.fromDate(r);return{timestampValue:Hp(i.serializer,o)}}if(r instanceof jt){const o=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hp(i.serializer,o)}}if(r instanceof es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ci)return{bytesValue:Mx(i.serializer,r._byteString)};if(r instanceof bn){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ts)return function(l,c){return{mapValue:{fields:{[ax]:{stringValue:lx},[Vp]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return WE(c.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${jE(r)}`)}(n,e)}function mk(n,e){const t={};return tx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(n,(r,i)=>{const o=ag(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function gk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jt||n instanceof es||n instanceof ci||n instanceof bn||n instanceof d_||n instanceof ts)}function m_(n,e,t){if(!gk(t)||!ZR(t)){const r=jE(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function K0(n,e,t){if((e=Sn(e))instanceof sg)return e._internalPath;if(typeof e=="string")return g_(n,e);throw Gp("Field path arguments must be of type string or ",n,!1,void 0,t)}const hU=new RegExp("[~\\*/\\[\\]]");function g_(n,e,t){if(e.search(hU)>=0)throw Gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sg(...e.split("."))._internalPath}catch{throw Gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gp(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new Re(le.INVALID_ARGUMENT,c+n+h)}function yk(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ek("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fU extends vk{data(){return super.data()}}function Ek(n,e){return typeof e=="string"?g_(n,e):e instanceof sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pU{convertValue(e,t="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return va(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[Vp].arrayValue)==null?void 0:i.values)==null?void 0:o.map(l=>on(l.doubleValue));return new ts(t)}convertGeoPoint(e){return new es(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xh(e));default:return null}}convertTimestamp(e){const t=ca(e);return new jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Bt.fromString(e);bt(Vx(r),9688,{name:e});const i=new Jh(r.get(1),r.get(3)),o=new Oe(r.popFirst(5));return i.isEqual(t)||Ws(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Ah{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fl extends vk{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ek("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=fl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}fl._jsonSchemaVersion="firestore/documentSnapshot/1.0",fl._jsonSchema={type:dn("string",fl._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};class Ep extends fl{data(e={}){return super.data(e)}}class Uu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ah(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ep(this._firestore,this._userDataWriter,r.key,r,new Ah(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Ep(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ah(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Ep(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ah(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:gU(c.type),doc:h,oldIndex:d,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=BE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n){n=Ys(n,bn);const e=Ys(n.firestore,uc);return eU(f_(e),n._key).then(t=>yU(e,n,t))}Uu._jsonSchemaVersion="firestore/querySnapshot/1.0",Uu._jsonSchema={type:dn("string",Uu._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};class bk extends pU{constructor(e){super(),this.firestore=e}convertBytes(e){return new ci(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}function Tk(n){n=Ys(n,rg);const e=Ys(n.firestore,uc),t=f_(e),r=new bk(e);return dU(n._query),tU(t,n._query).then(i=>new Uu(e,r,n,i))}function Sk(n,e,t,...r){n=Ys(n,bn);const i=Ys(n.firestore,uc),o=pk(i);let l;return l=typeof(e=Sn(e))=="string"||e instanceof sg?cU(o,"updateDoc",n._key,e,t,r):uU(o,"updateDoc",n._key,e),y_(i,[l.toMutation(n._key,Ai.exists(!0))])}function wk(n){return y_(Ys(n.firestore,uc),[new YE(n._key,Ai.none())])}function Ak(n,e){const t=Ys(n.firestore,uc),r=Al(n),i=mU(n.converter,e);return y_(t,[lU(pk(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ai.exists(!1))]).then(()=>r)}function y_(n,e){return function(r,i){const o=new qs;return r.asyncQueue.enqueueAndForget(async()=>H3(await Z3(r),i,o)),o.promise}(f_(n),e)}function yU(n,e,t){const r=t.docs.get(e._key),i=new bk(n);return new fl(n,i,e._key,r,new Ah(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){sc=i})(Dl),Tl(new la("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new uc(new l4(r.getProvider("auth-internal")),new h4(l,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jh(d.options.projectId,m)}(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Xi(mw,gw,e),Xi(mw,gw,"esm2020")})();var vU="firebase",EU="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi(vU,EU,"app");function Ck(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _U=Ck,Rk=new Ef("auth","Firebase",Ck());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=new LE("@firebase/auth");function bU(n,...e){Kp.logLevel<=st.WARN&&Kp.warn(`Auth (${Dl}): ${n}`,...e)}function _p(n,...e){Kp.logLevel<=st.ERROR&&Kp.error(`Auth (${Dl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(n,...e){throw v_(n,...e)}function ns(n,...e){return v_(n,...e)}function xk(n,e,t){const r={..._U(),[e]:t};return new Ef("auth","Firebase",r).create(e,{appName:n.name})}function na(n){return xk(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Rk.create(n,...e)}function Be(n,e,...t){if(!n)throw v_(e,...t)}function Bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _p(e),new Error(e)}function Xs(n,e){n||Bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function TU(){return cA()==="http:"||cA()==="https:"}function cA(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TU()||zP()||"connection"in navigator)?navigator.onLine:!0}function wU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xs(t>e,"Short delay should be less than long delay!"),this.isMobile=LP()||BP()}get(){return SU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e){Xs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RU=new Cf(3e4,6e4);function Vl(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function _a(n,e,t,r,i={}){return Ik(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=_f({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:h,...o};return UP()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&ya(n.emulatorConfig.host)&&(d.credentials="include"),kk.fetch()(await Mk(n,n.config.apiHost,t,c),d)})}async function Ik(n,e,t){n._canInitEmulator=!1;const r={...AU,...e};try{const i=new kU(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ep(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ep(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw ep(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw ep(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw xk(n,m,d);Ri(n,m)}}catch(i){if(i instanceof cs)throw i;Ri(n,"network-request-failed",{message:String(i)})}}async function lg(n,e,t,r,i={}){const o=await _a(n,e,t,r,i);return"mfaPendingCredential"in o&&Ri(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Mk(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?E_(n.config,i):`${n.config.apiScheme}://${i}`;return CU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function xU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),RU.get())})}}function ep(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ns(n,e,r);return i.customData._tokenResponse=t,i}function hA(n){return n!==void 0&&n.enterprise!==void 0}class IU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MU(n,e){return _a(n,"GET","/v2/recaptchaConfig",Vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,e){return _a(n,"POST","/v1/accounts:delete",e)}async function Wp(n,e){return _a(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OU(n,e=!1){const t=Sn(n),r=await t.getIdToken(e),i=__(r);Be(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ph(Hv(i.auth_time)),issuedAtTime:Ph(Hv(i.iat)),expirationTime:Ph(Hv(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Hv(n){return Number(n)*1e3}function __(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _p("JWT malformed, contained fewer than 3 sections"),null;try{const i=OR(t);return i?JSON.parse(i):(_p("Failed to decode base64 JWT payload"),null)}catch(i){return _p("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fA(n){const e=__(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof cs&&DU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function DU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ph(this.lastLoginAt),this.creationTime=Ph(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(n){var y;const e=n.auth,t=await n.getIdToken(),r=await nf(n,Wp(e,{idToken:t}));Be(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(y=i.providerUserInfo)!=null&&y.length?Nk(i.providerUserInfo):[],l=VU(n.providerData,o),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Y0(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function LU(n){const e=Sn(n);await Yp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Nk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(n,e){const t=await Ik(n,{},async()=>{const r=_f({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await Mk(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&ya(n.emulatorConfig.host)&&(h.credentials="include"),kk.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zU(n,e){return _a(n,"POST","/v2/accounts:revokeToken",Vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=fA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await UU(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new zu;return r&&(Be(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Be(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Be(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zu,this.toJSON())}_performRefresh(){return Bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Si{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new PU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Y0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await nf(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OU(this,e)}reload(){return LU(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Yp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ui(this.auth.app))return Promise.reject(na(this.auth));const e=await this.getIdToken();return await nf(this,NU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:_,providerData:T,stsTokenManager:A}=t;Be(y&&A,e,"internal-error");const C=zu.fromJSON(this.name,A);Be(typeof y=="string",e,"internal-error"),No(r,e.name),No(i,e.name),Be(typeof v=="boolean",e,"internal-error"),Be(typeof _=="boolean",e,"internal-error"),No(o,e.name),No(l,e.name),No(c,e.name),No(h,e.name),No(d,e.name),No(m,e.name);const N=new Si({uid:y,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:_,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:C,createdAt:d,lastLoginAt:m});return T&&Array.isArray(T)&&(N.providerData=T.map(H=>({...H}))),h&&(N._redirectEventId=h),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new zu;i.updateFromServerResponse(t);const o=new Si({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yp(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Be(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Nk(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new zu;c.updateFromIdToken(r);const h=new Si({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Y0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Map;function js(n){Xs(n instanceof Function,"Expected a class definition");let e=dA.get(n);return e?(Xs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dA.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ok.type="NONE";const pA=Ok;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(n,e,t){return`firebase:${n}:${e}:${t}`}class Bu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=bp(this.userKey,i.apiKey,o),this.fullPersistenceKey=bp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wp(this.auth,{idToken:e}).catch(()=>{});return t?Si._fromGetAccountInfoResponse(this.auth,t,e):null}return Si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Bu(js(pA),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||js(pA);const l=bp(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const m=await d._get(l);if(m){let y;if(typeof m=="string"){const v=await Wp(e,{idToken:m}).catch(()=>{});if(!v)break;y=await Si._fromGetAccountInfoResponse(e,v,m)}else y=Si._fromJSON(e,m);d!==o&&(c=y),o=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Bu(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Bu(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zk(e))return"Blackberry";if(Bk(e))return"Webos";if(Pk(e))return"Safari";if((e.includes("chrome/")||Lk(e))&&!e.includes("edge/"))return"Chrome";if(Uk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Dk(n=nr()){return/firefox\//i.test(n)}function Pk(n=nr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lk(n=nr()){return/crios\//i.test(n)}function Vk(n=nr()){return/iemobile/i.test(n)}function Uk(n=nr()){return/android/i.test(n)}function zk(n=nr()){return/blackberry/i.test(n)}function Bk(n=nr()){return/webos/i.test(n)}function b_(n=nr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BU(n=nr()){var e;return b_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function jU(){return jP()&&document.documentMode===10}function jk(n=nr()){return b_(n)||Uk(n)||Bk(n)||zk(n)||/windows phone/i.test(n)||Vk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n,e=[]){let t;switch(n){case"Browser":t=mA(nr());break;case"Worker":t=`${mA(nr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(n,e={}){return _a(n,"GET","/v2/passwordPolicy",Vl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=6;class $U{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??qU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gA(this),this.idTokenSubscription=new gA(this),this.beforeStateQueue=new HU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=js(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Bu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wp(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ui(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yp(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ui(this.app))return Promise.reject(na(this));const t=e?Sn(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ui(this.app)?Promise.reject(na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ui(this.app)?Promise.reject(na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FU(this),t=new $U(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ef("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&js(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await Bu.create(this,[js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&bU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cc(n){return Sn(n)}class gA{constructor(e){this.auth=e,this.observer=null,this.addObserver=YP(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KU(n){ug=n}function Fk(n){return ug.loadJS(n)}function WU(){return ug.recaptchaEnterpriseScript}function YU(){return ug.gapiScript}function QU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class XU{constructor(){this.enterprise=new JU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class JU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ZU="recaptcha-enterprise",qk="NO_RECAPTCHA";class e6{constructor(e){this.type=ZU,this.auth=cc(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{MU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new IU(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;hA(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(qk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&hA(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=WU();h.length!==0&&(h+=c),Fk(h).then(()=>{i(c,o,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function yA(n,e,t,r=!1,i=!1){const o=new e6(n);let l;if(i)l=qk;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vA(n,e,t,r,i){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await yA(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await yA(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(n,e){const t=Fm(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(bl(o,e??{}))return i;Ri(i,"already-initialized")}return t.initialize({options:e})}function n6(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(js);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function r6(n,e,t){const r=cc(n);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=$k(e),{host:l,port:c}=i6(e),h=c===null?"":`:${c}`,d={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(bl(d,r.config.emulator)&&bl(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ya(l)?(DE(`${o}//${l}${h}`),PE("Auth",!0)):s6()}function $k(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function i6(n){const e=$k(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:EA(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:EA(l)}}}function EA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function s6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function o6(n,e){return _a(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(n,e){return lg(n,"POST","/v1/accounts:signInWithPassword",Vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(n,e){return lg(n,"POST","/v1/accounts:signInWithEmailLink",Vl(n,e))}async function u6(n,e){return lg(n,"POST","/v1/accounts:signInWithEmailLink",Vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends T_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new rf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new rf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vA(e,t,"signInWithPassword",a6);case"emailLink":return l6(e,{email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vA(e,r,"signUpPassword",o6);case"emailLink":return u6(e,{idToken:t,email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(n,e){return lg(n,"POST","/v1/accounts:signInWithIdp",Vl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="http://localhost";class Cl extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new Cl(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ju(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ju(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ju(e,t)}buildRequest(){const e={requestUri:c6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_f(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f6(n){const e=_h(bh(n)).link,t=e?_h(bh(e)).deep_link_id:null,r=_h(bh(n)).deep_link_id;return(r?_h(bh(r)).link:null)||r||t||e||n}class S_{constructor(e){const t=_h(bh(e)),r=t.apiKey??null,i=t.oobCode??null,o=h6(t.mode??null);Be(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=f6(e);try{return new S_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.providerId=hc.PROVIDER_ID}static credential(e,t){return rf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=S_.parseLink(t);return Be(r,"argument-error"),rf._fromEmailAndCode(e,r.code,r.tenantId)}}hc.PROVIDER_ID="password";hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends Gk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Rf{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Rf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cl._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return jo.credential(t,r)}catch{return null}}}jo.GOOGLE_SIGN_IN_METHOD="google.com";jo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Rf{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.GITHUB_SIGN_IN_METHOD="github.com";Ho.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Rf{constructor(){super("twitter.com")}static credential(e,t){return Cl._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fo.credential(t,r)}catch{return null}}}Fo.TWITTER_SIGN_IN_METHOD="twitter.com";Fo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Si._fromIdTokenResponse(e,r,i),l=_A(r);return new Qu({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=_A(r);return new Qu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function _A(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends cs{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Qp(e,t,r,i)}}function Kk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qp._fromErrorAndOperation(n,o,e,r):o})}async function d6(n,e,t=!1){const r=await nf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Qu._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(n,e,t=!1){const{auth:r}=n;if(ui(r.app))return Promise.reject(na(r));const i="reauthenticate";try{const o=await nf(n,Kk(r,i,e,n),t);Be(o.idToken,r,"internal-error");const l=__(o.idToken);Be(l,r,"internal-error");const{sub:c}=l;return Be(n.uid===c,r,"user-mismatch"),Qu._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ri(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(n,e,t=!1){if(ui(n.app))return Promise.reject(na(n));const r="signIn",i=await Kk(n,r,e),o=await Qu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function m6(n,e){return Wk(cc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(n){const e=cc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function y6(n,e,t){return ui(n.app)?Promise.reject(na(n)):m6(Sn(n),hc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&g6(n),r})}function v6(n,e,t,r){return Sn(n).onIdTokenChanged(e,t,r)}function E6(n,e,t){return Sn(n).beforeAuthStateChanged(e,t)}const Xp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xp,"1"),this.storage.removeItem(Xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=1e3,b6=10;class Qk extends Yk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);jU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,b6):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},_6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qk.type="LOCAL";const T6=Qk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk extends Yk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xk.type="SESSION";const Jk=Xk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new cg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async d=>d(t.origin,o)),h=await S6(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const d=w_("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function A6(n){rs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function C6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R6(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function x6(){return Zk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebaseLocalStorageDb",k6=1,Jp="firebaseLocalStorage",tI="fbase_key";class xf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hg(n,e){return n.transaction([Jp],e?"readwrite":"readonly").objectStore(Jp)}function I6(){const n=indexedDB.deleteDatabase(eI);return new xf(n).toPromise()}function Q0(){const n=indexedDB.open(eI,k6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Jp,{keyPath:tI})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Jp)?e(r):(r.close(),await I6(),e(await Q0()))})})}async function bA(n,e,t){const r=hg(n,!0).put({[tI]:e,value:t});return new xf(r).toPromise()}async function M6(n,e){const t=hg(n,!1).get(e),r=await new xf(t).toPromise();return r===void 0?null:r.value}function TA(n,e){const t=hg(n,!0).delete(e);return new xf(t).toPromise()}const N6=800,O6=3;class nI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>O6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cg._getInstance(x6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await C6(),!this.activeServiceWorker)return;this.sender=new w6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q0();return await bA(e,Xp,"1"),await TA(e,Xp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>bA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>M6(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>TA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=hg(i,!1).getAll();return new xf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nI.type="LOCAL";const D6=nI;new Cf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(n,e){return e?js(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends T_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ju(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ju(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ju(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function L6(n){return Wk(n.auth,new A_(n),n.bypassAuthState)}function V6(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),p6(t,new A_(n),n.bypassAuthState)}async function U6(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),d6(t,new A_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L6;case"linkViaPopup":case"linkViaRedirect":return U6;case"reauthViaPopup":case"reauthViaRedirect":return V6;default:Ri(this.auth,"internal-error")}}resolve(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=new Cf(2e3,1e4);class Pu extends rI{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Pu.currentPopupAction&&Pu.currentPopupAction.cancel(),Pu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){Xs(this.filter.length===1,"Popup operations only handle one event");const e=w_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z6.get())};e()}}Pu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="pendingRedirect",Tp=new Map;class j6 extends rI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Tp.get(this.auth._key());if(!e){try{const r=await H6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Tp.set(this.auth._key(),e)}return this.bypassAuthState||Tp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function H6(n,e){const t=$6(e),r=q6(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function F6(n,e){Tp.set(n._key(),e)}function q6(n){return js(n._redirectPersistence)}function $6(n){return bp(B6,n.config.apiKey,n.name)}async function G6(n,e,t=!1){if(ui(n.app))return Promise.reject(na(n));const r=cc(n),i=P6(r,e),l=await new j6(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=10*60*1e3;class W6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!iI(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(ns(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K6&&this.cachedEventUids.clear(),this.cachedEventUids.has(SA(e))}saveEventToCache(e){this.cachedEventUids.add(SA(e)),this.lastProcessedEventTime=Date.now()}}function SA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q6(n,e={}){return _a(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J6=/^https?/;async function Z6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Q6(n);for(const t of e)try{if(ez(t))return}catch{}Ri(n,"unauthorized-domain")}function ez(n){const e=W0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!J6.test(t))return!1;if(X6.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=new Cf(3e4,6e4);function wA(){const n=rs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nz(n){return new Promise((e,t)=>{var i,o,l;function r(){wA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wA(),t(ns(n,"network-request-failed"))},timeout:tz.get()})}if((o=(i=rs().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=rs().gapi)!=null&&l.load)r();else{const c=QU("iframefcb");return rs()[c]=()=>{gapi.load?r():t(ns(n,"network-request-failed"))},Fk(`${YU()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Sp=null,e})}let Sp=null;function rz(n){return Sp=Sp||nz(n),Sp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=new Cf(5e3,15e3),sz="__/auth/iframe",oz="emulator/auth/iframe",az={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uz(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?E_(e,oz):`https://${n.config.authDomain}/${sz}`,r={apiKey:e.apiKey,appName:n.name,v:Dl},i=lz.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${_f(r).slice(1)}`}async function cz(n){const e=await rz(n),t=rs().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:uz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:az,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=ns(n,"network-request-failed"),c=rs().setTimeout(()=>{o(l)},iz.get());function h(){rs().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fz=500,dz=600,pz="_blank",mz="http://localhost";class AA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gz(n,e,t,r=fz,i=dz){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...hz,width:r.toString(),height:i.toString(),top:o,left:l},d=nr().toLowerCase();t&&(c=Lk(d)?pz:t),Dk(d)&&(e=e||mz,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[_,T])=>`${v}${_}=${T},`,"");if(BU(d)&&c!=="_self")return yz(e||"",c),new AA(null);const y=window.open(e||"",c,m);Be(y,n,"popup-blocked");try{y.focus()}catch{}return new AA(y)}function yz(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz="__/auth/handler",Ez="emulator/auth/handler",_z=encodeURIComponent("fac");async function CA(n,e,t,r,i,o){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Dl,eventId:i};if(e instanceof Gk){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",WP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Rf){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),d=h?`#${_z}=${encodeURIComponent(h)}`:"";return`${bz(n)}?${_f(c).slice(1)}${d}`}function bz({config:n}){return n.emulator?E_(n,Ez):`https://${n.authDomain}/${vz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="webStorageSupport";class Tz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jk,this._completeRedirectFn=G6,this._overrideRedirectResult=F6}async _openPopup(e,t,r,i){var l;Xs((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await CA(e,t,r,W0(),i);return gz(e,o,w_())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await CA(e,t,r,W0(),i);return A6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Xs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await cz(e),r=new W6(e);return t.register("authEvent",i=>(Be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fv,{type:Fv},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[Fv];o!==void 0&&t(!!o),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Z6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jk()||Pk()||b_()}}const Sz=Tz;var RA="@firebase/auth",xA="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Az(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cz(n){Tl(new la("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Be(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hk(n)},d=new GU(r,i,o,h);return n6(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tl(new la("auth-internal",e=>{const t=cc(e.getProvider("auth").getImmediate());return(r=>new wz(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xi(RA,xA,Az(n)),Xi(RA,xA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=5*60,xz=VR("authIdTokenMaxAge")||Rz;let kA=null;const kz=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xz)return;const i=t==null?void 0:t.token;kA!==i&&(kA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Iz(n=UE()){const e=Fm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=t6(n,{popupRedirectResolver:Sz,persistence:[D6,T6,Jk]}),r=VR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=kz(o.toString());E6(t,l,()=>l(t.currentUser)),v6(t,c=>l(c))}}const i=DR("auth");return i&&r6(t,`http://${i}`),t}function Mz(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}KU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ns("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Mz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cz("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebasestorage.googleapis.com",oI="storageBucket",Nz=2*60*1e3,Oz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends cs{constructor(e,t,r=0){super(qv(e),`Firebase Storage: ${t} (${qv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function qv(n){return"storage/"+n}function C_(){const n="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,n)}function Dz(n){return new tn(en.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Pz(n){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Lz(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,n)}function Vz(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Uz(n){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function zz(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bz(){return new tn(en.CANCELED,"User canceled the upload/download.")}function jz(n){return new tn(en.INVALID_URL,"Invalid URL '"+n+"'.")}function Hz(n){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Fz(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oI+"' property when initializing the app?")}function qz(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $z(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Gz(n){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function X0(n){return new tn(en.INVALID_ARGUMENT,n)}function aI(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function Kz(n){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lh(n,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function gh(n){throw new tn(en.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hr.makeFromUrl(e,t)}catch{return new Hr(e,"")}if(r.path==="")return r;throw Hz(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function d(ie){ie.path_=decodeURIComponent(ie.path)}const m="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",_=new RegExp(`^https?://${y}/${m}/b/${i}/o${v}`,"i"),T={bucket:1,path:3},A=t===sI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",N=new RegExp(`^https?://${A}/${i}/${C}`,"i"),X=[{regex:c,indices:h,postModify:o},{regex:_,indices:T,postModify:d},{regex:N,indices:{bucket:1,path:2},postModify:d}];for(let ie=0;ie<X.length;ie++){const te=X[ie],ge=te.regex.exec(e);if(ge){const k=ge[te.indices.bucket];let x=ge[te.indices.path];x||(x=""),r=new Hr(k,x),te.postModify(r);break}}if(r==null)throw jz(e);return r}}class Wz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function h(){return c===2}let d=!1;function m(...C){d||(d=!0,e.apply(null,C))}function y(C){i=setTimeout(()=>{i=null,n(_,h())},C)}function v(){o&&clearTimeout(o)}function _(C,...N){if(d){v();return}if(C){v(),m.call(null,C,...N);return}if(h()||l){v(),m.call(null,C,...N);return}r<64&&(r*=2);let X;c===1?(c=2,X=0):X=(r+Math.random())*1e3,y(X)}let T=!1;function A(C){T||(T=!0,v(),!d&&(i!==null?(C||(c=2),clearTimeout(i),y(0)):C||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,A(!0)},t),A}function Qz(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(n){return n!==void 0}function Jz(n){return typeof n=="object"&&!Array.isArray(n)}function R_(n){return typeof n=="string"||n instanceof String}function IA(n){return x_()&&n instanceof Blob}function x_(){return typeof Blob<"u"}function MA(n,e,t,r){if(r<e)throw X0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw X0(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function lI(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var dl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(dl||(dl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,t,r,i,o,l,c,h,d,m,y,v=!0,_=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,A)=>{this.resolve_=T,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new tp(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===dl.NO_ERROR,h=o.getStatus();if(!c||Zz(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===dl.ABORT;r(!1,new tp(!1,null,m));return}const d=this.successCodes_.indexOf(h)!==-1;r(!0,new tp(d,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());Xz(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=C_();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?aI():Bz();l(h)}else{const h=zz();l(h)}};this.canceled_?t(!1,new tp(!1,null,!0)):this.backoffId_=Yz(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Qz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tp{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function tB(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function nB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rB(n,e){e&&(n["X-Firebase-GMPID"]=e)}function iB(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sB(n,e,t,r,i,o,l=!0,c=!1){const h=lI(n.urlParams),d=n.url+h,m=Object.assign({},n.headers);return rB(m,e),tB(m,t),nB(m,o),iB(m,r),new eB(d,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aB(...n){const e=oB();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(x_())return new Blob(n);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lB(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(n){if(typeof atob>"u")throw Gz("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $v{constructor(e,t){this.data=e,this.contentType=t||null}}function cB(n,e){switch(n){case Qi.RAW:return new $v(uI(e));case Qi.BASE64:case Qi.BASE64URL:return new $v(cI(n,e));case Qi.DATA_URL:return new $v(fB(e),dB(e))}throw C_()}function uI(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function hB(n){let e;try{e=decodeURIComponent(n)}catch{throw Lh(Qi.DATA_URL,"Malformed data URL.")}return uI(e)}function cI(n,e){switch(n){case Qi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Lh(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Lh(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=uB(e)}catch(i){throw i.message.includes("polyfill")?i:Lh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class hI{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Lh(Qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=pB(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function fB(n){const e=new hI(n);return e.base64?cI(Qi.BASE64,e.rest):hB(e.rest)}function dB(n){return new hI(n).contentType}function pB(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){let r=0,i="";IA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IA(this.data_)){const r=this.data_,i=lB(r,e,t);return i===null?null:new qo(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new qo(r,!0)}}static getBlob(...e){if(x_()){const t=e.map(r=>r instanceof qo?r.data_:r);return new qo(aB.apply(null,t))}else{const t=e.map(l=>R_(l)?cB(Qi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new qo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(n){let e;try{e=JSON.parse(n)}catch{return null}return Jz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function gB(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function dI(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(n,e){return e}let or=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||yB}},np=null;function vB(n){return!R_(n)||n.length<2?n:dI(n)}function pI(){if(np)return np;const n=[];n.push(new or("bucket")),n.push(new or("generation")),n.push(new or("metageneration")),n.push(new or("name","fullPath",!0));function e(o,l){return vB(l)}const t=new or("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const i=new or("size");return i.xform=r,n.push(i),n.push(new or("timeCreated")),n.push(new or("updated")),n.push(new or("md5Hash",null,!0)),n.push(new or("cacheControl",null,!0)),n.push(new or("contentDisposition",null,!0)),n.push(new or("contentEncoding",null,!0)),n.push(new or("contentLanguage",null,!0)),n.push(new or("contentType",null,!0)),n.push(new or("metadata","customMetadata",!0)),np=n,np}function EB(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new Hr(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function _B(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return EB(r,n),r}function mI(n,e,t){const r=fI(e);return r===null?null:_B(n,r,t)}function bB(n,e,t,r){const i=fI(e);if(i===null||!R_(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(d=>{const m=n.bucket,y=n.fullPath,v="/b/"+l(m)+"/o/"+l(y),_=k_(v,t,r),T=lI({alt:"media",token:d});return _+T})[0]}function TB(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class gI{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(n){if(!n)throw C_()}function SB(n,e){function t(r,i){const o=mI(n,i,e);return yI(o!==null),o}return t}function wB(n,e){function t(r,i){const o=mI(n,i,e);return yI(o!==null),bB(o,i,n.host,n._protocol)}return t}function vI(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Vz():i=Lz():t.getStatus()===402?i=Pz(n.bucket):t.getStatus()===403?i=Uz(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function AB(n){const e=vI(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Dz(n.path)),o.serverResponse=i.serverResponse,o}return t}function CB(n,e,t){const r=e.fullServerUrl(),i=k_(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new gI(i,o,wB(n,t),l);return c.errorHandler=AB(e),c}function RB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function xB(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=RB(null,e)),r}function kB(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let X="";for(let ie=0;ie<2;ie++)X=X+Math.random().toString().slice(2);return X}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const d=xB(e,r,i),m=TB(d,t),y="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+d.contentType+`\r
\r
`,v=`\r
--`+h+"--",_=qo.getBlob(y,r,v);if(_===null)throw qz();const T={name:d.fullPath},A=k_(o,n.host,n._protocol),C="POST",N=n.maxUploadRetryTime,H=new gI(A,C,SB(n,t),N);return H.urlParams=T,H.headers=l,H.body=_.uploadData(),H.errorHandler=vI(e),H}class IB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw gh("cannot .send() more than once");if(ya(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MB extends IB{initXhr(){this.xhr_.responseType="text"}}function EI(){return new MB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this._service=e,t instanceof Hr?this._location=t:this._location=Hr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Rl(e,t)}get root(){const e=new Hr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dI(this._location.path)}get storage(){return this._service}get parent(){const e=mB(this._location.path);if(e===null)return null;const t=new Hr(this._location.bucket,e);return new Rl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Kz(e)}}function NB(n,e,t){n._throwIfRoot("uploadBytes");const r=kB(n.storage,n._location,pI(),new qo(e,!0),t);return n.storage.makeRequestWithTokens(r,EI).then(i=>({metadata:i,ref:n}))}function OB(n){n._throwIfRoot("getDownloadURL");const e=CB(n.storage,n._location,pI());return n.storage.makeRequestWithTokens(e,EI).then(t=>{if(t===null)throw $z();return t})}function DB(n,e){const t=gB(n._location.path,e),r=new Hr(n._location.bucket,t);return new Rl(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(n){return/^[A-Za-z]+:\/\//.test(n)}function LB(n,e){return new Rl(n,e)}function _I(n,e){if(n instanceof I_){const t=n;if(t._bucket==null)throw Fz();const r=new Rl(t,t._bucket);return e!=null?_I(r,e):r}else return e!==void 0?DB(n,e):n}function VB(n,e){if(e&&PB(e)){if(n instanceof I_)return LB(n,e);throw X0("To use ref(service, url), the first argument must be a Storage instance.")}else return _I(n,e)}function NA(n,e){const t=e==null?void 0:e[oI];return t==null?null:Hr.makeFromBucketSpec(t,n)}function UB(n,e,t,r={}){n.host=`${e}:${t}`;const i=ya(e);i&&(DE(`https://${n.host}/b`),PE("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:UR(o,n.app.options.projectId))}class I_{constructor(e,t,r,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=sI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nz,this._maxUploadRetryTime=Oz,this._requests=new Set,i!=null?this._bucket=Hr.makeFromBucketSpec(i,this._host):this._bucket=NA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hr.makeFromBucketSpec(this._url,e):this._bucket=NA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ui(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rl(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Wz(aI());{const l=sB(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const OA="@firebase/storage",DA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="storage";function TI(n,e,t){return n=Sn(n),NB(n,e,t)}function SI(n){return n=Sn(n),OB(n)}function wI(n,e){return n=Sn(n),VB(n,e)}function zB(n=UE(),e){n=Sn(n);const r=Fm(n,bI).getImmediate({identifier:e}),i=PR("storage");return i&&BB(r,...i),r}function BB(n,e,t,r={}){UB(n,e,t,r)}function jB(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new I_(t,r,i,e,Dl)}function HB(){Tl(new la(bI,jB,"PUBLIC").setMultipleInstances(!0)),Xi(OA,DA,""),Xi(OA,DA,"esm2020")}HB();const FB={apiKey:"AIzaSyBjAWGCJoRerGhg_yuskjhMMf01IAERSS4",authDomain:"lovecoffee-b2f94.firebaseapp.com",projectId:"lovecoffee-b2f94",storageBucket:"lovecoffee-b2f94.firebasestorage.app",messagingSenderId:"52703316042",appId:"1:52703316042:web:7bf6c620d37c8d3aacbeb3",measurementId:"G-ZHK8YPE615"},M_=jR(FB),qB=Iz(M_),is=rU(M_),AI=zB(M_);function CI({isAdmin:n,onAdminCardClick:e,onAdminCardDelete:t,refetchProducts:r}){const[i,o]=ee.useState([]),[l,c]=ee.useState(null),h=ee.useRef({});ee.useEffect(()=>{(async()=>{const v=(await Tk(ig(is,"products"))).docs.map(_=>{var A,C;const T=_.data();return{id:_.id,name:T.name,description:T.description,imageUrl:T.imageUrl,createdAt:(A=T.createdAt)==null?void 0:A.toDate(),updatedAt:(C=T.updatedAt)==null?void 0:C.toDate()}});o(v)})()},[r]),ee.useEffect(()=>{const m=y=>{if(l===null)return;const v=h.current[l];v&&!v.contains(y.target)&&c(null)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[l]);const d=(m,y)=>{m.stopPropagation(),c(l===y?null:y)};return L.jsx("div",{className:"grid grid-cols-4 gap-4 my-2 h-fit",children:i.map(m=>{var y;return L.jsxs("div",{className:"grid grid-cols-1 m-6 shadow-lg rounded-lg relative",onClick:()=>{l&&c(null)},children:[L.jsx("img",{className:"w-full h-64 object-cover rounded-t-lg",src:m.imageUrl}),L.jsxs("div",{className:"grid grid-cols-1 m-2 p-2",children:[L.jsx("div",{className:"text-xl font-bold",children:m.name}),L.jsx("div",{className:"mt-0.5",children:m.description}),L.jsx("div",{className:"mt-0.5 text-sm",children:(y=m.createdAt)==null?void 0:y.toLocaleDateString()})]}),n&&L.jsxs("div",{className:"absolute bottom-2 right-2",ref:v=>{h.current[m.id]=v},children:[L.jsx("button",{onClick:v=>d(v,m.id),className:"cursor-pointer p-1 rounded-full hover:bg-gray-100",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M12 16c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"})})}),l===m.id&&L.jsxs("div",{className:"absolute right-0 top-12 w-24 bg-white rounded shadow-lg z-10",children:[L.jsx("button",{onClick:v=>{v.stopPropagation(),e==null||e(m),c(null)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:""}),L.jsx("button",{onClick:v=>{v.stopPropagation(),t==null||t(m.id)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:""})]})]})]},m.id)})})}function $B(){return L.jsxs("div",{children:[L.jsx("h1",{className:"text-5xl text-center my-8",children:""}),L.jsx(CI,{isAdmin:!1})]})}function RI({isAdmin:n,onAdminCardClick:e,onAdminCardDelete:t,onCardClick:r,refetchGospels:i}){const[o,l]=ee.useState([]),[c,h]=ee.useState(null),d=ee.useRef({});ee.useEffect(()=>{(async()=>{const T=(await Tk(ig(is,"gospels"))).docs.map(A=>{const C=A.data();return{id:A.id,title:C.title,content:C.content,description:C.description,imageUrl:C.imageUrl,createdAt:C.createdAt.toDate()}});l(T)})()},[i]),ee.useEffect(()=>{const v=_=>{if(c===null)return;const T=d.current[c];T&&!T.contains(_.target)&&h(null)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[c]);const m=(v,_)=>{v.stopPropagation(),h(c===_?null:_)},y=v=>v.replace(/<[^>]*>?/gm,"");return L.jsx("div",{className:"grid grid-cols-4 gap-4 my-2 h-fit",children:o.map(v=>{var _;return L.jsxs("div",{className:"grid grid-cols-1 m-6 shadow-lg rounded-lg relative",onClick:()=>{c?h(null):!n&&r&&r(v)},children:[L.jsx("img",{className:"w-full h-64 object-cover rounded-t-lg",src:v.imageUrl}),L.jsxs("div",{className:"grid grid-cols-1 m-2 p-2",children:[L.jsx("div",{className:"text-xl font-bold",children:v.title}),L.jsx("div",{className:"mt-0.5",children:v.description||((_=y(v.content))==null?void 0:_.slice(0,25))+"..."}),L.jsx("div",{className:"mt-0.5 text-sm",children:v.createdAt.toLocaleDateString()})]}),n&&L.jsxs("div",{className:"absolute bottom-2 right-2",ref:T=>{d.current[v.id]=T},children:[L.jsx("button",{onClick:T=>m(T,v.id),className:"cursor-pointer p-1 rounded-full hover:bg-gray-100",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M12 16c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"})})}),c===v.id&&L.jsxs("div",{className:"absolute right-0 top-12 w-24 bg-white rounded shadow-lg z-10",children:[L.jsx("button",{onClick:T=>{T.stopPropagation(),e==null||e(v)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:""}),L.jsx("button",{onClick:T=>{T.stopPropagation(),t==null||t(v.id)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:""})]})]})]},v.id)})})}function GB(){const n=vf(),e=t=>{n(`/gospel/${t.id}`)};return L.jsxs("div",{children:[L.jsx("h1",{className:"text-5xl text-center my-8",children:""}),L.jsx(RI,{isAdmin:!1,onCardClick:e})]})}function KB(){return L.jsx("div",{children:L.jsx(IR,{})})}function WB(){return L.jsx("div",{className:"",children:L.jsxs("div",{className:"absolute top-1/3 grid grid-cols-1 w-screen",children:[L.jsx("h1",{className:"text-5xl text-center",children:""}),L.jsx(zo,{className:"m-auto mt-5 text-2xl hover:text-slate-500",to:"/",children:""})]})})}function YB(){const n=ic(),[e,t]=ee.useState(-1);return ee.useEffect(()=>{switch(n.pathname){case"/admin/product":t(0);break;case"/admin/gospel":t(1);break}},[n.pathname]),L.jsxs("nav",{className:"shadow-md h-20 flex align-middle justify-center text-x sticky",children:[L.jsx("div",{className:"h-20 flex items-center",children:L.jsx(zo,{className:"hover:text-slate-600 mx-5",to:"/admin/product",children:L.jsx("span",{className:e===0?"underline underline-offset-6 decoration-lime-700":"",children:""})})}),L.jsx("a",{className:"flex items-center mx-5 text-xl font-bold",children:""}),L.jsx("div",{className:"h-20 flex items-center",children:L.jsx(zo,{className:"hover:text-slate-600 mx-5",to:"/admin/gospel",children:L.jsx("span",{className:e===1?"underline underline-offset-6 decoration-lime-700":"",children:""})})})]})}function QB(){return L.jsxs("div",{children:[L.jsx(YB,{}),L.jsx("main",{children:L.jsx(kR,{})})]})}function XB({product:n,onClose:e,onSave:t}){const[r,i]=ee.useState({name:"",description:"",file:null}),[o,l]=ee.useState(null);ee.useEffect(()=>{n?(i({name:n.name,description:n.description,file:null}),l(n.imageUrl)):(i({name:"",description:"",file:null}),l(null))},[n]);const c=y=>{const{name:v,value:_}=y.target;i(T=>({...T,[v]:_}))},h=y=>{var _;const v=((_=y.target.files)==null?void 0:_[0])||null;i(T=>({...T,file:v})),l(v?URL.createObjectURL(v):null)},d=()=>{i(y=>({...y,file:null})),l(null)},m=async y=>{y.preventDefault();try{let v=o;if(r.file){const T=wI(AI,`product-images/${r.file.name}`);await TI(T,r.file),v=await SI(T)}const _={name:r.name,description:r.description,imageUrl:v,updatedAt:new Date};if(n!=null&&n.id){const T=Al(is,"products",n.id);await Sk(T,_)}else await Ak(ig(is,"products"),{..._,createdAt:new Date});t(),e()}catch(v){console.error("Error uploading file or saving data: ",v),alert("Failed to save product. Please try again.")}};return L.jsx("div",{className:"fixed inset-0 bg-gray-600/25 overflow-y-auto h-full w-full flex justify-center items-center",children:L.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[L.jsx("h3",{className:"text-2xl font-medium text-gray-900 mb-6 text-center",children:n?"":""}),L.jsxs("form",{onSubmit:m,className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("input",{type:"text",name:"name",id:"name",value:r.name,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 border-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2"})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("textarea",{name:"description",id:"description",value:r.description,onChange:c,rows:4,className:"mt-1 block w-full rounded-md border-gray-300 border-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("div",{className:"mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6 relative",children:o?L.jsx("div",{className:"w-full",children:L.jsxs("div",{className:"w-fit relative",children:[L.jsx("img",{src:o,alt:"Preview",className:"w-fit rounded-md max-h-64"}),L.jsx("button",{onClick:d,className:"absolute top-1 right-1 rounded-full p-1 text-xs",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"30",height:"30",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 8.7070312 7.2929688 L 7.2929688 8.7070312 L 10.585938 12 L 7.2929688 15.292969 L 8.7070312 16.707031 L 12 13.414062 L 15.292969 16.707031 L 16.707031 15.292969 L 13.414062 12 L 16.707031 8.7070312 L 15.292969 7.2929688 L 12 10.585938 L 8.7070312 7.2929688 z"})})})]})}):L.jsxs("div",{className:"space-y-1 text-center",children:[L.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:L.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsxs("div",{className:"flex text-sm text-gray-600",children:[L.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500",children:[L.jsx("span",{children:"Upload a file"}),L.jsx("input",{id:"file-upload",name:"file",type:"file",className:"sr-only",onChange:h,accept:"image/*"})]}),L.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),L.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),L.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[L.jsx("button",{type:"button",onClick:e,className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:""}),L.jsx("button",{type:"submit",className:"rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:n?"":""})]})]})]})})}function JB(){const[n,e]=ee.useState(!1),[t,r]=ee.useState(null),[i,o]=ee.useState(!1),l=m=>{r(m),e(!0)},c=()=>{r(null),e(!0)},h=async m=>{window.confirm("?")&&(await wk(Al(is,"products",m)),o(y=>!y))},d=()=>{o(m=>!m)};return L.jsxs("div",{className:"relative h-[calc(100vh-5rem)]",children:[L.jsx("button",{onClick:c,className:`hover:cursor-pointer
                 bg-slate-500 text-white 
                 rounded-sm px-4 py-2
                    absolute right-10 bottom-10 mb-4 mr-4
                `,children:""}),L.jsx(CI,{isAdmin:!0,onAdminCardClick:l,onAdminCardDelete:h,refetchProducts:i}),n&&L.jsx(XB,{product:t,onClose:()=>e(!1),onSave:d})]})}function ZB(){const n=vf(),[e,t]=ee.useState(!1),r=l=>{n(`/admin/gospel/edit/${l.id}`)},i=()=>{n("/admin/gospel/new")},o=async l=>{window.confirm("?")&&(await wk(Al(is,"gospels",l)),t(c=>!c))};return L.jsxs("div",{className:"relative h-[calc(100vh-5rem)]",children:[L.jsx("button",{onClick:i,className:`hover:cursor-pointer
                 bg-slate-500 text-white 
                 rounded-sm px-4 py-2
                    absolute right-10 bottom-10 mb-4 mr-4
                `,children:""}),L.jsx(RI,{isAdmin:!0,onAdminCardClick:r,onAdminCardDelete:o,refetchGospels:e})]})}var Gv={exports:{}},Kv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function e9(){if(PA)return Kv;PA=1;var n=gf();function e(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(y,v){var _=v(),T=r({inst:{value:_,getSnapshot:v}}),A=T[0].inst,C=T[1];return o(function(){A.value=_,A.getSnapshot=v,h(A)&&C({inst:A})},[y,_,v]),i(function(){return h(A)&&C({inst:A}),y(function(){h(A)&&C({inst:A})})},[y]),l(_),_}function h(y){var v=y.getSnapshot;y=y.value;try{var _=v();return!t(y,_)}catch{return!0}}function d(y,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return Kv.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,Kv}var LA;function xI(){return LA||(LA=1,Gv.exports=e9()),Gv.exports}var kI=xI();function jn(n){this.content=n}jn.prototype={constructor:jn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new jn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new jn(t)},addToStart:function(n,e){return new jn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new jn(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new jn(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=jn.from(n),n.size?new jn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=jn.from(n),n.size?new jn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=jn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};jn.from=function(n){if(n instanceof jn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new jn(e)};function II(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)t++;return t}if(i.content.size||o.content.size){let l=II(i.content,o.content,t+1);if(l!=null)return l}t+=i.nodeSize}}function MI(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let l=n.child(--i),c=e.child(--o),h=l.nodeSize;if(l==c){t-=h,r-=h;continue}if(!l.sameMarkup(c))return{a:t,b:r};if(l.isText&&l.text!=c.text){let d=0,m=Math.min(l.text.length,c.text.length);for(;d<m&&l.text[l.text.length-d-1]==c.text[c.text.length-d-1];)d++,t--,r--;return{a:t,b:r}}if(l.content.size||c.content.size){let d=MI(l.content,c.content,t-1,r-1);if(d)return d}t-=h,r-=h}}class ce{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let l=0,c=0;c<t;l++){let h=this.content[l],d=c+h.nodeSize;if(d>e&&r(h,i+c,o||null,l)!==!1&&h.content.size){let m=c+1;h.nodesBetween(Math.max(0,e-m),Math.min(h.content.size,t-m),r,i+m)}c=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",l=!0;return this.nodesBetween(e,t,(c,h)=>{let d=c.isText?c.text.slice(Math.max(e,h)-h,t-h):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&d||c.isTextblock)&&r&&(l?l=!1:o+=r),o+=d},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new ce(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,l=0;l<t;o++){let c=this.content[o],h=l+c.nodeSize;h>e&&((l<e||h>t)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,t-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,t-l-1))),r.push(c),i+=c.nodeSize),l=h}return new ce(r,i)}cutByIndex(e,t){return e==t?ce.empty:e==0&&t==this.content.length?this:new ce(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new ce(i,o)}addToStart(e){return new ce([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ce(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return II(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return MI(this,e,t,r)}findIndex(e){if(e==0)return rp(0,e);if(e==this.size)return rp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let i=this.child(t),o=r+i.nodeSize;if(o>=e)return o==e?rp(t+1,o):rp(t,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ce.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ce(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ce.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new ce(t||e,r)}static from(e){if(!e)return ce.empty;if(e instanceof ce)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ce([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ce.empty=new ce([],0);const Wv={index:0,offset:0};function rp(n,e){return Wv.index=n,Wv.offset=e,Wv}function Zp(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Zp(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Zp(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Nt=class J0{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Zp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return J0.none;if(e instanceof J0)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Nt.none=[];class em extends Error{}class be{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=OI(this.content,e+this.openStart,t);return r&&new be(r,this.openStart,this.openEnd)}removeBetween(e,t){return new be(NI(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return be.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new be(ce.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new be(e,r,i)}}be.empty=new be(ce.empty,0,0);function NI(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:c}=n.findIndex(t);if(i==e||o.isText){if(c!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(NI(o.content,e-i-1,t-i-1)))}function OI(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),l=n.maybeChild(i);if(o==e||l.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let c=OI(l.content,e-o-1,t,l);return c&&n.replaceChild(i,l.copy(c))}function t9(n,e,t){if(t.openStart>n.depth)throw new em("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new em("Inconsistent open depths");return DI(n,e,t,0)}function DI(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let l=DI(n,e,t,r+1);return o.copy(o.content.replaceChild(i,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,c=l.content;return ml(l,c.cut(0,n.parentOffset).append(t.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=n9(t,n);return ml(o,LI(n,l,c,e,r))}else return ml(o,tm(n,e,r))}function PI(n,e){if(!e.type.compatibleContent(n.type))throw new em("Cannot join "+e.type.name+" onto "+n.type.name)}function Z0(n,e,t){let r=n.node(t);return PI(r,e.node(t)),r}function pl(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Vh(n,e,t,r){let i=(e||n).node(t),o=0,l=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(pl(n.nodeAfter,r),o++));for(let c=o;c<l;c++)pl(i.child(c),r);e&&e.depth==t&&e.textOffset&&pl(e.nodeBefore,r)}function ml(n,e){return n.type.checkContent(e),n.copy(e)}function LI(n,e,t,r,i){let o=n.depth>i&&Z0(n,e,i+1),l=r.depth>i&&Z0(t,r,i+1),c=[];return Vh(null,n,i,c),o&&l&&e.index(i)==t.index(i)?(PI(o,l),pl(ml(o,LI(n,e,t,r,i+1)),c)):(o&&pl(ml(o,tm(n,e,i+1)),c),Vh(e,t,i,c),l&&pl(ml(l,tm(t,r,i+1)),c)),Vh(r,null,i,c),new ce(c)}function tm(n,e,t){let r=[];if(Vh(null,n,t,r),n.depth>t){let i=Z0(n,e,t+1);pl(ml(i,tm(n,e,t+1)),r)}return Vh(e,null,t,r),new ce(r)}function n9(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(ce.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class sf{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Nt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new nm(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let l=e;;){let{index:c,offset:h}=l.content.findIndex(o),d=o-h;if(r.push(l,c,i+h),!d||(l=l.child(c),l.isText))break;o=d-1,i+=h+1}return new sf(t,r,o)}static resolveCached(e,t){let r=VA.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else VA.set(e,r=new r9);let i=r.elts[r.i]=sf.resolve(e,t);return r.i=(r.i+1)%i9,i}}class r9{constructor(){this.elts=[],this.i=0}}const i9=12,VA=new WeakMap;class nm{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const s9=Object.create(null);class Ci{constructor(e,t,r,i=Nt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||ce.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Zp(this.attrs,t||e.defaultAttrs||s9)&&Nt.sameSet(this.marks,r||Nt.none)}copy(e=null){return e==this.content?this:new Ci(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Ci(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return be.empty;let i=this.resolve(e),o=this.resolve(t),l=r?0:i.sharedDepth(t),c=i.start(l),d=i.node(l).content.cut(i.pos-c,o.pos-c);return new be(d,i.depth-l,o.depth-l)}replace(e,t,r){return t9(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return sf.resolveCached(this,e)}resolveNoCache(e){return sf.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),VI(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ce.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),c=l&&l.matchFragment(this.content,t);if(!c||!c.validEnd)return!1;for(let h=i;h<o;h++)if(!this.type.allowsMarks(r.child(h).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Nt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=ce.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}Ci.prototype.text=void 0;class rm extends Ci{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):VI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new rm(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new rm(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function VI(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class xl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new o9(e,t);if(r.next==null)return xl.empty;let i=UI(r);r.next&&r.err("Unexpected trailing text");let o=d9(f9(i));return p9(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(l,c){let h=l.matchFragment(e,r);if(h&&(!t||h.validEnd))return ce.from(c.map(d=>d.createAndFill()));for(let d=0;d<l.next.length;d++){let{type:m,next:y}=l.next[d];if(!(m.isText||m.hasRequiredAttrs())&&i.indexOf(y)==-1){i.push(y);let v=o(y,c.concat(m));if(v)return v}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let c=i;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:c,next:h}=o.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in t)&&(!i.type||h.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),t[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}xl.empty=new xl(!0);class o9{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function UI(n){let e=[];do e.push(a9(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function a9(n){let e=[];do e.push(l9(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function l9(n){let e=h9(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=u9(n,e);else break;return e}function UA(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function u9(n,e){let t=UA(n),r=t;return n.eat(",")&&(n.next!="}"?r=UA(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function c9(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let l=t[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function h9(n){if(n.eat("(")){let e=UI(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=c9(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function f9(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,c,h){let d={term:h,to:c};return e[l].push(d),d}function i(l,c){l.forEach(h=>h.to=c)}function o(l,c){if(l.type=="choice")return l.exprs.reduce((h,d)=>h.concat(o(d,c)),[]);if(l.type=="seq")for(let h=0;;h++){let d=o(l.exprs[h],c);if(h==l.exprs.length-1)return d;i(d,c=t())}else if(l.type=="star"){let h=t();return r(c,h),i(o(l.expr,h),h),[r(h)]}else if(l.type=="plus"){let h=t();return i(o(l.expr,c),h),i(o(l.expr,h),h),[r(h)]}else{if(l.type=="opt")return[r(c)].concat(o(l.expr,c));if(l.type=="range"){let h=c;for(let d=0;d<l.min;d++){let m=t();i(o(l.expr,h),m),h=m}if(l.max==-1)i(o(l.expr,h),h);else for(let d=l.min;d<l.max;d++){let m=t();r(h,m),i(o(l.expr,h),m),h=m}return[r(h)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function zI(n,e){return e-n}function zA(n,e){let t=[];return r(e),t.sort(zI);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let l=0;l<o.length;l++){let{term:c,to:h}=o[l];!c&&t.indexOf(h)==-1&&r(h)}}}function d9(n){let e=Object.create(null);return t(zA(n,0));function t(r){let i=[];r.forEach(l=>{n[l].forEach(({term:c,to:h})=>{if(!c)return;let d;for(let m=0;m<i.length;m++)i[m][0]==c&&(d=i[m][1]);zA(n,h).forEach(m=>{d||i.push([c,d=[]]),d.indexOf(m)==-1&&d.push(m)})})});let o=e[r.join(",")]=new xl(r.indexOf(n.length-1)>-1);for(let l=0;l<i.length;l++){let c=i[l][1].sort(zI);o.next.push({type:i[l][0],next:e[c.join(",")]||t(c)})}return o}}function p9(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,l=[];for(let c=0;c<i.next.length;c++){let{type:h,next:d}=i.next[c];l.push(h.name),o&&!(h.isText||h.hasRequiredAttrs())&&(o=!1),r.indexOf(d)==-1&&r.push(d)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function BI(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function jI(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function HI(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function FI(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new g9(n,r,e[r]);return t}let BA=class qI{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=FI(e,r.attrs),this.defaultAttrs=BI(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jI(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ci(this,this.computeAttrs(e),ce.from(t),Nt.setFrom(r))}createChecked(e=null,t,r){return t=ce.from(t),this.checkContent(t),new Ci(this,this.computeAttrs(e),t,Nt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ce.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(ce.empty,!0);return o?new Ci(this,e,t.append(o),Nt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){HI(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Nt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new qI(o,t,l));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function m9(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class g9{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?m9(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class fg{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=FI(e,i.attrs),this.excluded=null;let o=BI(this.attrs);this.instance=o?new Nt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Nt(this,jI(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new fg(o,i++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){HI(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class $I{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=jn.from(e.nodes),t.marks=jn.from(e.marks||{}),this.nodes=BA.compile(this.spec.nodes,this),this.marks=fg.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=xl.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?jA(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:jA(this,l.split(" "))}this.nodeFromJSON=i=>Ci.fromJSON(this,i),this.markFromJSON=i=>Nt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof BA){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new rm(r,r.defaultAttrs,e,Nt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function jA(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],l=o;if(o)t.push(o);else for(let c in n.marks){let h=n.marks[c];(i=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&t.push(l=h)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function y9(n){return n.tag!=null}function v9(n){return n.style!=null}class ra{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(y9(i))this.tags.push(i);else if(v9(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new FA(this,t,!1);return r.addAll(e,Nt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new FA(this,t,!0);return r.addAll(e,Nt.none,t.from,t.to),be.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(b9(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=t))){if(l.getAttrs){let h=l.getAttrs(t);if(h===!1)continue;l.attrs=h||void 0}return l}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<t.length;l++){let c=t[l];if((c.priority==null?50:c.priority)<o)break}t.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=qA(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=qA(l)),l.node||l.ignore||l.mark||(l.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ra(e,ra.schemaRules(e)))}}const GI={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},E9={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},KI={ol:!0,ul:!0},of=1,eE=2,wp=4;function HA(n,e,t){return e!=null?(e?of:0)|(e==="full"?eE:0):n&&n.whitespace=="pre"?of|eE:t&-5}class ip{constructor(e,t,r,i,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=Nt.none,this.match=o||(l&wp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ce.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&of)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=ce.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ce.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!GI.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class FA{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,l=HA(null,t.preserveWhitespace,0)|(r?wp:0);i?o=new ip(i.type,i.attrs,Nt.none,!0,t.topMatch||i.type.contentMatch,l):r?o=new ip(null,null,Nt.none,!0,null,l):o=new ip(e.schema.topNodeType,null,Nt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&eE?"full":this.localPreserveWS||(i.options&of)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],c=e.previousSibling;(!l||c&&c.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),c;KI.hasOwnProperty(l)&&this.parser.normalizeLists&&_9(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(h?h.ignore:E9.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let d,m=this.needsBlock;if(GI.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),d=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=h&&h.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),d&&this.sync(o),this.needsBlock=m}else{let d=this.readStyles(e,t);d&&this.addElementByRule(e,h,d,h.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let c=void 0;;){let h=this.parser.matchStyle(o,l,this,c);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(d=>!h.clearMark(d)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)c=h;else break}}return t}addElementByRule(e,t,r,i){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let h=this.enter(l,t.attrs||null,r,t.preserveWhitespace);h&&(o=!0,r=h)}else{let h=this.parser.schema.marks[t.mark];r=r.concat(h.create(t.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,r,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,r),this.findAround(e,h,!1)}o&&this.sync(c)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,c=i==null?null:e.childNodes[i];l!=c;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t,r){let i,o;for(let l=this.open,c=0;l>=0;l--){let h=this.nodes[l],d=h.findWrapping(e);if(d&&(!i||i.length>d.length+c)&&(i=d,o=h,!d.length))break;if(h.solid){if(r)break;c+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)t=this.enterInner(i[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Nt.none;for(let c of i.concat(e.marks))(o.type?o.type.allowsMarkType(c.type):$A(c.type,e.type))&&(l=c.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let c=HA(e,o,l.options);l.options&wp&&l.content.length==0&&(c|=wp);let h=Nt.none;return r=r.filter(d=>(l.type?l.type.allowsMarkType(d.type):$A(d.type,e))?(h=d.addToSet(h),!1):!0),this.nodes.push(new ip(e,t,h,i,null,c)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=of)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(c,h)=>{for(;c>=0;c--){let d=t[c];if(d==""){if(c==t.length-1||c==0)continue;for(;h>=o;h--)if(l(c-1,h))return!0;return!1}else{let m=h>0||h==0&&i?this.nodes[h].type:r&&h>=o?r.node(h-o).type:null;if(!m||m.name!=d&&!m.isInGroup(d))return!1;h--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function _9(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&KI.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function b9(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function qA(n){let e={};for(let t in n)e[t]=n[t];return e}function $A(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],l=c=>{o.push(c);for(let h=0;h<c.edgeCount;h++){let{type:d,next:m}=c.edge(h);if(d==e||o.indexOf(m)<0&&l(m))return!0}};if(l(i.contentMatch))return!0}}class Ul{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Yv(t).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let c=0,h=0;for(;c<o.length&&h<l.marks.length;){let d=l.marks[h];if(!this.marks[d.type.name]){h++;continue}if(!d.eq(o[c][0])||d.type.spec.spanning===!1)break;c++,h++}for(;c<o.length;)i=o.pop()[1];for(;h<l.marks.length;){let d=l.marks[h++],m=this.serializeMark(d,l.isInline,t);m&&(o.push([d,i]),i.appendChild(m.dom),i=m.contentDOM||m.dom)}}i.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Ap(Yv(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Ap(Yv(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Ap(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ul(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=GA(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return GA(e.marks)}}function GA(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Yv(n){return n.document||window.document}const KA=new WeakMap;function T9(n){let e=KA.get(n);return e===void 0&&KA.set(n,e=S9(n)),e}function S9(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Ap(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=T9(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(t=i.slice(0,l),i=i.slice(l+1));let c,h=t?n.createElementNS(t,i):n.createElement(i),d=e[1],m=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){m=2;for(let y in d)if(d[y]!=null){let v=y.indexOf(" ");v>0?h.setAttributeNS(y.slice(0,v),y.slice(v+1),d[y]):y=="style"&&h.style?h.style.cssText=d[y]:h.setAttribute(y,d[y])}}for(let y=m;y<e.length;y++){let v=e[y];if(v===0){if(y<e.length-1||y>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:_,contentDOM:T}=Ap(n,v,t,r);if(h.appendChild(_),T){if(c)throw new RangeError("Multiple content holes");c=T}}}return{dom:h,contentDOM:c}}const WI=65535,YI=Math.pow(2,16);function w9(n,e){return n+e*YI}function WA(n){return n&WI}function A9(n){return(n-(n&WI))/YI}const QI=1,XI=2,Cp=4,JI=8;class tE{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&JI)>0}get deletedBefore(){return(this.delInfo&(QI|Cp))>0}get deletedAfter(){return(this.delInfo&(XI|Cp))>0}get deletedAcross(){return(this.delInfo&Cp)>0}}class Br{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Br.empty)return Br.empty}recover(e){let t=0,r=WA(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+A9(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let h=this.ranges[c]-(this.inverted?i:0);if(h>e)break;let d=this.ranges[c+o],m=this.ranges[c+l],y=h+d;if(e<=y){let v=d?e==h?-1:e==y?1:t:t,_=h+i+(v<0?0:m);if(r)return _;let T=e==(t<0?h:y)?null:w9(c/3,e-h),A=e==h?XI:e==y?QI:Cp;return(t<0?e!=h:e!=y)&&(A|=JI),new tE(_,A,T)}i+=m-d}return r?e+i:new tE(e+i,0,null)}touches(e,t){let r=0,i=WA(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let h=this.ranges[c]-(this.inverted?r:0);if(h>e)break;let d=this.ranges[c+o],m=h+d;if(e<=m&&c==i*3)return!0;r+=this.ranges[c+l]-d}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],c=l-(this.inverted?o:0),h=l+(this.inverted?0:o),d=this.ranges[i+t],m=this.ranges[i+r];e(c,c+d,h,h+m),o+=m-d}}invert(){return new Br(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Br.empty:new Br(e<0?[0,-e,0]:[0,0,e])}}Br.empty=new Br([]);class af{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new af(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new af;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],c=l.mapResult(e,t);if(c.recover!=null){let h=this.getMirror(o);if(h!=null&&h>o&&h<this.to){o=h,e=this._maps[h].recover(c.recover);continue}}i|=c.delInfo,e=c.pos}return r?e:new tE(e,i,null)}}const Qv=Object.create(null);class rr{getMap(){return Br.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Qv[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Qv)throw new RangeError("Duplicate use of step JSON ID "+e);return Qv[e]=t,t.prototype.jsonID=e,t}}class pn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new pn(e,null)}static fail(e){return new pn(null,e)}static fromReplace(e,t,r,i){try{return pn.ok(e.replace(t,r,i))}catch(o){if(o instanceof em)return pn.fail(o.message);throw o}}}function N_(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(N_(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return ce.fromArray(r)}class Yo extends rr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new be(N_(t.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),t.openStart,t.openEnd);return pn.fromReplace(e,this.from,this.to,o)}invert(){return new wi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Yo(t.pos,r.pos,this.mark)}merge(e){return e instanceof Yo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yo(t.from,t.to,e.markFromJSON(t.mark))}}rr.jsonID("addMark",Yo);class wi extends rr{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new be(N_(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return pn.fromReplace(e,this.from,this.to,r)}invert(){return new Yo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new wi(t.pos,r.pos,this.mark)}merge(e){return e instanceof wi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new wi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new wi(t.from,t.to,e.markFromJSON(t.mark))}}rr.jsonID("removeMark",wi);class Qo extends rr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return pn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return pn.fromReplace(e,this.pos,this.pos+1,new be(ce.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Qo(this.pos,t.marks[i]);return new Qo(this.pos,this.mark)}}return new kl(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qo(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qo(t.pos,e.markFromJSON(t.mark))}}rr.jsonID("addNodeMark",Qo);class kl extends rr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return pn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return pn.fromReplace(e,this.pos,this.pos+1,new be(ce.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Qo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new kl(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new kl(t.pos,e.markFromJSON(t.mark))}}rr.jsonID("removeNodeMark",kl);class On extends rr{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&nE(e,this.from,this.to)?pn.fail("Structure replace would overwrite content"):pn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Br([this.from,this.to-this.from,this.slice.size])}invert(e){return new On(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new On(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof On)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?be.empty:new be(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new On(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?be.empty:new be(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new On(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new On(t.from,t.to,be.fromJSON(e,t.slice),!!t.structure)}}rr.jsonID("replace",On);class Dn extends rr{constructor(e,t,r,i,o,l,c=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=c}apply(e){if(this.structure&&(nE(e,this.from,this.gapFrom)||nE(e,this.gapTo,this.to)))return pn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return pn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?pn.fromReplace(e,this.from,this.to,r):pn.fail("Content does not fit in gap")}getMap(){return new Br([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Dn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new Dn(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Dn(t.from,t.to,t.gapFrom,t.gapTo,be.fromJSON(e,t.slice),t.insert,!!t.structure)}}rr.jsonID("replaceAround",Dn);function nE(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function C9(n,e,t,r){let i=[],o=[],l,c;n.doc.nodesBetween(e,t,(h,d,m)=>{if(!h.isInline)return;let y=h.marks;if(!r.isInSet(y)&&m.type.allowsMarkType(r.type)){let v=Math.max(d,e),_=Math.min(d+h.nodeSize,t),T=r.addToSet(y);for(let A=0;A<y.length;A++)y[A].isInSet(T)||(l&&l.to==v&&l.mark.eq(y[A])?l.to=_:i.push(l=new wi(v,_,y[A])));c&&c.to==v?c.to=_:o.push(c=new Yo(v,_,r))}}),i.forEach(h=>n.step(h)),o.forEach(h=>n.step(h))}function R9(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(l,c)=>{if(!l.isInline)return;o++;let h=null;if(r instanceof fg){let d=l.marks,m;for(;m=r.isInSet(d);)(h||(h=[])).push(m),d=m.removeFromSet(d)}else r?r.isInSet(l.marks)&&(h=[r]):h=l.marks;if(h&&h.length){let d=Math.min(c+l.nodeSize,t);for(let m=0;m<h.length;m++){let y=h[m],v;for(let _=0;_<i.length;_++){let T=i[_];T.step==o-1&&y.eq(i[_].style)&&(v=T)}v?(v.to=d,v.step=o):i.push({style:y,from:Math.max(c,e),to:d,step:o})}}}),i.forEach(l=>n.step(new wi(l.from,l.to,l.style)))}function O_(n,e,t,r=t.contentMatch,i=!0){let o=n.doc.nodeAt(e),l=[],c=e+1;for(let h=0;h<o.childCount;h++){let d=o.child(h),m=c+d.nodeSize,y=r.matchType(d.type);if(!y)l.push(new On(c,m,be.empty));else{r=y;for(let v=0;v<d.marks.length;v++)t.allowsMarkType(d.marks[v].type)||n.step(new wi(c,m,d.marks[v]));if(i&&d.isText&&t.whitespace!="pre"){let v,_=/\r?\n|\r/g,T;for(;v=_.exec(d.text);)T||(T=new be(ce.from(t.schema.text(" ",t.allowedMarks(d.marks))),0,0)),l.push(new On(c+v.index,c+v.index+v[0].length,T))}}c=m}if(!r.validEnd){let h=r.fillBefore(ce.empty,!0);n.replace(c,c,new be(h,0,0))}for(let h=l.length-1;h>=0;h--)n.step(l[h])}function x9(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function fc(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),l=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,l,t))return r;if(r==0||i.type.spec.isolating||!x9(i,o,l))break}return null}function k9(n,e,t){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),c=i.after(o+1),h=l,d=c,m=ce.empty,y=0;for(let T=o,A=!1;T>t;T--)A||r.index(T)>0?(A=!0,m=ce.from(r.node(T).copy(m)),y++):h--;let v=ce.empty,_=0;for(let T=o,A=!1;T>t;T--)A||i.after(T+1)<i.end(T)?(A=!0,v=ce.from(i.node(T).copy(v)),_++):d++;n.step(new Dn(h,d,l,c,new be(m.append(v),y,_),m.size-y,!0))}function D_(n,e,t=null,r=n){let i=I9(n,e),o=i&&M9(r,e);return o?i.map(YA).concat({type:e,attrs:t}).concat(o.map(YA)):null}function YA(n){return{type:n,attrs:null}}function I9(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,i,l)?o:null}function M9(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let h=(l.length?l[l.length-1]:e).contentMatch;for(let d=r;h&&d<i;d++)h=h.matchType(t.child(d).type);return!h||!h.validEnd?null:l}function N9(n,e,t){let r=ce.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let c=t[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ce.from(t[l].type.create(t[l].attrs,r))}let i=e.start,o=e.end;n.step(new Dn(i,o,i,o,new be(r,0,0),t.length,!0))}function O9(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,c)=>{let h=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,h)&&D9(n.doc,n.mapping.slice(o).map(c),r)){let d=null;if(r.schema.linebreakReplacement){let _=r.whitespace=="pre",T=!!r.contentMatch.matchType(r.schema.linebreakReplacement);_&&!T?d=!1:!_&&T&&(d=!0)}d===!1&&eM(n,l,c,o),O_(n,n.mapping.slice(o).map(c,1),r,void 0,d===null);let m=n.mapping.slice(o),y=m.map(c,1),v=m.map(c+l.nodeSize,1);return n.step(new Dn(y,v,y+1,v-1,new be(ce.from(r.create(h,null,l.marks)),0,0),1,!0)),d===!0&&ZI(n,l,c,o),!1}})}function ZI(n,e,t,r){e.forEach((i,o)=>{if(i.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(i.text);){let h=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function eM(n,e,t,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function D9(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function P9(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Dn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new be(ce.from(l),0,0),1,!0))}function $s(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,m=t-2;d>o;d--,m--){let y=i.node(d),v=i.index(d);if(y.type.spec.isolating)return!1;let _=y.content.cutByIndex(v,y.childCount),T=r&&r[m+1];T&&(_=_.replaceChild(0,T.type.create(T.attrs)));let A=r&&r[m]||y;if(!y.canReplace(v+1,y.childCount)||!A.type.validContent(_))return!1}let c=i.indexAfter(o),h=r&&r[0];return i.node(o).canReplaceWith(c,c,h?h.type:i.node(o+1).type)}function L9(n,e,t=1,r){let i=n.doc.resolve(e),o=ce.empty,l=ce.empty;for(let c=i.depth,h=i.depth-t,d=t-1;c>h;c--,d--){o=ce.from(i.node(c).copy(o));let m=r&&r[d];l=ce.from(m?m.type.create(m.attrs,l):i.node(c).copy(l))}n.step(new On(e,e,new be(o.append(l),t,t),!0))}function ba(n,e){let t=n.resolve(e),r=t.index();return tM(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function V9(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function tM(n,e){return!!(n&&e&&!n.isLeaf&&V9(n,e))}function dg(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,l,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(i+1),c++,l=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),l=r.node(i+1)),o&&!o.isTextblock&&tM(o,l)&&r.node(i).canReplace(c,c+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function U9(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(i&&l.inlineContent){let m=l.whitespace=="pre",y=!!l.contentMatch.matchType(i);m&&!y?r=!1:!m&&y&&(r=!0)}let c=n.steps.length;if(r===!1){let m=n.doc.resolve(e+t);eM(n,m.node(),m.before(),c)}l.inlineContent&&O_(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let h=n.mapping.slice(c),d=h.map(e-t);if(n.step(new On(d,h.map(e+t,-1),be.empty,!0)),r===!0){let m=n.doc.resolve(d);ZI(n,m.node(),m.before(),n.steps.length)}return n}function z9(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function nM(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,h=r.index(l)+(c>0?1:0),d=r.node(l),m=!1;if(o==1)m=d.canReplace(h,h,i);else{let y=d.contentMatchAt(h).findWrapping(i.firstChild.type);m=y&&d.canReplaceWith(h,h,y[0])}if(m)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function pg(n,e,t=e,r=be.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return rM(i,o,r)?new On(e,t,r):new B9(i,o,r).fit()}function rM(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class B9{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ce.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ce.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,c=i.depth;for(;l&&c&&o.childCount==1;)o=o.firstChild.content,l--,c--;let h=new be(o,l,c);return e>-1?new Dn(r.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||r.pos!=this.$to.pos?new On(r.pos,i.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Xv(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:h,match:d}=this.frontier[c],m,y=null;if(t==1&&(l?d.matchType(l.type)||(y=d.fillBefore(ce.from(l),!1)):o&&h.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:y};if(t==2&&l&&(m=d.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:m};if(o&&d.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Xv(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new be(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Xv(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new be(Ch(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new be(Ch(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let A=0;A<o.length;A++)this.openFrontierNode(o[A]);let l=this.unplaced,c=r?r.content:l.content,h=l.openStart-e,d=0,m=[],{match:y,type:v}=this.frontier[t];if(i){for(let A=0;A<i.childCount;A++)m.push(i.child(A));y=y.matchFragment(i)}let _=c.size+e-(l.content.size-l.openEnd);for(;d<c.childCount;){let A=c.child(d),C=y.matchType(A.type);if(!C)break;d++,(d>1||h==0||A.content.size)&&(y=C,m.push(iM(A.mark(v.allowedMarks(A.marks)),d==1?h:0,d==c.childCount?_:-1)))}let T=d==c.childCount;T||(_=-1),this.placed=Rh(this.placed,t,ce.from(m)),this.frontier[t].match=y,T&&_<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let A=0,C=c;A<_;A++){let N=C.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),C=N.content}this.unplaced=T?e==0?be.empty:new be(Ch(l.content,e-1,1),e-1,_<0?l.openEnd:e-1):new be(Ch(l.content,e,d),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Jv(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=Jv(e,t,i,r,o);if(l){for(let c=t-1;c>=0;c--){let{match:h,type:d}=this.frontier[c],m=Jv(e,c,d,h,!0);if(!m||m.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Rh(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Rh(this.placed,this.depth,ce.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ce.empty,!0);t.childCount&&(this.placed=Rh(this.placed,this.frontier.length,t))}}function Ch(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Ch(n.firstChild.content,e-1,t)))}function Rh(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Rh(n.lastChild.content,e-1,t)))}function Xv(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function iM(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,iM(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ce.empty,!0)))),n.copy(r)}function Jv(n,e,t,r,i){let o=n.node(e),l=i?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,l);return c&&!j9(t,o.content,l)?c:null}function j9(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function H9(n){return n.spec.defining||n.spec.definingForContent}function F9(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(rM(i,o,r))return n.step(new On(e,t,r));let l=oM(i,n.doc.resolve(t));l[l.length-1]==0&&l.pop();let c=-(i.depth+1);l.unshift(c);for(let v=i.depth,_=i.pos-1;v>0;v--,_--){let T=i.node(v).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;l.indexOf(v)>-1?c=v:i.before(v)==_&&l.splice(1,0,-v)}let h=l.indexOf(c),d=[],m=r.openStart;for(let v=r.content,_=0;;_++){let T=v.firstChild;if(d.push(T),_==r.openStart)break;v=T.content}for(let v=m-1;v>=0;v--){let _=d[v],T=H9(_.type);if(T&&!_.sameMarkup(i.node(Math.abs(c)-1)))m=v;else if(T||!_.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let _=(v+m+1)%(r.openStart+1),T=d[_];if(T)for(let A=0;A<l.length;A++){let C=l[(A+h)%l.length],N=!0;C<0&&(N=!1,C=-C);let H=i.node(C-1),X=i.index(C-1);if(H.canReplaceWith(X,X,T.type,T.marks))return n.replace(i.before(C),N?o.after(C):t,new be(sM(r.content,0,r.openStart,_),_,r.openEnd))}}let y=n.steps.length;for(let v=l.length-1;v>=0&&(n.replace(e,t,r),!(n.steps.length>y));v--){let _=l[v];_<0||(e=i.before(_),t=o.after(_))}}function sM(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(sM(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(ce.empty,!0))}return n}function q9(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=z9(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new be(ce.from(r),0,0))}function $9(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=oM(r,i);for(let l=0;l<o.length;l++){let c=o[l],h=l==o.length-1;if(h&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),i.end(c));if(c>0&&(h||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return n.delete(r.before(c),i.after(c))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&i.end(l)-t!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function oM(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}class Hu extends rr{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return pn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return pn.fromReplace(e,this.pos,this.pos+1,new be(ce.from(i),0,t.isLeaf?0:1))}getMap(){return Br.empty}invert(e){return new Hu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hu(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hu(t.pos,t.attr,t.value)}}rr.jsonID("attr",Hu);class lf extends rr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return pn.ok(r)}getMap(){return Br.empty}invert(e){return new lf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new lf(t.attr,t.value)}}rr.jsonID("docAttr",lf);let Xu=class extends Error{};Xu=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Xu.prototype=Object.create(Error.prototype);Xu.prototype.constructor=Xu;Xu.prototype.name="TransformError";class aM{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new af}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Xu(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=be.empty){let i=pg(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new be(ce.from(r),0,0))}delete(e,t){return this.replace(e,t,be.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return F9(this,e,t,r),this}replaceRangeWith(e,t,r){return q9(this,e,t,r),this}deleteRange(e,t){return $9(this,e,t),this}lift(e,t){return k9(this,e,t),this}join(e,t=1){return U9(this,e,t),this}wrap(e,t){return N9(this,e,t),this}setBlockType(e,t=e,r,i=null){return O9(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return P9(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Hu(e,t,r)),this}setDocAttribute(e,t){return this.step(new lf(e,t)),this}addNodeMark(e,t){return this.step(new Qo(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Nt)t.isInSet(r.marks)&&this.step(new kl(e,t));else{let i=r.marks,o,l=[];for(;o=t.isInSet(i);)l.push(new kl(e,o)),i=o.removeFromSet(i);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(e,t=1,r){return L9(this,e,t,r),this}addMark(e,t,r){return C9(this,e,t,r),this}removeMark(e,t,r){return R9(this,e,t,r),this}clearIncompatible(e,t,r){return O_(this,e,t,r),this}}const Zv=Object.create(null);class Ke{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new G9(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=be.empty){let r=t.content.lastChild,i=null;for(let c=0;c<t.openEnd;c++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:h,$to:d}=l[c],m=e.mapping.slice(o);e.replaceRange(m.map(h.pos),m.map(d.pos),c?be.empty:t),c==0&&JA(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:c}=i[o],h=e.mapping.slice(r),d=h.map(l.pos),m=h.map(c.pos);o?e.deleteRange(d,m):(e.replaceRangeWith(d,m,t),JA(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Fe(e):Mu(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=t<0?Mu(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Mu(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Fr(e.node(0))}static atStart(e){return Mu(e,e,0,0,1)||new Fr(e)}static atEnd(e){return Mu(e,e,e.content.size,e.childCount,-1)||new Fr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Zv[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Zv)throw new RangeError("Duplicate use of selection JSON ID "+e);return Zv[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Fe.between(this.$anchor,this.$head).getBookmark()}}Ke.prototype.visible=!0;class G9{constructor(e,t){this.$from=e,this.$to=t}}let QA=!1;function XA(n){!QA&&!n.parent.inlineContent&&(QA=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Fe extends Ke{constructor(e,t=e){XA(e),XA(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ke.near(r);let i=e.resolve(t.map(this.anchor));return new Fe(i.parent.inlineContent?i:r,r)}replace(e,t=be.empty){if(super.replace(e,t),t==be.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Fe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new mg(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Fe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=Ke.findFrom(t,r,!0)||Ke.findFrom(t,-r,!0);if(o)t=o.$head;else return Ke.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Ke.findFrom(e,-r,!0)||Ke.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Fe(e,t)}}Ke.jsonID("text",Fe);class mg{constructor(e,t){this.anchor=e,this.head=t}map(e){return new mg(e.map(this.anchor),e.map(this.head))}resolve(e){return Fe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ne extends Ke{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?Ke.near(o):new Ne(o)}content(){return new be(ce.from(this.node),0,0)}eq(e){return e instanceof Ne&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new P_(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ne(e.resolve(t.anchor))}static create(e,t){return new Ne(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ne.prototype.visible=!1;Ke.jsonID("node",Ne);class P_{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new mg(r,r):new P_(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ne.isSelectable(r)?new Ne(t):Ke.near(t)}}class Fr extends Ke{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=be.empty){if(t==be.empty){e.delete(0,e.doc.content.size);let r=Ke.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Fr(e)}map(e){return new Fr(e)}eq(e){return e instanceof Fr}getBookmark(){return K9}}Ke.jsonID("all",Fr);const K9={map(){return this},resolve(n){return new Fr(n)}};function Mu(n,e,t,r,i,o=!1){if(e.inlineContent)return Fe.create(n,t);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let c=e.child(l);if(c.isAtom){if(!o&&Ne.isSelectable(c))return Ne.create(n,t-(i<0?c.nodeSize:0))}else{let h=Mu(n,c,t+i,i<0?c.childCount:0,i,o);if(h)return h}t+=c.nodeSize*i}return null}function JA(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof On||i instanceof Dn))return;let o=n.mapping.maps[r],l;o.forEach((c,h,d,m)=>{l==null&&(l=m)}),n.setSelection(Ke.near(n.doc.resolve(l),t))}const ZA=1,eC=2,tC=4;class W9 extends aM{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ZA)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&ZA)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=eC,this}ensureMarks(e){return Nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&eC)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Nt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(Ke.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=tC,this}get scrolledIntoView(){return(this.updated&tC)>0}}function nC(n,e){return!e||!n?n:n.bind(e)}class xh{constructor(e,t,r){this.name=e,this.init=nC(t.init,r),this.apply=nC(t.apply,r)}}const Y9=[new xh("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new xh("selection",{init(n,e){return n.selection||Ke.atStart(e.doc)},apply(n){return n.selection}}),new xh("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new xh("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class e0{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Y9.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new xh(r.key,r.spec.state,r))})}}class Lu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let h=i?i[l].n:0,d=i?i[l].state:this,m=h<t.length&&c.spec.appendTransaction.call(c,h?t.slice(h):t,d,r);if(m&&r.filterTransaction(m,l)){if(m.setMeta("appendedTransaction",e),!i){i=[];for(let y=0;y<this.config.plugins.length;y++)i.push(y<l?{state:r,n:t.length}:{state:this,n:0})}t.push(m),r=r.applyInner(m),o=!0}i&&(i[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Lu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new W9(this)}static create(e){let t=new e0(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Lu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new e0(this.schema,e.plugins),r=t.fields,i=new Lu(t);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new e0(e.schema,e.plugins),o=new Lu(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=Ci.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=Ke.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let h=r[c],d=h.spec.state;if(h.key==l.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(t,c)){o[l.name]=d.fromJSON.call(h,e,t[c],o);return}}o[l.name]=l.init(e,o)}}),o}}function lM(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=lM(i,e,{})),t[r]=i}return t}class nn{constructor(e){this.spec=e,this.props={},e.props&&lM(e.props,this,this.props),this.key=e.key?e.key.key:uM("plugin")}getState(e){return e[this.key]}}const t0=Object.create(null);function uM(n){return n in t0?n+"$"+ ++t0[n]:(t0[n]=0,n+"$")}class Ln{constructor(e="key"){this.key=uM(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Fn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Ju=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let rE=null;const zs=function(n,e,t){let r=rE||(rE=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Q9=function(){rE=null},Il=function(n,e,t,r){return t&&(rC(n,e,t,r,-1)||rC(n,e,t,r,1))},X9=/^(img|br|input|textarea|hr)$/i;function rC(n,e,t,r,i){for(var o;;){if(n==t&&e==r)return!0;if(e==(i<0?0:hi(n))){let l=n.parentNode;if(!l||l.nodeType!=1||kf(n)||X9.test(n.nodeName)||n.contentEditable=="false")return!1;e=Fn(n)+(i<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else n=l,e=i<0?hi(n):0}else return!1}}function hi(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function J9(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=hi(n)}else if(n.parentNode&&!kf(n))e=Fn(n),n=n.parentNode;else return null}}function Z9(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!kf(n))e=Fn(n)+1,n=n.parentNode;else return null}}function e5(n,e,t){for(let r=e==0,i=e==hi(n);r||i;){if(n==t)return!0;let o=Fn(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==hi(n)}}function kf(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const gg=function(n){return n.focusNode&&Il(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function sl(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function t5(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function n5(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(hi(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(hi(r.startContainer),r.startOffset)}}}const ls=typeof navigator<"u"?navigator:null,iC=typeof document<"u"?document:null,Ta=ls&&ls.userAgent||"",iE=/Edge\/(\d+)/.exec(Ta),cM=/MSIE \d/.exec(Ta),sE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ta),Sr=!!(cM||sE||iE),ia=cM?document.documentMode:sE?+sE[1]:iE?+iE[1]:0,fi=!Sr&&/gecko\/(\d+)/i.test(Ta);fi&&+(/Firefox\/(\d+)/.exec(Ta)||[0,0])[1];const oE=!Sr&&/Chrome\/(\d+)/.exec(Ta),tr=!!oE,hM=oE?+oE[1]:0,lr=!Sr&&!!ls&&/Apple Computer/.test(ls.vendor),Zu=lr&&(/Mobile\/\w+/.test(Ta)||!!ls&&ls.maxTouchPoints>2),li=Zu||(ls?/Mac/.test(ls.platform):!1),r5=ls?/Win/.test(ls.platform):!1,Hs=/Android \d/.test(Ta),If=!!iC&&"webkitFontSmoothing"in iC.documentElement.style,i5=If?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function s5(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Ps(n,e){return typeof n=="number"?n:n[e]}function o5(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function sC(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=Ju(l);continue}let c=l,h=c==o.body,d=h?s5(o):o5(c),m=0,y=0;if(e.top<d.top+Ps(r,"top")?y=-(d.top-e.top+Ps(i,"top")):e.bottom>d.bottom-Ps(r,"bottom")&&(y=e.bottom-e.top>d.bottom-d.top?e.top+Ps(i,"top")-d.top:e.bottom-d.bottom+Ps(i,"bottom")),e.left<d.left+Ps(r,"left")?m=-(d.left-e.left+Ps(i,"left")):e.right>d.right-Ps(r,"right")&&(m=e.right-d.right+Ps(i,"right")),m||y)if(h)o.defaultView.scrollBy(m,y);else{let _=c.scrollLeft,T=c.scrollTop;y&&(c.scrollTop+=y),m&&(c.scrollLeft+=m);let A=c.scrollLeft-_,C=c.scrollTop-T;e={left:e.left-A,top:e.top-C,right:e.right-A,bottom:e.bottom-C}}let v=h?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:Ju(l)}}function a5(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=n.root.elementFromPoint(o,l);if(!c||c==n.dom||!n.dom.contains(c))continue;let h=c.getBoundingClientRect();if(h.top>=t-20){r=c,i=h.top;break}}return{refDOM:r,refTop:i,stack:fM(n.dom)}}function fM(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Ju(r));return e}function l5({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;dM(t,r==0?0:r-e)}function dM(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Au=null;function u5(n){if(n.setActive)return n.setActive();if(Au)return n.focus(Au);let e=fM(n);n.focus(Au==null?{get preventScroll(){return Au={preventScroll:!0},!0}}:void 0),Au||(Au=!1,dM(e,0))}function pM(n,e){let t,r=2e8,i,o=0,l=e.top,c=e.top,h,d;for(let m=n.firstChild,y=0;m;m=m.nextSibling,y++){let v;if(m.nodeType==1)v=m.getClientRects();else if(m.nodeType==3)v=zs(m).getClientRects();else continue;for(let _=0;_<v.length;_++){let T=v[_];if(T.top<=l&&T.bottom>=c){l=Math.max(T.bottom,l),c=Math.min(T.top,c);let A=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(A<r){t=m,r=A,i=A&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,m.nodeType==1&&A&&(o=y+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!h&&T.left<=e.left&&T.right>=e.left&&(h=m,d={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(o=y+1)}}return!t&&h&&(t=h,i=d,r=0),t&&t.nodeType==3?c5(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:pM(t,i)}function c5(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Po(r,1);if(o.top!=o.bottom&&L_(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function L_(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function h5(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function f5(n,e,t){let{node:r,offset:i}=pM(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function d5(n,e,t,r){let i=-1;for(let o=e,l=!1;o!=n.dom;){let c=n.docView.nearestDesc(o,!0),h;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((h=c.dom.getBoundingClientRect()).width||h.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!l&&h.left>r.left||h.top>r.top?i=c.posBefore:(!l&&h.right<r.left||h.bottom<r.top)&&(i=c.posAfter),l=!0),!c.contentDOM&&i<0&&!c.node.isText))return(c.node.isBlock?r.top<(h.top+h.bottom)/2:r.left<(h.left+h.right)/2)?c.posBefore:c.posAfter;o=c.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function mM(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let l=n.childNodes[o];if(l.nodeType==1){let c=l.getClientRects();for(let h=0;h<c.length;h++){let d=c[h];if(L_(e,d))return mM(l,e,d)}}if((o=(o+1)%r)==i)break}return n}function p5(n,e){let t=n.dom.ownerDocument,r,i=0,o=n5(t,e.left,e.top);o&&({node:r,offset:i}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),c;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let d=n.dom.getBoundingClientRect();if(!L_(e,d)||(l=mM(n.dom,e,d),!l))return null}if(lr)for(let d=l;r&&d;d=Ju(d))d.draggable&&(r=void 0);if(l=h5(l,e),r){if(fi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let m=r.childNodes[i],y;m.nodeName=="IMG"&&(y=m.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&i++}let d;If&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=d5(n,r,i,e))}c==null&&(c=f5(n,l,e));let h=n.docView.nearestDesc(l,!0);return{pos:c,inside:h?h.posAtStart-h.border:-1}}function oC(n){return n.top<n.bottom||n.left<n.right}function Po(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(oC(r))return r}return Array.prototype.find.call(t,oC)||n.getBoundingClientRect()}const m5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function gM(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=If||fi;if(r.nodeType==3)if(l&&(m5.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let h=Po(zs(r,i,i),t);if(fi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Po(zs(r,i-1,i-1),-1);if(d.top==h.top){let m=Po(zs(r,i,i+1),-1);if(m.top!=h.top)return yh(m,m.left<d.left)}}return h}else{let h=i,d=i,m=t<0?1:-1;return t<0&&!i?(d++,m=-1):t>=0&&i==r.nodeValue.length?(h--,m=1):t<0?h--:d++,yh(Po(zs(r,h,d),m),m<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==hi(r))){let h=r.childNodes[i-1];if(h.nodeType==1)return n0(h.getBoundingClientRect(),!1)}if(o==null&&i<hi(r)){let h=r.childNodes[i];if(h.nodeType==1)return n0(h.getBoundingClientRect(),!0)}return n0(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==hi(r))){let h=r.childNodes[i-1],d=h.nodeType==3?zs(h,hi(h)-(l?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(d)return yh(Po(d,1),!1)}if(o==null&&i<hi(r)){let h=r.childNodes[i];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let d=h?h.nodeType==3?zs(h,0,l?0:1):h.nodeType==1?h:null:null;if(d)return yh(Po(d,-1),!0)}return yh(Po(r.nodeType==3?zs(r):r,-t),t>=0)}function yh(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function n0(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function yM(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function g5(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return yM(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let l=gM(n,i.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=zs(c,0,c.nodeValue.length).getClientRects();else continue;for(let d=0;d<h.length;d++){let m=h[d];if(m.bottom>m.top+1&&(t=="up"?l.top-m.top>(m.bottom-l.top)*2:m.bottom-l.bottom>(l.bottom-m.top)*2))return!1}}return!0})}const y5=/[\u0590-\u08ac]/;function v5(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,c=n.domSelection();return c?!y5.test(r.parent.textContent)||!c.modify?t=="left"||t=="backward"?o:l:yM(n,e,()=>{let{focusNode:h,focusOffset:d,anchorNode:m,anchorOffset:y}=n.domSelectionRange(),v=c.caretBidiLevel;c.modify("move",t,"character");let _=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:T,focusOffset:A}=n.domSelectionRange(),C=T&&!_.contains(T.nodeType==1?T:T.parentNode)||h==T&&d==A;try{c.collapse(m,y),h&&(h!=m||d!=y)&&c.extend&&c.extend(h,d)}catch{}return v!=null&&(c.caretBidiLevel=v),C}):r.pos==r.start()||r.pos==r.end()}let aC=null,lC=null,uC=!1;function E5(n,e,t){return aC==e&&lC==t?uC:(aC=e,lC=t,uC=t=="up"||t=="down"?g5(n,e,t):v5(n,e,t))}const di=0,cC=1,ll=2,us=3;class Mf{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=di,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Fn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let c=i.children[l];if(c.size){i=c;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],c=o+l.size;if(c>e||l instanceof EM){i=e-o;break}o=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof vM&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?Fn(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?Fn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,c=0;;c++){let h=this.children[c],d=l+h.size;if(i==-1&&e<=d){let m=l+h.border;if(e>=m&&t<=d-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,m);e=l;for(let y=c;y>0;y--){let v=this.children[y-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=Fn(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(d>t||c==this.children.length-1)){t=d;for(let m=c+1;m<this.children.length;m++){let y=this.children[m];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){o=Fn(y.dom);break}t+=y.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=d}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let _=0,T=0;_<this.children.length;_++){let A=this.children[_],C=T+A.size;if(o>T&&l<C)return A.setSelection(e-T-A.border,t-T-A.border,r,i);T=C}let c=this.domFromPos(e,e?-1:1),h=t==e?c:this.domFromPos(t,t?-1:1),d=r.root.getSelection(),m=r.domSelectionRange(),y=!1;if((fi||lr)&&e==t){let{node:_,offset:T}=c;if(_.nodeType==3){if(y=!!(T&&_.nodeValue[T-1]==`
`),y&&T==_.nodeValue.length)for(let A=_,C;A;A=A.parentNode){if(C=A.nextSibling){C.nodeName=="BR"&&(c=h={node:C.parentNode,offset:Fn(C)+1});break}let N=A.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let A=_.childNodes[T-1];y=A&&(A.nodeName=="BR"||A.contentEditable=="false")}}if(fi&&m.focusNode&&m.focusNode!=h.node&&m.focusNode.nodeType==1){let _=m.focusNode.childNodes[m.focusOffset];_&&_.contentEditable=="false"&&(i=!0)}if(!(i||y&&lr)&&Il(c.node,c.offset,m.anchorNode,m.anchorOffset)&&Il(h.node,h.offset,m.focusNode,m.focusOffset))return;let v=!1;if((d.extend||e==t)&&!(y&&fi)){d.collapse(c.node,c.offset);try{e!=t&&d.extend(h.node,h.offset),v=!0}catch{}}if(!v){if(e>t){let T=c;c=h,h=T}let _=document.createRange();_.setEnd(h.node,h.offset),_.setStart(c.node,c.offset),d.removeAllRanges(),d.addRange(_)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let c=r+o.border,h=l-o.border;if(e>=c&&t<=h){this.dirty=e==r||t==l?ll:cC,e==c&&t==h&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=us:o.markDirty(e-c,t-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ll:us}r=l}this.dirty=ll}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?ll:cC;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class vM extends Mf{constructor(e,t,r,i){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==di&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class _5 extends Mf{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ml extends Mf{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],l=o&&o(t,i,r);return(!l||!l.dom)&&(l=Ul.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ml(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&us||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=us&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=di){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=di}}slice(e,t,r){let i=Ml.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=lE(o,t,l,r)),e>0&&(o=lE(o,0,e,r));for(let c=0;c<o.length;c++)o[c].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class sa extends Mf{constructor(e,t,r,i,o,l,c,h,d){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(e,t,r,i,o,l){let c=o.nodeViews[t.type.name],h,d=c&&c(t,o,()=>{if(!h)return l;if(h.parent)return h.parent.posBeforeChild(h)},r,i),m=d&&d.dom,y=d&&d.contentDOM;if(t.isText){if(!m)m=document.createTextNode(t.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:y}=Ul.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),t.type.spec.draggable&&(m.draggable=!0));let v=m;return m=TM(m,r,t),d?h=new b5(e,t,r,i,m,y||null,v,d,o,l+1):t.isText?new yg(e,t,r,i,m,v,o):new sa(e,t,r,i,m,y||null,v,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ce.empty)}return e}matchesNode(e,t,r){return this.dirty==di&&e.eq(this.node)&&im(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,c=o&&o.pos<0,h=new S5(this,l&&l.node,e);C5(this.node,this.innerDeco,(d,m,y)=>{d.spec.marks?h.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!y&&h.syncToMarks(m==this.node.childCount?Nt.none:this.node.child(m).marks,r,e),h.placeWidget(d,e,i)},(d,m,y,v)=>{h.syncToMarks(d.marks,r,e);let _;h.findNodeMatch(d,m,y,v)||c&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(_=h.findIndexWithChild(o.node))>-1&&h.updateNodeAt(d,m,y,_,e)||h.updateNextNode(d,m,y,e,v,i)||h.addNode(d,m,y,e,i),i+=d.nodeSize}),h.syncToMarks([],r,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==ll)&&(l&&this.protectLocalComposition(e,l),_M(this.contentDOM,this.children,e),Zu&&R5(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Fe)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,c=x5(this.node.content,l,r-t,i-t);return c<0?null:{node:o,pos:c,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new _5(this,o,t,i);e.input.compositionNodes.push(l),this.children=lE(this.children,r,r+i.length,e,l)}update(e,t,r,i){return this.dirty==us||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=di}updateOuterDeco(e){if(im(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=bM(this.dom,this.nodeDOM,aE(this.outerDeco,this.node,t),aE(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function hC(n,e,t,r,i){TM(r,e,n);let o=new sa(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class yg extends sa{constructor(e,t,r,i,o,l,c){super(e,t,r,i,o,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==us||this.dirty!=di&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=di||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=di,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new yg(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=us)}get domAtom(){return!1}isText(e){return this.node.text==e}}class EM extends Mf{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==di&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class b5 extends sa{constructor(e,t,r,i,o,l,c,h,d,m){super(e,t,r,i,o,l,c,d,m),this.spec=h}update(e,t,r,i){if(this.dirty==us)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _M(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],c=l.dom;if(c.parentNode==n){for(;c!=r;)r=fC(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(c,r);if(l instanceof Ml){let h=r?r.previousSibling:n.lastChild;_M(l.contentDOM,l.children,t),r=h?h.nextSibling:n.firstChild}}for(;r;)r=fC(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Uh=function(n){n&&(this.nodeName=n)};Uh.prototype=Object.create(null);const ul=[new Uh];function aE(n,e,t){if(n.length==0)return ul;let r=t?ul[0]:new Uh,i=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&i.push(r=new Uh(l.nodeName));for(let c in l){let h=l[c];h!=null&&(t&&i.length==1&&i.push(r=new Uh(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+h:c=="style"?r.style=(r.style?r.style+";":"")+h:c!="nodeName"&&(r[c]=h))}}}return i}function bM(n,e,t,r){if(t==ul&&r==ul)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],c=t[o];if(o){let h;c&&c.nodeName==l.nodeName&&i!=n&&(h=i.parentNode)&&h.nodeName.toLowerCase()==l.nodeName||(h=document.createElement(l.nodeName),h.pmIsDeco=!0,h.appendChild(i),c=ul[0]),i=h}T5(i,c||ul[0],l)}return i}function T5(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function TM(n,e,t){return bM(n,n,ul,aE(e,t,n.nodeType!=1))}function im(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function fC(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class S5{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=w5(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;i<l&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=di,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let d=this.top.children[h];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){c=h;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let h=Ml.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let c=this.index,h=Math.min(this.top.children.length,c+5);c<h;c++){let d=this.top.children[c];if(d.matchesNode(e,t,r)&&!this.preMatch.matched.has(d)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let l=this.top.children[i];return l.dirty==us&&l.dom==l.contentDOM&&(l.dirty=ll),l.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,l){for(let c=this.index;c<this.top.children.length;c++){let h=this.top.children[c];if(h instanceof sa){let d=this.preMatch.matched.get(h);if(d!=null&&d!=o)return!1;let m=h.dom,y,v=this.isLocked(m)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=us&&im(t,h.outerDeco));if(!v&&h.update(e,t,r,i))return this.destroyBetween(this.index,c),h.dom!=m&&(this.changed=!0),this.index++,!0;if(!v&&(y=this.recreateWrapper(h,e,t,r,i,l)))return this.destroyBetween(this.index,c),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=ll,y.updateChildren(i,l+1),y.dirty=di),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!im(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let c=sa.create(this.top,t,r,i,o,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let h of c.children)h.parent=c}return e.destroy(),c}addNode(e,t,r,i,o){let l=sa.create(this.top,e,t,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new vM(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ml;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof yg)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((lr||tr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new EM(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function w5(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,l=[];e:for(;i>0;){let c;for(;;)if(r){let d=t.children[r-1];if(d instanceof Ml)t=d,r=d.children.length;else{c=d,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let h=c.node;if(h){if(h!=n.child(i-1))break;--i,o.set(c,i),l.push(c)}}return{index:i,matched:o,matches:l.reverse()}}function A5(n,e){return n.type.side-e.type.side}function C5(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let d=0;d<n.childCount;d++){let m=n.child(d);r(m,i,e.forChild(o,m),d),o+=m.nodeSize}return}let l=0,c=[],h=null;for(let d=0;;){let m,y;for(;l<i.length&&i[l].to==o;){let C=i[l++];C.widget&&(m?(y||(y=[m])).push(C):m=C)}if(m)if(y){y.sort(A5);for(let C=0;C<y.length;C++)t(y[C],d,!!h)}else t(m,d,!!h);let v,_;if(h)_=-1,v=h,h=null;else if(d<n.childCount)_=d,v=n.child(d++);else break;for(let C=0;C<c.length;C++)c[C].to<=o&&c.splice(C--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)c.push(i[l++]);let T=o+v.nodeSize;if(v.isText){let C=T;l<i.length&&i[l].from<C&&(C=i[l].from);for(let N=0;N<c.length;N++)c[N].to<C&&(C=c[N].to);C<T&&(h=v.cut(C-o),v=v.cut(0,C-o),T=C,_=-1)}else for(;l<i.length&&i[l].to<T;)l++;let A=v.isInline&&!v.isLeaf?c.filter(C=>!C.inline):c.slice();r(v,A,e.forChild(o,v),_),o=T}}function R5(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function x5(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let l=n.child(i++),c=o;if(o+=l.nodeSize,!l.isText)continue;let h=l.text;for(;i<n.childCount;){let d=n.child(i++);if(o+=d.nodeSize,!d.isText)break;h+=d.text}if(o>=t){if(o>=r&&h.slice(r-e.length-c,r-c)==e)return r-e.length;let d=c<r?h.lastIndexOf(e,r-c-1):-1;if(d>=0&&d+e.length+c>=t)return c+d;if(t==r&&h.length>=r+e.length-c&&h.slice(r-c,r-c+e.length)==e)return r}}return-1}function lE(n,e,t,r,i){let o=[];for(let l=0,c=0;l<n.length;l++){let h=n[l],d=c,m=c+=h.size;d>=t||m<=e?o.push(h):(d<e&&o.push(h.slice(0,e-d,r)),i&&(o.push(i),i=void 0),m>t&&o.push(h.slice(t-d,h.size,r)))}return o}function V_(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let c=r.resolve(l),h,d;if(gg(t)){for(h=l;i&&!i.node;)i=i.parent;let y=i.node;if(i&&y.isAtom&&Ne.isSelectable(y)&&i.parent&&!(y.isInline&&e5(t.focusNode,t.focusOffset,i.dom))){let v=i.posBefore;d=new Ne(l==v?c:r.resolve(v))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=l,v=l;for(let _=0;_<t.rangeCount;_++){let T=t.getRangeAt(_);y=Math.min(y,n.docView.posFromDOM(T.startContainer,T.startOffset,1)),v=Math.max(v,n.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(y<0)return null;[h,l]=v==n.state.selection.anchor?[v,y]:[y,v],c=r.resolve(l)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let m=r.resolve(h);if(!d){let y=e=="pointer"||n.state.selection.head<c.pos&&!o?1:-1;d=U_(n,m,c,y)}return d}function SM(n){return n.editable?n.hasFocus():AM(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Gs(n,e=!1){let t=n.state.selection;if(wM(n,t),!!SM(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&tr){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Il(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)I5(n);else{let{anchor:r,head:i}=t,o,l;dC&&!(t instanceof Fe)&&(t.$from.parent.inlineContent||(o=pC(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=pC(n,t.to))),n.docView.setSelection(r,i,n,e),dC&&(o&&mC(o),l&&mC(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&k5(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const dC=lr||tr&&hM<63;function pC(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(lr&&i&&i.contentEditable=="false")return r0(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return r0(i);if(o)return r0(o)}}function r0(n){return n.contentEditable="true",lr&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function mC(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function k5(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!SM(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function I5(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,Fn(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&Sr&&ia<=11&&(t.disabled=!0,t.disabled=!1)}function wM(n,e){if(e instanceof Ne){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(gC(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else gC(n)}function gC(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function U_(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Fe.between(e,t,r)}function yC(n){return n.editable&&!n.hasFocus()?!1:AM(n)}function AM(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function M5(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Il(e.node,e.offset,t.anchorNode,t.anchorOffset)}function uE(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&Ke.findFrom(o,e)}function Lo(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function vC(n,e,t){let r=n.state.selection;if(r instanceof Fe)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Lo(n,new Fe(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=uE(n.state,e);return i&&i instanceof Ne?Lo(n,i):!1}else if(!(li&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let c=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=n.docView.descAt(c))&&!l.contentDOM?Ne.isSelectable(o)?Lo(n,new Ne(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):If?Lo(n,new Fe(n.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ne&&r.node.isInline)return Lo(n,new Fe(e>0?r.$to:r.$from));{let i=uE(n.state,e);return i?Lo(n,i):!1}}}function sm(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function zh(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Cu(n,e){return e<0?N5(n):O5(n)}function N5(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,l=!1;for(fi&&t.nodeType==1&&r<sm(t)&&zh(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let c=t.childNodes[r-1];if(zh(c,-1))i=t,o=--r;else if(c.nodeType==3)t=c,r=t.nodeValue.length;else break}}else{if(CM(t))break;{let c=t.previousSibling;for(;c&&zh(c,-1);)i=t.parentNode,o=Fn(c),c=c.previousSibling;if(c)t=c,r=sm(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?cE(n,t,r):i&&cE(n,i,o)}function O5(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=sm(t),o,l;for(;;)if(r<i){if(t.nodeType!=1)break;let c=t.childNodes[r];if(zh(c,1))o=t,l=++r;else break}else{if(CM(t))break;{let c=t.nextSibling;for(;c&&zh(c,1);)o=c.parentNode,l=Fn(c)+1,c=c.nextSibling;if(c)t=c,r=0,i=sm(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&cE(n,o,l)}function CM(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function D5(n,e){for(;n&&e==n.childNodes.length&&!kf(n);)e=Fn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function P5(n,e){for(;n&&!e&&!kf(n);)e=Fn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function cE(n,e,t){if(e.nodeType!=3){let o,l;(l=D5(e,t))?(e=l,t=0):(o=P5(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(gg(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Gs(n)},50)}function EC(n,e){let t=n.state.doc.resolve(e);if(!(tr||r5)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function _C(n,e,t){let r=n.state.selection;if(r instanceof Fe&&!r.empty||t.indexOf("s")>-1||li&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=uE(n.state,e);if(l&&l instanceof Ne)return Lo(n,l)}if(!i.parent.inlineContent){let l=e<0?i:o,c=r instanceof Fr?Ke.near(l,e):Ke.findFrom(l,e);return c?Lo(n,c):!1}return!1}function bC(n,e){if(!(n.state.selection instanceof Fe))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function TC(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function L5(n){if(!lr||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;TC(n,r,"true"),setTimeout(()=>TC(n,r,"false"),20)}return!1}function V5(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function U5(n,e){let t=e.keyCode,r=V5(e);if(t==8||li&&t==72&&r=="c")return bC(n,-1)||Cu(n,-1);if(t==46&&!e.shiftKey||li&&t==68&&r=="c")return bC(n,1)||Cu(n,1);if(t==13||t==27)return!0;if(t==37||li&&t==66&&r=="c"){let i=t==37?EC(n,n.state.selection.from)=="ltr"?-1:1:-1;return vC(n,i,r)||Cu(n,i)}else if(t==39||li&&t==70&&r=="c"){let i=t==39?EC(n,n.state.selection.from)=="ltr"?1:-1:1;return vC(n,i,r)||Cu(n,i)}else{if(t==38||li&&t==80&&r=="c")return _C(n,-1,r)||Cu(n,-1);if(t==40||li&&t==78&&r=="c")return L5(n)||_C(n,1,r)||Cu(n,1);if(r==(li?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function z_(n,e){n.someProp("transformCopied",_=>{e=_(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let _=r.firstChild;t.push(_.type.name,_.attrs!=_.type.defaultAttrs?_.attrs:null),r=_.content}let l=n.someProp("clipboardSerializer")||Ul.fromSchema(n.state.schema),c=NM(),h=c.createElement("div");h.appendChild(l.serializeFragment(r,{document:c}));let d=h.firstChild,m,y=0;for(;d&&d.nodeType==1&&(m=MM[d.nodeName.toLowerCase()]);){for(let _=m.length-1;_>=0;_--){let T=c.createElement(m[_]);for(;h.firstChild;)T.appendChild(h.firstChild);h.appendChild(T),y++}d=h.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${o}${y?` -${y}`:""} ${JSON.stringify(t)}`);let v=n.someProp("clipboardTextSerializer",_=>_(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:v,slice:e}}function RM(n,e,t,r,i){let o=i.parent.type.spec.code,l,c;if(!t&&!e)return null;let h=!!e&&(r||o||!t);if(h){if(n.someProp("transformPastedText",v=>{e=v(e,o||r,n)}),o)return c=new be(ce.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",v=>{c=v(c,n,!0)}),c;let y=n.someProp("clipboardTextParser",v=>v(e,i,r,n));if(y)c=y;else{let v=i.marks(),{schema:_}=n.state,T=Ul.fromSchema(_);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(A=>{let C=l.appendChild(document.createElement("p"));A&&C.appendChild(T.serializeNode(_.text(A,v)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),l=H5(t),If&&F5(l);let d=l&&l.querySelector("[data-pm-slice]"),m=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let y=+m[3];y>0;y--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||ra.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(h||m),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!z5.test(v.parentNode.nodeName)?{ignore:!0}:null}})),m)c=q5(SC(c,+m[1],+m[2]),m[4]);else if(c=be.maxOpen(B5(c.content,i),!0),c.openStart||c.openEnd){let y=0,v=0;for(let _=c.content.firstChild;y<c.openStart&&!_.type.spec.isolating;y++,_=_.firstChild);for(let _=c.content.lastChild;v<c.openEnd&&!_.type.spec.isolating;v++,_=_.lastChild);c=SC(c,y,v)}return n.someProp("transformPasted",y=>{c=y(c,n,h)}),c}const z5=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function B5(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(c=>{if(!l)return;let h=i.findWrapping(c.type),d;if(!h)return l=null;if(d=l.length&&o.length&&kM(h,o,c,l[l.length-1],0))l[l.length-1]=d;else{l.length&&(l[l.length-1]=IM(l[l.length-1],o.length));let m=xM(c,h);l.push(m),i=i.matchType(m.type),o=h}}),l)return ce.from(l)}return n}function xM(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ce.from(n));return n}function kM(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=kM(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(ce.from(xM(t,n,i+1))))}}function IM(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,IM(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ce.empty,!0);return n.copy(t.append(r))}function hE(n,e,t,r,i,o){let l=e<0?n.firstChild:n.lastChild,c=l.content;return n.childCount>1&&(o=0),i<r-1&&(c=hE(c,e,t,r,i+1,o)),i>=t&&(c=e<0?l.contentMatchAt(0).fillBefore(c,o<=i).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(ce.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(c))}function SC(n,e,t){return e<n.openStart&&(n=new be(hE(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new be(hE(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const MM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let wC=null;function NM(){return wC||(wC=document.implementation.createHTMLDocument("title"))}let i0=null;function j5(n){let e=window.trustedTypes;return e?(i0||(i0=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),i0.createHTML(n)):n}function H5(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=NM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&MM[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=j5(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function F5(n){let e=n.querySelectorAll(tr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function q5(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:l}=n;for(let c=r.length-2;c>=0;c-=2){let h=t.nodes[r[c]];if(!h||h.hasRequiredAttrs())break;i=ce.from(h.create(r[c+1],i)),o++,l++}return new be(i,o,l)}const ur={},cr={},$5={touchstart:!0,touchmove:!0};class G5{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function K5(n){for(let e in ur){let t=ur[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{Y5(n,r)&&!B_(n,r)&&(n.editable||!(r.type in cr))&&t(n,r)},$5[e]?{passive:!0}:void 0)}lr&&n.dom.addEventListener("input",()=>null),fE(n)}function Xo(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function W5(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function fE(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>B_(n,r))})}function B_(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function Y5(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function Q5(n,e){!B_(n,e)&&ur[e.type]&&(n.editable||!(e.type in cr))&&ur[e.type](n,e)}cr.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!DM(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Hs&&tr&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Zu&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,sl(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||U5(n,t)?t.preventDefault():Xo(n,"key")};cr.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};cr.keypress=(n,e)=>{let t=e;if(DM(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||li&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Fe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,i,o))&&n.dispatch(o()),t.preventDefault()}};function vg(n){return{left:n.clientX,top:n.clientY}}function X5(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function j_(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,c=>l>o.depth?c(n,t,o.nodeAfter,o.before(l),i,!0):c(n,t,o.node(l),o.before(l),i,!1)))return!0;return!1}function Fu(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function J5(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ne.isSelectable(r)?(Fu(n,new Ne(t)),!0):!1}function Z5(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Ne&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let c=l>o.depth?o.nodeAfter:o.node(l);if(Ne.isSelectable(c)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(l);break}}return i!=null?(Fu(n,Ne.create(n.state.doc,i)),!0):!1}function ej(n,e,t,r,i){return j_(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?Z5(n,t):J5(n,t))}function tj(n,e,t,r){return j_(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function nj(n,e,t,r){return j_(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||rj(n,t,r)}function rj(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Fu(n,Fe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),c=i.before(o);if(l.inlineContent)Fu(n,Fe.create(r,c+1,c+1+l.content.size));else if(Ne.isSelectable(l))Fu(n,Ne.create(r,c));else continue;return!0}}function H_(n){return om(n)}const OM=li?"metaKey":"ctrlKey";ur.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=H_(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&X5(t,n.input.lastClick)&&!t[OM]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=n.posAtCoords(vg(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new ij(n,l,t,!!r)):(o=="doubleClick"?tj:nj)(n,l.pos,l.inside,t)?t.preventDefault():Xo(n,"pointer"))};class ij{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[OM],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let m=e.state.doc.resolve(t.pos);o=m.parent,l=m.depth?m.before():0}const c=i?null:r.target,h=c?e.docView.nearestDesc(c,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:d}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||d instanceof Ne&&d.from<=l&&d.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&fi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Gs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(vg(e))),this.updateAllowDefault(e),this.allowDefault||!t?Xo(this.view,"pointer"):ej(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||lr&&this.mightDrag&&!this.mightDrag.node.isAtom||tr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Fu(this.view,Ke.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Xo(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ur.touchstart=n=>{n.input.lastTouch=Date.now(),H_(n),Xo(n,"pointer")};ur.touchmove=n=>{n.input.lastTouch=Date.now(),Xo(n,"pointer")};ur.contextmenu=n=>H_(n);function DM(n,e){return n.composing?!0:lr&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const sj=Hs?5e3:-1;cr.compositionstart=cr.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Fe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),om(n,!0),n.markCursor=null;else if(om(n,!e.selection.empty),fi&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let c=n.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}n.input.composing=!0}PM(n,sj)};cr.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,PM(n,20))};function PM(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>om(n),e))}function LM(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=aj());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function oj(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=J9(e.focusNode,e.focusOffset),r=Z9(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function aj(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function om(n,e=!1){if(!(Hs&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),LM(n),e||n.docView&&n.docView.dirty){let t=V_(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function lj(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const uf=Sr&&ia<15||Zu&&i5<604;ur.copy=cr.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=uf?null:t.clipboardData,l=r.content(),{dom:c,text:h}=z_(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",h)):lj(n,c),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function uj(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function cj(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?cf(n,r.value,null,i,e):cf(n,r.textContent,r.innerHTML,i,e)},50)}function cf(n,e,t,r,i){let o=RM(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,i,o||be.empty)))return!0;if(!o)return!1;let l=uj(o),c=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function VM(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}cr.paste=(n,e)=>{let t=e;if(n.composing&&!Hs)return;let r=uf?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&cf(n,VM(r),r.getData("text/html"),i,t)?t.preventDefault():cj(n,t)};class UM{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const hj=li?"altKey":"ctrlKey";function zM(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[hj]}ur.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(vg(t)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof Ne?i.to-1:i.to))){if(r&&r.mightDrag)l=Ne.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(l=Ne.create(n.state.doc,y.posBefore))}}let c=(l||n.state.selection).content(),{dom:h,text:d,slice:m}=z_(n,c);(!t.dataTransfer.files.length||!tr||hM>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(uf?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",uf||t.dataTransfer.setData("text/plain",d),n.dragging=new UM(m,zM(n,t),l)};ur.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};cr.dragover=cr.dragenter=(n,e)=>e.preventDefault();cr.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(vg(t));if(!i)return;let o=n.state.doc.resolve(i.pos),l=r&&r.slice;l?n.someProp("transformPasted",T=>{l=T(l,n,!1)}):l=RM(n,VM(t.dataTransfer),uf?null:t.dataTransfer.getData("text/html"),!1,o);let c=!!(r&&zM(n,t));if(n.someProp("handleDrop",T=>T(n,t,l||be.empty,c))){t.preventDefault();return}if(!l)return;t.preventDefault();let h=l?nM(n.state.doc,o.pos,l):o.pos;h==null&&(h=o.pos);let d=n.state.tr;if(c){let{node:T}=r;T?T.replace(d):d.deleteSelection()}let m=d.mapping.map(h),y=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,v=d.doc;if(y?d.replaceRangeWith(m,m,l.content.firstChild):d.replaceRange(m,m,l),d.doc.eq(v))return;let _=d.doc.resolve(m);if(y&&Ne.isSelectable(l.content.firstChild)&&_.nodeAfter&&_.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new Ne(_));else{let T=d.mapping.map(h);d.mapping.maps[d.mapping.maps.length-1].forEach((A,C,N,H)=>T=H),d.setSelection(U_(n,_,d.doc.resolve(T)))}n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))};ur.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Gs(n)},20))};ur.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};ur.beforeinput=(n,e)=>{if(tr&&Hs&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,sl(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in cr)ur[n]=cr[n];function hf(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class am{constructor(e,t){this.toDOM=e,this.spec=t||gl,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:l}=e.mapResult(t.from+i,this.side<0?-1:1);return l?null:new ar(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof am&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&hf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class oa{constructor(e,t){this.attrs=e,this.spec=t||gl}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new ar(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof oa&&hf(this.attrs,e.attrs)&&hf(this.spec,e.spec)}static is(e){return e.type instanceof oa}destroy(){}}class F_{constructor(e,t){this.attrs=e,this.spec=t||gl}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let l=e.mapResult(t.to+i,-1);return l.deleted||l.pos<=o.pos?null:new ar(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof F_&&hf(this.attrs,e.attrs)&&hf(this.spec,e.spec)}destroy(){}}class ar{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new ar(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new ar(e,e,new am(t,r))}static inline(e,t,r,i){return new ar(e,t,new oa(r,i))}static node(e,t,r,i){return new ar(e,t,new F_(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof oa}get widget(){return this.type instanceof am}}const Nu=[],gl={};class Gt{constructor(e,t){this.local=e.length?e:Nu,this.children=t.length?t:Nu}static create(e,t){return t.length?lm(t,e,0,gl):Jn}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=t&&c.to>=e&&(!o||o(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,t-c,r,i+c,o)}}map(e,t,r){return this==Jn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||gl)}mapInner(e,t,r,i,o){let l;for(let c=0;c<this.local.length;c++){let h=this.local[c].map(e,r,i);h&&h.type.valid(t,h)?(l||(l=[])).push(h):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?fj(this.children,l||[],e,t,r,i,o):l?new Gt(l.sort(yl),Nu):Jn}add(e,t){return t.length?this==Jn?Gt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((c,h)=>{let d=h+r,m;if(m=jM(t,c,d)){for(i||(i=this.children.slice());o<i.length&&i[o]<h;)o+=3;i[o]==h?i[o+2]=i[o+2].addInner(c,m,d+1):i.splice(o,0,h,h+c.nodeSize,lm(m,c,d+1,gl)),o+=3}});let l=BM(o?HM(t):t,-r);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new Gt(l.length?this.local.concat(l).sort(yl):this.local,i||this.children)}remove(e){return e.length==0||this==Jn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,c=r[o]+t,h=r[o+1]+t;for(let m=0,y;m<e.length;m++)(y=e[m])&&y.from>c&&y.to<h&&(e[m]=null,(l||(l=[])).push(y));if(!l)continue;r==this.children&&(r=this.children.slice());let d=r[o+2].removeInner(l,c+1);d!=Jn?r[o+2]=d:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let c=0;c<i.length;c++)i[c].eq(l,t)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Gt(i,r):Jn}forChild(e,t){if(this==Jn)return this;if(t.isLeaf)return Gt.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let o=e+1,l=o+t.content.size;for(let c=0;c<this.local.length;c++){let h=this.local[c];if(h.from<l&&h.to>o&&h.type instanceof oa){let d=Math.max(o,h.from)-o,m=Math.min(l,h.to)-o;d<m&&(i||(i=[])).push(h.copy(d,m))}}if(i){let c=new Gt(i.sort(yl),Nu);return r?new $o([c,r]):c}return r||Jn}eq(e){if(this==e)return!0;if(!(e instanceof Gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return q_(this.localsInner(e))}localsInner(e){if(this==Jn)return Nu;if(e.inlineContent||!this.local.some(oa.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof oa||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Gt.empty=new Gt([],[]);Gt.removeOverlap=q_;const Jn=Gt.empty;class $o{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,gl));return $o.from(r)}forChild(e,t){if(t.isLeaf)return Gt.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=Jn&&(o instanceof $o?r=r.concat(o.members):r.push(o))}return $o.from(r)}eq(e){if(!(e instanceof $o)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?q_(r?t:t.sort(yl)):Nu}static from(e){switch(e.length){case 0:return Jn;case 1:return e[0];default:return new $o(e.every(t=>t instanceof Gt)?e:e.reduce((t,r)=>t.concat(r instanceof Gt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function fj(n,e,t,r,i,o,l){let c=n.slice();for(let d=0,m=o;d<t.maps.length;d++){let y=0;t.maps[d].forEach((v,_,T,A)=>{let C=A-T-(_-v);for(let N=0;N<c.length;N+=3){let H=c[N+1];if(H<0||v>H+m-y)continue;let X=c[N]+m-y;_>=X?c[N+1]=v<=X?-2:-1:v>=m&&C&&(c[N]+=C,c[N+1]+=C)}y+=C}),m=t.maps[d].map(m,-1)}let h=!1;for(let d=0;d<c.length;d+=3)if(c[d+1]<0){if(c[d+1]==-2){h=!0,c[d+1]=-1;continue}let m=t.map(n[d]+o),y=m-i;if(y<0||y>=r.content.size){h=!0;continue}let v=t.map(n[d+1]+o,-1),_=v-i,{index:T,offset:A}=r.content.findIndex(y),C=r.maybeChild(T);if(C&&A==y&&A+C.nodeSize==_){let N=c[d+2].mapInner(t,C,m+1,n[d]+o+1,l);N!=Jn?(c[d]=y,c[d+1]=_,c[d+2]=N):(c[d+1]=-2,h=!0)}else h=!0}if(h){let d=dj(c,n,e,t,i,o,l),m=lm(d,r,0,l);e=m.local;for(let y=0;y<c.length;y+=3)c[y+1]<0&&(c.splice(y,3),y-=3);for(let y=0,v=0;y<m.children.length;y+=3){let _=m.children[y];for(;v<c.length&&c[v]<_;)v+=3;c.splice(v,0,m.children[y],m.children[y+1],m.children[y+2])}}return new Gt(e.sort(yl),c)}function BM(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new ar(i.from+e,i.to+e,i.type))}return t}function dj(n,e,t,r,i,o,l){function c(h,d){for(let m=0;m<h.local.length;m++){let y=h.local[m].map(r,i,d);y?t.push(y):l.onRemove&&l.onRemove(h.local[m].spec)}for(let m=0;m<h.children.length;m+=3)c(h.children[m+2],h.children[m]+d+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&c(n[h+2],e[h]+o+1);return t}function jM(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((i||(i=[])).push(l),n[o]=null);return i}function HM(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function lm(n,e,t,r){let i=[],o=!1;e.forEach((c,h)=>{let d=jM(n,c,h+t);if(d){o=!0;let m=lm(d,c,t+h+1,r);m!=Jn&&i.push(h,h+c.nodeSize,m)}});let l=BM(o?HM(n):n,-t).sort(yl);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||i.length?new Gt(l,i):Jn}function yl(n,e){return n.from-e.from||n.to-e.to}function q_(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),AC(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),AC(e,i,r.copy(o.from,r.to)));break}}}return e}function AC(n,e,t){for(;e<n.length&&yl(t,n[e])>0;)e++;n.splice(e,0,t)}function s0(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Jn&&e.push(r)}),n.cursorWrapper&&e.push(Gt.create(n.state.doc,[n.cursorWrapper.deco])),$o.from(e)}const pj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mj=Sr&&ia<=11;class gj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class yj{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Sr&&ia<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),mj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,pj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(yC(this.view)){if(this.suppressingSelectionUpdates)return Gs(this.view);if(Sr&&ia<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Il(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=Ju(o))t.add(o);for(let o=e.anchorNode;o;o=Ju(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&yC(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,c=!1,h=[];if(e.editable)for(let m=0;m<t.length;m++){let y=this.registerMutation(t[m],h);y&&(o=o<0?y.from:Math.min(y.from,o),l=l<0?y.to:Math.max(y.to,l),y.typeOver&&(c=!0))}if(fi&&h.length){let m=h.filter(y=>y.nodeName=="BR");if(m.length==2){let[y,v]=m;y.parentNode&&y.parentNode.parentNode==v.parentNode?v.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let v of m){let _=v.parentNode;_&&_.nodeName=="LI"&&(!y||_j(e,y)!=_)&&v.remove()}}}let d=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&gg(r)&&(d=V_(e))&&d.eq(Ke.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gs(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),vj(e)),this.handleDOMChange(o,l,c,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Gs(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let y=e.addedNodes[m];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Sr&&ia<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:y,nextSibling:v}=e.addedNodes[m];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(i=y),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(o=v)}let l=i&&i.parentNode==e.target?Fn(i)+1:0,c=r.localPosFromDOM(e.target,l,-1),h=o&&o.parentNode==e.target?Fn(o):e.target.childNodes.length,d=r.localPosFromDOM(e.target,h,1);return{from:c,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let CC=new WeakMap,RC=!1;function vj(n){if(!CC.has(n)&&(CC.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=fi,RC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),RC=!0}}function xC(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Il(l.node,l.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function Ej(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return xC(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?xC(n,t):null}function _j(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function bj(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:l,to:c}=n.docView.parseRange(e,t),h=n.domSelectionRange(),d,m=h.anchorNode;if(m&&n.dom.contains(m.nodeType==1?m:m.parentNode)&&(d=[{node:m,offset:h.anchorOffset}],gg(h)||d.push({node:h.focusNode,offset:h.focusOffset})),tr&&n.input.lastKeyCode===8)for(let C=o;C>i;C--){let N=r.childNodes[C-1],H=N.pmViewDesc;if(N.nodeName=="BR"&&!H){o=C;break}if(!H||H.size)break}let y=n.state.doc,v=n.someProp("domParser")||ra.fromSchema(n.state.schema),_=y.resolve(l),T=null,A=v.parse(r,{topNode:_.parent,topMatch:_.parent.contentMatchAt(_.index()),topOpen:!0,from:i,to:o,preserveWhitespace:_.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:Tj,context:_});if(d&&d[0].pos!=null){let C=d[0].pos,N=d[1]&&d[1].pos;N==null&&(N=C),T={anchor:C+l,head:N+l}}return{doc:A,sel:T,from:l,to:c}}function Tj(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(lr&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||lr&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wj(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let x=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,M=V_(n,x);if(M&&!n.state.selection.eq(M)){if(tr&&Hs&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",z=>z(n,sl(13,"Enter"))))return;let O=n.state.tr.setSelection(M);x=="pointer"?O.setMeta("pointer",!0):x=="key"&&O.scrollIntoView(),o&&O.setMeta("composition",o),n.dispatch(O)}return}let l=n.state.doc.resolve(e),c=l.sharedDepth(t);e=l.before(c+1),t=n.state.doc.resolve(t).after(c+1);let h=n.state.selection,d=bj(n,e,t),m=n.state.doc,y=m.slice(d.from,d.to),v,_;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(v=n.state.selection.to,_="end"):(v=n.state.selection.from,_="start"),n.input.lastKeyCode=null;let T=Rj(y.content,d.doc.content,d.from,v,_);if(T&&n.input.domChangeCount++,(Zu&&n.input.lastIOSEnter>Date.now()-225||Hs)&&i.some(x=>x.nodeType==1&&!Sj.test(x.nodeName))&&(!T||T.endA>=T.endB)&&n.someProp("handleKeyDown",x=>x(n,sl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!T)if(r&&h instanceof Fe&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))T={start:h.from,endA:h.to,endB:h.to};else{if(d.sel){let x=kC(n,n.state.doc,d.sel);if(x&&!x.eq(n.state.selection)){let M=n.state.tr.setSelection(x);o&&M.setMeta("composition",o),n.dispatch(M)}}return}n.state.selection.from<n.state.selection.to&&T.start==T.endB&&n.state.selection instanceof Fe&&(T.start>n.state.selection.from&&T.start<=n.state.selection.from+2&&n.state.selection.from>=d.from?T.start=n.state.selection.from:T.endA<n.state.selection.to&&T.endA>=n.state.selection.to-2&&n.state.selection.to<=d.to&&(T.endB+=n.state.selection.to-T.endA,T.endA=n.state.selection.to)),Sr&&ia<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>d.from&&d.doc.textBetween(T.start-d.from-1,T.start-d.from+1)==" "&&(T.start--,T.endA--,T.endB--);let A=d.doc.resolveNoCache(T.start-d.from),C=d.doc.resolveNoCache(T.endB-d.from),N=m.resolve(T.start),H=A.sameParent(C)&&A.parent.inlineContent&&N.end()>=T.endA,X;if((Zu&&n.input.lastIOSEnter>Date.now()-225&&(!H||i.some(x=>x.nodeName=="DIV"||x.nodeName=="P"))||!H&&A.pos<d.doc.content.size&&(!A.sameParent(C)||!A.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(A.pos,C.pos,"",""))&&(X=Ke.findFrom(d.doc.resolve(A.pos+1),1,!0))&&X.head>A.pos)&&n.someProp("handleKeyDown",x=>x(n,sl(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>T.start&&Cj(m,T.start,T.endA,A,C)&&n.someProp("handleKeyDown",x=>x(n,sl(8,"Backspace")))){Hs&&tr&&n.domObserver.suppressSelectionUpdates();return}tr&&T.endB==T.start&&(n.input.lastChromeDelete=Date.now()),Hs&&!H&&A.start()!=C.start()&&C.parentOffset==0&&A.depth==C.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==T.endA&&(T.endB-=2,C=d.doc.resolveNoCache(T.endB-d.from),setTimeout(()=>{n.someProp("handleKeyDown",function(x){return x(n,sl(13,"Enter"))})},20));let ie=T.start,te=T.endA,ge=x=>{let M=x||n.state.tr.replace(ie,te,d.doc.slice(T.start-d.from,T.endB-d.from));if(d.sel){let O=kC(n,M.doc,d.sel);O&&!(tr&&n.composing&&O.empty&&(T.start!=T.endB||n.input.lastChromeDelete<Date.now()-100)&&(O.head==ie||O.head==M.mapping.map(te)-1)||Sr&&O.empty&&O.head==ie)&&M.setSelection(O)}return o&&M.setMeta("composition",o),M.scrollIntoView()},k;if(H){if(A.pos==C.pos){Sr&&ia<=11&&A.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Gs(n),20));let x=ge(n.state.tr.delete(ie,te)),M=m.resolve(T.start).marksAcross(m.resolve(T.endA));M&&x.ensureMarks(M),n.dispatch(x)}else if(T.endA==T.endB&&(k=Aj(A.parent.content.cut(A.parentOffset,C.parentOffset),N.parent.content.cut(N.parentOffset,T.endA-N.start())))){let x=ge(n.state.tr);k.type=="add"?x.addMark(ie,te,k.mark):x.removeMark(ie,te,k.mark),n.dispatch(x)}else if(A.parent.child(A.index()).isText&&A.index()==C.index()-(C.textOffset?0:1)){let x=A.parent.textBetween(A.parentOffset,C.parentOffset),M=()=>ge(n.state.tr.insertText(x,ie,te));n.someProp("handleTextInput",O=>O(n,ie,te,x,M))||n.dispatch(M())}}else n.dispatch(ge())}function kC(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:U_(n,e.resolve(t.anchor),e.resolve(t.head))}function Aj(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,l,c,h;for(let m=0;m<r.length;m++)i=r[m].removeFromSet(i);for(let m=0;m<t.length;m++)o=t[m].removeFromSet(o);if(i.length==1&&o.length==0)c=i[0],l="add",h=m=>m.mark(c.addToSet(m.marks));else if(i.length==0&&o.length==1)c=o[0],l="remove",h=m=>m.mark(c.removeFromSet(m.marks));else return null;let d=[];for(let m=0;m<e.childCount;m++)d.push(h(e.child(m)));if(ce.from(d).eq(n))return{mark:c,type:l}}function Cj(n,e,t,r,i){if(t-e<=i.pos-r.pos||o0(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let c=o.nodeAfter;return c!=null&&t==e+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(o0(o,!0,!0));return!l.parent.isTextblock||l.pos>t||o0(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function o0(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Rj(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:c}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let h=Math.max(0,o-Math.min(l,c));r-=l+h-o}if(l<o&&n.size<e.size){let h=r<=o&&r>=l?o-r:0;o-=h,o&&o<e.size&&IC(e.textBetween(o-1,o+1))&&(o+=h?1:-1),c=o+(c-l),l=o}else if(c<o){let h=r<=o&&r>=c?o-r:0;o-=h,o&&o<n.size&&IC(n.textBetween(o-1,o+1))&&(o+=h?1:-1),l=o+(l-c),c=o}return{start:o,endA:l,endB:c}}function IC(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class FM{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new G5,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(PC),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=OC(this),NC(this),this.nodeViews=DC(this),this.docView=hC(this.state.doc,MC(this),s0(this),this.dom,this),this.domObserver=new yj(this,(r,i,o,l)=>wj(this,r,i,o,l)),this.domObserver.start(),K5(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&fE(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(PC),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(LM(this),l=!0),this.state=e;let c=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let _=DC(this);kj(_,this.nodeViews)&&(this.nodeViews=_,o=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&fE(this),this.editable=OC(this),NC(this);let h=s0(this),d=MC(this),m=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",y=o||!this.docView.matchesNode(e.doc,d,h);(y||!e.selection.eq(i.selection))&&(l=!0);let v=m=="preserve"&&l&&this.dom.style.overflowAnchor==null&&a5(this);if(l){this.domObserver.stop();let _=y&&(Sr||tr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&xj(i.selection,e.selection);if(y){let T=tr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=oj(this)),(o||!this.docView.update(e.doc,d,h,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=hC(e.doc,d,h,this.dom,this)),T&&!this.trackWrites&&(_=!0)}_||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&M5(this))?Gs(this,_):(wM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():v&&l5(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ne){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&sC(this,t.getBoundingClientRect(),e)}else sC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new UM(e.slice,e.move,i<0?void 0:Ne.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(i=t?t(c):c))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let c=o[l].props[e];if(c!=null&&(i=t?t(c):c))return i}}hasFocus(){if(Sr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&u5(this.dom),Gs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return p5(this,e)}coordsAtPos(e,t=1){return gM(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return E5(this,t||this.state,e)}pasteHTML(e,t){return cf(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return cf(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return z_(this,e)}destroy(){this.docView&&(W5(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],s0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Q9())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Q5(this,e)}domSelectionRange(){let e=this.domSelection();return e?lr&&this.root.nodeType===11&&t5(this.dom.ownerDocument)==this.dom&&Ej(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}FM.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function MC(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[ar.node(0,n.state.doc.content.size,e)]}function NC(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:ar.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function OC(n){return!n.someProp("editable",e=>e(n.state)===!1)}function xj(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function DC(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function kj(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function PC(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ma={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},um={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Ij=typeof navigator<"u"&&/Mac/.test(navigator.platform),Mj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var qn=0;qn<10;qn++)ma[48+qn]=ma[96+qn]=String(qn);for(var qn=1;qn<=24;qn++)ma[qn+111]="F"+qn;for(var qn=65;qn<=90;qn++)ma[qn]=String.fromCharCode(qn+32),um[qn]=String.fromCharCode(qn);for(var a0 in ma)um.hasOwnProperty(a0)||(um[a0]=ma[a0]);function Nj(n){var e=Ij&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||Mj&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?um:ma)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Oj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Dj=typeof navigator<"u"&&/Win/.test(navigator.platform);function Pj(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,l;for(let c=0;c<e.length-1;c++){let h=e[c];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))Oj?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function Lj(n){let e=Object.create(null);for(let t in n)e[Pj(t)]=n[t];return e}function l0(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Vj(n){return new nn({props:{handleKeyDown:qM(n)}})}function qM(n){let e=Lj(n);return function(t,r){let i=Nj(r),o,l=e[l0(i,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=e[l0(i,r,!1)];if(c&&c(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Dj&&r.ctrlKey&&r.altKey)&&(o=ma[r.keyCode])&&o!=i){let c=e[l0(o,r)];if(c&&c(t.state,t.dispatch,t))return!0}}return!1}}const $_=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function $M(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const GM=(n,e,t)=>{let r=$M(n,t);if(!r)return!1;let i=G_(r);if(!i){let l=r.blockRange(),c=l&&fc(l);return c==null?!1:(e&&e(n.tr.lift(l,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(tN(n,i,e,-1))return!0;if(r.parent.content.size==0&&(ec(o,"end")||Ne.isSelectable(o)))for(let l=r.depth;;l--){let c=pg(n.doc,r.before(l),r.after(l),be.empty);if(c&&c.slice.size<c.to-c.from){if(e){let h=n.tr.step(c);h.setSelection(ec(o,"end")?Ke.findFrom(h.doc.resolve(h.mapping.map(i.pos,-1)),-1):Ne.create(h.doc,i.pos-o.nodeSize)),e(h.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},Uj=(n,e,t)=>{let r=$M(n,t);if(!r)return!1;let i=G_(r);return i?KM(n,i,e):!1},zj=(n,e,t)=>{let r=YM(n,t);if(!r)return!1;let i=K_(r);return i?KM(n,i,e):!1};function KM(n,e,t){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let m=i.lastChild;if(!m)return!1;i=m}let l=e.nodeAfter,c=l,h=e.pos+1;for(;!c.isTextblock;h++){if(c.type.spec.isolating)return!1;let m=c.firstChild;if(!m)return!1;c=m}let d=pg(n.doc,o,h,be.empty);if(!d||d.from!=o||d instanceof On&&d.slice.size>=h-o)return!1;if(t){let m=n.tr.step(d);m.setSelection(Fe.create(m.doc,o)),t(m.scrollIntoView())}return!0}function ec(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const WM=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=G_(r)}let l=o&&o.nodeBefore;return!l||!Ne.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ne.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function G_(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function YM(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const QM=(n,e,t)=>{let r=YM(n,t);if(!r)return!1;let i=K_(r);if(!i)return!1;let o=i.nodeAfter;if(tN(n,i,e,1))return!0;if(r.parent.content.size==0&&(ec(o,"start")||Ne.isSelectable(o))){let l=pg(n.doc,r.before(),r.after(),be.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=n.tr.step(l);c.setSelection(ec(o,"start")?Ke.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):Ne.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},XM=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=K_(r)}let l=o&&o.nodeAfter;return!l||!Ne.isSelectable(l)?!1:(e&&e(n.tr.setSelection(Ne.create(n.doc,o.pos)).scrollIntoView()),!0)};function K_(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Bj=(n,e)=>{let t=n.selection,r=t instanceof Ne,i;if(r){if(t.node.isTextblock||!ba(n.doc,t.from))return!1;i=t.from}else if(i=dg(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(Ne.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},jj=(n,e)=>{let t=n.selection,r;if(t instanceof Ne){if(t.node.isTextblock||!ba(n.doc,t.to))return!1;r=t.to}else if(r=dg(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},Hj=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&fc(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},JM=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function W_(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Fj=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),l=W_(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let c=t.after(),h=n.tr.replaceWith(c,c,l.createAndFill());h.setSelection(Ke.near(h.doc.resolve(c),1)),e(h.scrollIntoView())}return!0},ZM=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Fr||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=W_(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=n.tr.insert(l,o.createAndFill());c.setSelection(Fe.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},eN=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if($s(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&fc(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function qj(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Ne&&e.selection.node.isBlock)return!r.parentOffset||!$s(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,c,h=!1,d=!1;for(let _=r.depth;;_--)if(r.node(_).isBlock){h=r.end(_)==r.pos+(r.depth-_),d=r.start(_)==r.pos-(r.depth-_),c=W_(r.node(_-1).contentMatchAt(r.indexAfter(_-1))),o.unshift(h&&c?{type:c}:null),l=_;break}else{if(_==1)return!1;o.unshift(null)}let m=e.tr;(e.selection instanceof Fe||e.selection instanceof Fr)&&m.deleteSelection();let y=m.mapping.map(r.pos),v=$s(m.doc,y,o.length,o);if(v||(o[0]=c?{type:c}:null,v=$s(m.doc,y,o.length,o)),!v)return!1;if(m.split(y,o.length,o),!h&&d&&r.node(l).type!=c){let _=m.mapping.map(r.before(l)),T=m.doc.resolve(_);c&&r.node(l-1).canReplaceWith(T.index(),T.index()+1,c)&&m.setNodeMarkup(m.mapping.map(r.before(l)),c)}return t&&t(m.scrollIntoView()),!0}}const $j=qj(),Gj=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(Ne.create(n.doc,i))),!0)};function Kj(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||ba(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function tN(n,e,t,r){let i=e.nodeBefore,o=e.nodeAfter,l,c,h=i.type.spec.isolating||o.type.spec.isolating;if(!h&&Kj(n,e,t))return!0;let d=!h&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(l=(c=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&c.matchType(l[0]||o.type).validEnd){if(t){let _=e.pos+o.nodeSize,T=ce.empty;for(let N=l.length-1;N>=0;N--)T=ce.from(l[N].create(null,T));T=ce.from(i.copy(T));let A=n.tr.step(new Dn(e.pos-1,_,e.pos,_,new be(T,1,0),l.length,!0)),C=A.doc.resolve(_+2*l.length);C.nodeAfter&&C.nodeAfter.type==i.type&&ba(A.doc,C.pos)&&A.join(C.pos),t(A.scrollIntoView())}return!0}let m=o.type.spec.isolating||r>0&&h?null:Ke.findFrom(e,1),y=m&&m.$from.blockRange(m.$to),v=y&&fc(y);if(v!=null&&v>=e.depth)return t&&t(n.tr.lift(y,v).scrollIntoView()),!0;if(d&&ec(o,"start",!0)&&ec(i,"end")){let _=i,T=[];for(;T.push(_),!_.isTextblock;)_=_.lastChild;let A=o,C=1;for(;!A.isTextblock;A=A.firstChild)C++;if(_.canReplace(_.childCount,_.childCount,A.content)){if(t){let N=ce.empty;for(let X=T.length-1;X>=0;X--)N=ce.from(T[X].copy(N));let H=n.tr.step(new Dn(e.pos-T.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new be(N,T.length,0),0,!0));t(H.scrollIntoView())}return!0}}return!1}function nN(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(Fe.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const Wj=nN(-1),Yj=nN(1);function Qj(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,l=i.blockRange(o),c=l&&D_(l,n,e);return c?(r&&r(t.tr.wrap(l,c).scrollIntoView()),!0):!1}}function LC(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:c}}=t.selection.ranges[o];t.doc.nodesBetween(l,c,(h,d)=>{if(i)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)i=!0;else{let m=t.doc.resolve(d),y=m.index();i=m.parent.canReplaceWith(y,y+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:h}}=t.selection.ranges[l];o.setBlockType(c,h,n,e)}r(o.scrollIntoView())}return!0}}function Y_(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}Y_($_,GM,WM);Y_($_,QM,XM);Y_(JM,ZM,eN,$j);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Xj(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,l=i.blockRange(o);if(!l)return!1;let c=r?t.tr:null;return Jj(c,l,n,e)?(r&&r(c.scrollIntoView()),!0):!1}}function Jj(n,e,t,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=l.resolve(e.start-2);o=new nm(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new nm(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let c=D_(o,t,r,e);return c?(n&&Zj(n,e,c,i,t),!0):!1}function Zj(n,e,t,r,i){let o=ce.empty;for(let m=t.length-1;m>=0;m--)o=ce.from(t[m].type.create(t[m].attrs,o));n.step(new Dn(e.start-(r?2:0),e.end,e.start,e.end,new be(o,0,0),t.length,!0));let l=0;for(let m=0;m<t.length;m++)t[m].type==i&&(l=m+1);let c=t.length-l,h=e.start+t.length-(r?2:0),d=e.parent;for(let m=e.startIndex,y=e.endIndex,v=!0;m<y;m++,v=!1)!v&&$s(n.doc,h,c)&&(n.split(h,c),h+=2*c),h+=d.child(m).nodeSize;return n}function eH(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?tH(e,t,n,o):nH(e,t,o):!0:!1}}function tH(n,e,t,r){let i=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new Dn(o-1,l,o,l,new be(ce.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new nm(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=fc(r);if(c==null)return!1;i.lift(r,c);let h=i.doc.resolve(i.mapping.map(o,-1)-1);return ba(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),e(i.scrollIntoView()),!0}function nH(n,e,t){let r=n.tr,i=t.parent;for(let _=t.end,T=t.endIndex-1,A=t.startIndex;T>A;T--)_-=i.child(T).nodeSize,r.delete(_-1,_+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let c=t.startIndex==0,h=t.endIndex==i.childCount,d=o.node(-1),m=o.index(-1);if(!d.canReplace(m+(c?0:1),m+1,l.content.append(h?ce.empty:ce.from(i))))return!1;let y=o.pos,v=y+l.nodeSize;return r.step(new Dn(y-(c?1:0),v+(h?1:0),y+1,v-1,new be((c?ce.empty:ce.from(i.copy(ce.empty))).append(h?ce.empty:ce.from(i.copy(ce.empty))),c?0:1,h?0:1),c?0:1)),e(r.scrollIntoView()),!0}function rH(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let c=o.parent,h=c.child(l-1);if(h.type!=n)return!1;if(t){let d=h.lastChild&&h.lastChild.type==c.type,m=ce.from(d?n.create():null),y=new be(ce.from(n.create(null,ce.from(c.type.create(null,m)))),d?3:1,0),v=o.start,_=o.end;t(e.tr.step(new Dn(v-(d?3:1),_,v,_,y,1,!0)).scrollIntoView())}return!0}}var iH=Object.defineProperty,rN=(n,e)=>{for(var t in e)iH(n,t,{get:e[t],enumerable:!0})};function Eg(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,o=t.storedMarks,t}}}var _g=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:e,state:t}=this,{view:r}=e,{tr:i}=t,o=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>{const m=c(...d)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:o}=r,l=[],c=!!n,h=n||i.tr,d=()=>(!c&&e&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(h),l.every(y=>y===!0)),m={...Object.fromEntries(Object.entries(t).map(([y,v])=>[y,(...T)=>{const A=this.buildProps(h,e),C=v(...T)(A);return l.push(C),m}])),run:d};return m}createCan(n){const{rawCommands:e,state:t}=this,r=!1,i=n||t.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([c,h])=>[c,(...d)=>h(...d)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,e=!0){const{rawCommands:t,editor:r,state:i}=this,{view:o}=r,l={tr:n,editor:r,view:o,state:Eg({state:i,transaction:n}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(n,e),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(t).map(([c,h])=>[c,(...d)=>h(...d)(l)]))}};return l}},sH=class{constructor(){this.callbacks={}}on(n,e){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(e),this}emit(n,...e){const t=this.callbacks[n];return t&&t.forEach(r=>r.apply(this,e)),this}off(n,e){const t=this.callbacks[n];return t&&(e?this.callbacks[n]=t.filter(r=>r!==e):delete this.callbacks[n]),this}once(n,e){const t=(...r)=>{this.off(n,t),e.apply(this,r)};return this.on(n,t)}removeAllListeners(){this.callbacks={}}};function iN(n,e){const t=new aM(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}var sN=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&sN(r)}return n};function sp(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return sN(t)}function ff(n,e,t){if(n instanceof Ci||n instanceof ce)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ce.fromArray(n.map(c=>e.nodeFromJSON(c)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),ff("",e,t)}if(i){if(t.errorOnInvalidContent){let l=!1,c="";const h=new $I({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(l=!0,c=typeof d=="string"?d:d.outerHTML,null)}]}})});if(t.slice?ra.fromSchema(h).parseSlice(sp(n),t.parseOptions):ra.fromSchema(h).parse(sp(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=ra.fromSchema(e);return t.slice?o.parseSlice(sp(n),t.parseOptions).content:o.parse(sp(n),t.parseOptions)}return ff("",e,t)}function dE(n,e,t={},r={}){return ff(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}function oH(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function aH(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,o)=>{t(i)&&r.push({node:i,pos:o})}),r}function lH(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function bg(n){return e=>lH(e.$from,n)}function Ie(n,e,t){return n.config[e]===void 0&&n.parent?Ie(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Ie(n.parent,e,t):null}):n.config[e]}function Q_(n){return n.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},r=Ie(e,"addExtensions",t);return r?[e,...Q_(r())]:e}).flat(10)}function X_(n,e){const t=Ul.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function oN(n){return typeof n=="function"}function wt(n,e=void 0,...t){return oN(n)?e?n.bind(e)(...t):n(...t):n}function uH(n={}){return Object.keys(n).length===0&&n.constructor===Object}function df(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function aN(n){const e=[],{nodeExtensions:t,markExtensions:r}=df(n),i=[...t,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage,extensions:i},h=Ie(l,"addGlobalAttributes",c);if(!h)return;h().forEach(m=>{m.types.forEach(y=>{Object.entries(m.attributes).forEach(([v,_])=>{e.push({type:y,name:v,attribute:{...o,..._}})})})})}),i.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage},h=Ie(l,"addAttributes",c);if(!h)return;const d=h();Object.entries(d).forEach(([m,y])=>{const v={...o,...y};typeof(v==null?void 0:v.default)=="function"&&(v.default=v.default()),v!=null&&v.isRequired&&(v==null?void 0:v.default)===void 0&&delete v.default,e.push({type:l.name,name:m,attribute:v})})}),e}function an(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?String(o).split(" "):[],h=r[i]?r[i].split(" "):[],d=c.filter(m=>!h.includes(m));r[i]=[...h,...d].join(" ")}else if(i==="style"){const c=o?o.split(";").map(m=>m.trim()).filter(Boolean):[],h=r[i]?r[i].split(";").map(m=>m.trim()).filter(Boolean):[],d=new Map;h.forEach(m=>{const[y,v]=m.split(":").map(_=>_.trim());d.set(y,v)}),c.forEach(m=>{const[y,v]=m.split(":").map(_=>_.trim());d.set(y,v)}),r[i]=Array.from(d.entries()).map(([m,y])=>`${m}: ${y}`).join("; ")}else r[i]=o}),r},{})}function cm(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>an(t,r),{})}function cH(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function VC(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const c=l.attribute.parseHTML?l.attribute.parseHTML(t):cH(t.getAttribute(l.name));return c==null?o:{...o,[l.name]:c}},{});return{...r,...i}}}}function UC(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&uH(t)?!1:t!=null))}function hH(n,e){var t;const r=aN(n),{nodeExtensions:i,markExtensions:o}=df(n),l=(t=i.find(d=>Ie(d,"topNode")))==null?void 0:t.name,c=Object.fromEntries(i.map(d=>{const m=r.filter(N=>N.type===d.name),y={name:d.name,options:d.options,storage:d.storage,editor:e},v=n.reduce((N,H)=>{const X=Ie(H,"extendNodeSchema",y);return{...N,...X?X(d):{}}},{}),_=UC({...v,content:wt(Ie(d,"content",y)),marks:wt(Ie(d,"marks",y)),group:wt(Ie(d,"group",y)),inline:wt(Ie(d,"inline",y)),atom:wt(Ie(d,"atom",y)),selectable:wt(Ie(d,"selectable",y)),draggable:wt(Ie(d,"draggable",y)),code:wt(Ie(d,"code",y)),whitespace:wt(Ie(d,"whitespace",y)),linebreakReplacement:wt(Ie(d,"linebreakReplacement",y)),defining:wt(Ie(d,"defining",y)),isolating:wt(Ie(d,"isolating",y)),attrs:Object.fromEntries(m.map(N=>{var H,X;return[N.name,{default:(H=N==null?void 0:N.attribute)==null?void 0:H.default,validate:(X=N==null?void 0:N.attribute)==null?void 0:X.validate}]}))}),T=wt(Ie(d,"parseHTML",y));T&&(_.parseDOM=T.map(N=>VC(N,m)));const A=Ie(d,"renderHTML",y);A&&(_.toDOM=N=>A({node:N,HTMLAttributes:cm(N,m)}));const C=Ie(d,"renderText",y);return C&&(_.toText=C),[d.name,_]})),h=Object.fromEntries(o.map(d=>{const m=r.filter(C=>C.type===d.name),y={name:d.name,options:d.options,storage:d.storage,editor:e},v=n.reduce((C,N)=>{const H=Ie(N,"extendMarkSchema",y);return{...C,...H?H(d):{}}},{}),_=UC({...v,inclusive:wt(Ie(d,"inclusive",y)),excludes:wt(Ie(d,"excludes",y)),group:wt(Ie(d,"group",y)),spanning:wt(Ie(d,"spanning",y)),code:wt(Ie(d,"code",y)),attrs:Object.fromEntries(m.map(C=>{var N,H;return[C.name,{default:(N=C==null?void 0:C.attribute)==null?void 0:N.default,validate:(H=C==null?void 0:C.attribute)==null?void 0:H.validate}]}))}),T=wt(Ie(d,"parseHTML",y));T&&(_.parseDOM=T.map(C=>VC(C,m)));const A=Ie(d,"renderHTML",y);return A&&(_.toDOM=C=>A({mark:C,HTMLAttributes:cm(C,m)})),[d.name,_]}));return new $I({topNode:l,nodes:c,marks:h})}function fH(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}function J_(n){return n.sort((t,r)=>{const i=Ie(t,"priority")||100,o=Ie(r,"priority")||100;return i>o?-1:i<o?1:0})}function lN(n){const e=J_(Q_(n)),t=fH(e.map(r=>r.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function uN(n,e,t){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let c="";return n.nodesBetween(r,i,(h,d,m,y)=>{var v;h.isBlock&&d>r&&(c+=o);const _=l==null?void 0:l[h.type.name];if(_)return m&&(c+=_({node:h,pos:d,parent:m,index:y,range:e})),!1;h.isText&&(c+=(v=h==null?void 0:h.text)==null?void 0:v.slice(Math.max(r,d)-d,i-d))}),c}function dH(n,e){const t={from:0,to:n.content.size};return uN(n,t,e)}function cN(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function eo(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}function hN(n,e){const t=eo(e,n.schema),{from:r,to:i,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,h=>{l.push(...h.marks)});const c=l.find(h=>h.type.name===t.name);return c?{...c.attrs}:{}}function mn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function pH(n,e){const t=mn(e,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,c=>{o.push(c)});const l=o.reverse().find(c=>c.type.name===t.name);return l?{...l.attrs}:{}}function Tg(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function fN(n,e){const t=Tg(typeof e=="string"?e:e.name,n.schema);return t==="node"?pH(n,e):t==="mark"?hN(n,e):{}}function mH(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function gH(n){const e=mH(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,l)=>l!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function dN(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((c,h)=>{l.push({from:c,to:h})});else{const{from:c,to:h}=t[o];if(c===void 0||h===void 0)return;l.push({from:c,to:h})}l.forEach(({from:c,to:h})=>{const d=e.slice(o).map(c,-1),m=e.slice(o).map(h),y=e.invert().map(d,-1),v=e.invert().map(m);r.push({oldRange:{from:y,to:v},newRange:{from:d,to:m}})})}),gH(r)}function Z_(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function hm(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Z_(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function pN(n,e,t={}){return n.find(r=>r.type===e&&hm(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function zC(n,e,t={}){return!!pN(n,e,t)}function eb(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(m=>m.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(m=>m.type===e)||(t=t||((r=i.node.marks[0])==null?void 0:r.attrs),!pN([...i.node.marks],e,t)))return;let l=i.index,c=n.start()+i.offset,h=l+1,d=c+i.node.nodeSize;for(;l>0&&zC([...n.parent.child(l-1).marks],e,t);)l-=1,c-=n.parent.child(l).nodeSize;for(;h<n.parent.childCount&&zC([...n.parent.child(h).marks],e,t);)d+=n.parent.child(h).nodeSize,h+=1;return{from:c,to:d}}function tb(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const o=t.resolve(n),l=eb(o,i.type);l&&r.push({mark:i,...l})}):t.nodesBetween(n,e,(i,o)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}var yH=(n,e,t,r=20)=>{const i=n.doc.resolve(t);let o=r,l=null;for(;o>0&&l===null;){const c=i.node(o);(c==null?void 0:c.type.name)===e?l=c:o-=1}return[l,o]};function u0(n,e){return e.nodes[n]||e.marks[n]||null}function Rp(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var vH=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,c)=>{var h,d;const m=((d=(h=i.type.spec).toText)==null?void 0:d.call(h,{node:i,pos:o,parent:l,index:c}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?m:m.slice(0,Math.max(0,r-o))}),t};function pE(n,e,t={}){const{empty:r,ranges:i}=n.selection,o=e?eo(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>o?o.name===y.type.name:!0).find(y=>hm(y.attrs,t,{strict:!1}));let l=0;const c=[];if(i.forEach(({$from:y,$to:v})=>{const _=y.pos,T=v.pos;n.doc.nodesBetween(_,T,(A,C)=>{if(!A.isText&&!A.marks.length)return;const N=Math.max(_,C),H=Math.min(T,C+A.nodeSize),X=H-N;l+=X,c.push(...A.marks.map(ie=>({mark:ie,from:N,to:H})))})}),l===0)return!1;const h=c.filter(y=>o?o.name===y.mark.type.name:!0).filter(y=>hm(y.mark.attrs,t,{strict:!1})).reduce((y,v)=>y+v.to-v.from,0),d=c.filter(y=>o?y.mark.type!==o&&y.mark.type.excludes(o):!0).reduce((y,v)=>y+v.to-v.from,0);return(h>0?h+d:h)>=l}function ga(n,e,t={}){const{from:r,to:i,empty:o}=n.selection,l=e?mn(e,n.schema):null,c=[];n.doc.nodesBetween(r,i,(y,v)=>{if(y.isText)return;const _=Math.max(r,v),T=Math.min(i,v+y.nodeSize);c.push({node:y,from:_,to:T})});const h=i-r,d=c.filter(y=>l?l.name===y.node.type.name:!0).filter(y=>hm(y.node.attrs,t,{strict:!1}));return o?!!d.length:d.reduce((y,v)=>y+v.to-v.from,0)>=h}function EH(n,e,t={}){if(!e)return ga(n,null,t)||pE(n,null,t);const r=Tg(e,n.schema);return r==="node"?ga(n,e,t):r==="mark"?pE(n,e,t):!1}var _H=(n,e)=>{const{$from:t,$to:r,$anchor:i}=n.selection;if(e){const o=bg(c=>c.type.name===e)(n.selection);if(!o)return!1;const l=n.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||t.pos!==r.pos)},bH=n=>{const{$from:e,$to:t}=n.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function BC(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function jC(n,e){const{nodeExtensions:t}=df(e),r=t.find(l=>l.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=wt(Ie(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Sg(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(o=>{i!==!1&&(Sg(o,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function mN(n){return n instanceof Ne}function gN(n){return n instanceof Fe}function cl(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function yN(n,e=null){if(!e)return null;const t=Ke.atStart(n),r=Ke.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,o=r.to;return e==="all"?Fe.create(n,cl(0,i,o),cl(n.content.size,i,o)):Fe.create(n,cl(e,i,o),cl(e,i,o))}function TH(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof On||i instanceof Dn))return;const o=n.mapping.maps[r];let l=0;o.forEach((c,h,d,m)=>{l===0&&(l=m)}),n.setSelection(Ke.near(n.doc.resolve(l),t))}var wg=class{constructor(n){this.find=n.find,this.handler=n.handler}},SH=(n,e)=>{if(Z_(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function op(n){var e;const{editor:t,from:r,to:i,text:o,rules:l,plugin:c}=n,{view:h}=t;if(h.composing)return!1;const d=h.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let m=!1;const y=vH(d)+o;return l.forEach(v=>{if(m)return;const _=SH(y,v.find);if(!_)return;const T=h.state.tr,A=Eg({state:h.state,transaction:T}),C={from:r-(_[0].length-o.length),to:i},{commands:N,chain:H,can:X}=new _g({editor:t,state:A});v.handler({state:A,range:C,match:_,commands:N,chain:H,can:X})===null||!T.steps.length||(T.setMeta(c,{transform:T,from:r,to:i,text:o}),h.dispatch(T),m=!0)}),m}function wH(n){const{editor:e,rules:t}=n,r=new nn({state:{init(){return null},apply(i,o,l){const c=i.getMeta(r);if(c)return c;const h=i.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{text:m}=h;typeof m=="string"?m=m:m=X_(ce.from(m),l.schema);const{from:y}=h,v=y+m.length;op({editor:e,from:y,to:v,text:m,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,c){return op({editor:e,from:o,to:l,text:c,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&op({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?op({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function AH(n){return Object.prototype.toString.call(n).slice(8,-1)}function ap(n){return AH(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function vN(n,e){const t={...n};return ap(n)&&ap(e)&&Object.keys(e).forEach(r=>{ap(e[r])&&ap(n[r])?t[r]=vN(n[r],e[r]):t[r]=e[r]}),t}var nb=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...wt(Ie(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...wt(Ie(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const e=this.extend({...this.config,addOptions:()=>vN(this.options,n)});return e.name=this.name,e.parent=this.parent,e}extend(n={}){const e=new this.constructor({...this.config,...n});return e.parent=this,this.child=e,e.name="name"in n?n.name:e.parent.name,e}},Sa=class EN extends nb{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new EN(t)}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(d=>(d==null?void 0:d.type.name)===t.name))return!1;const h=l.find(d=>(d==null?void 0:d.type.name)===t.name);return h&&r.removeStoredMark(h),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function CH(n){return typeof n=="number"}var RH=class{constructor(n){this.find=n.find,this.handler=n.handler}},xH=(n,e,t)=>{if(Z_(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=n,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function kH(n){const{editor:e,state:t,from:r,to:i,rule:o,pasteEvent:l,dropEvent:c}=n,{commands:h,chain:d,can:m}=new _g({editor:e,state:t}),y=[];return t.doc.nodesBetween(r,i,(_,T)=>{var A,C,N,H,X;if((C=(A=_.type)==null?void 0:A.spec)!=null&&C.code||!(_.isText||_.isTextblock||_.isInline))return;const ie=(X=(H=(N=_.content)==null?void 0:N.size)!=null?H:_.nodeSize)!=null?X:0,te=Math.max(r,T),ge=Math.min(i,T+ie);if(te>=ge)return;const k=_.isText?_.text||"":_.textBetween(te-T,ge-T,void 0,"");xH(k,o.find,l).forEach(M=>{if(M.index===void 0)return;const O=te+M.index+1,z=O+M[0].length,B={from:t.tr.mapping.map(O),to:t.tr.mapping.map(z)},D=o.handler({state:t,range:B,match:M,commands:h,chain:d,can:m,pasteEvent:l,dropEvent:c});y.push(D)})}),y.every(_=>_!==null)}var lp=null,IH=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",n),t};function MH(n){const{editor:e,rules:t}=n;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const h=({state:m,from:y,to:v,rule:_,pasteEvt:T})=>{const A=m.tr,C=Eg({state:m,transaction:A});if(!(!kH({editor:e,state:C,from:Math.max(y-1,0),to:v.b-1,rule:_,pasteEvent:T,dropEvent:c})||!A.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,A}};return t.map(m=>new nn({view(y){const v=T=>{var A;r=(A=y.dom.parentElement)!=null&&A.contains(T.target)?y.dom.parentElement:null,r&&(lp=e)},_=()=>{lp&&(lp=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",_),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",_)}}},props:{handleDOMEvents:{drop:(y,v)=>{if(o=r===y.dom.parentElement,c=v,!o){const _=lp;_!=null&&_.isEditable&&setTimeout(()=>{const T=_.state.selection;T&&_.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(y,v)=>{var _;const T=(_=v.clipboardData)==null?void 0:_.getData("text/html");return l=v,i=!!(T!=null&&T.includes("data-pm-slice")),!1}}},appendTransaction:(y,v,_)=>{const T=y[0],A=T.getMeta("uiEvent")==="paste"&&!i,C=T.getMeta("uiEvent")==="drop"&&!o,N=T.getMeta("applyPasteRules"),H=!!N;if(!A&&!C&&!H)return;if(H){let{text:te}=N;typeof te=="string"?te=te:te=X_(ce.from(te),_.schema);const{from:ge}=N,k=ge+te.length,x=IH(te);return h({rule:m,state:_,from:ge,to:{b:k},pasteEvt:x})}const X=v.doc.content.findDiffStart(_.doc.content),ie=v.doc.content.findDiffEnd(_.doc.content);if(!(!CH(X)||!ie||X===ie.b))return h({rule:m,state:_,from:X,to:ie,pasteEvt:l})}}))}var Ag=class{constructor(n,e){this.splittableMarks=[],this.editor=e,this.extensions=lN(n),this.schema=hH(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((n,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:u0(e.name,this.schema)},r=Ie(e,"addCommands",t);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return J_([...this.extensions].reverse()).map(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:u0(r.name,this.schema)},o=[],l=Ie(r,"addKeyboardShortcuts",i);let c={};if(r.type==="mark"&&Ie(r,"exitable",i)&&(c.ArrowRight=()=>Sa.handleExit({editor:n,mark:r})),l){const v=Object.fromEntries(Object.entries(l()).map(([_,T])=>[_,()=>T({editor:n})]));c={...c,...v}}const h=Vj(c);o.push(h);const d=Ie(r,"addInputRules",i);if(BC(r,n.options.enableInputRules)&&d){const v=d();if(v&&v.length){const _=wH({editor:n,rules:v}),T=Array.isArray(_)?_:[_];o.push(...T)}}const m=Ie(r,"addPasteRules",i);if(BC(r,n.options.enablePasteRules)&&m){const v=m();if(v&&v.length){const _=MH({editor:n,rules:v});o.push(..._)}}const y=Ie(r,"addProseMirrorPlugins",i);if(y){const v=y();o.push(...v)}return o}).flat()}get attributes(){return aN(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:e}=df(this.extensions);return Object.fromEntries(e.filter(t=>!!Ie(t,"addNodeView")).map(t=>{const r=this.attributes.filter(c=>c.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:mn(t.name,this.schema)},o=Ie(t,"addNodeView",i);if(!o)return[];const l=(c,h,d,m,y)=>{const v=cm(c,r);return o()({node:c,view:h,getPos:d,decorations:m,innerDecorations:y,editor:n,extension:t,HTMLAttributes:v})};return[t.name,l]}))}get markViews(){const{editor:n}=this,{markExtensions:e}=df(this.extensions);return Object.fromEntries(e.filter(t=>!!Ie(t,"addMarkView")).map(t=>{const r=this.attributes.filter(c=>c.type===t.name),i={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:eo(t.name,this.schema)},o=Ie(t,"addMarkView",i);if(!o)return[];const l=(c,h,d)=>{const m=cm(c,r);return o()({mark:c,view:h,inline:d,editor:n,extension:t,HTMLAttributes:m,updateAttributes:y=>{K7(c,n,y)}})};return[t.name,l]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(e=>[e.name,e.storage])),n.forEach(e=>{var t;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:u0(e.name,this.schema)};e.type==="mark"&&((t=wt(Ie(e,"keepOnSplit",r)))==null||t)&&this.splittableMarks.push(e.name);const i=Ie(e,"onBeforeCreate",r),o=Ie(e,"onCreate",r),l=Ie(e,"onUpdate",r),c=Ie(e,"onSelectionUpdate",r),h=Ie(e,"onTransaction",r),d=Ie(e,"onFocus",r),m=Ie(e,"onBlur",r),y=Ie(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),c&&this.editor.on("selectionUpdate",c),h&&this.editor.on("transaction",h),d&&this.editor.on("focus",d),m&&this.editor.on("blur",m),y&&this.editor.on("destroy",y)})}};Ag.resolve=lN;Ag.sort=J_;Ag.flatten=Q_;var NH={};rN(NH,{ClipboardTextSerializer:()=>bN,Commands:()=>wN,Delete:()=>AN,Drop:()=>CN,Editable:()=>RN,FocusEvents:()=>kN,Keymap:()=>IN,Paste:()=>MN,Tabindex:()=>NN,focusEventsPluginKey:()=>xN});var Ct=class _N extends nb{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new _N(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},bN=Ct.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nn({key:new Ln("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(m=>m.$from.pos)),c=Math.max(...o.map(m=>m.$to.pos)),h=cN(t);return uN(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),TN={};rN(TN,{blur:()=>OH,clearContent:()=>DH,clearNodes:()=>PH,command:()=>LH,createParagraphNear:()=>VH,cut:()=>UH,deleteCurrentNode:()=>zH,deleteNode:()=>BH,deleteRange:()=>jH,deleteSelection:()=>HH,enter:()=>FH,exitCode:()=>qH,extendMarkRange:()=>$H,first:()=>GH,focus:()=>WH,forEach:()=>YH,insertContent:()=>QH,insertContentAt:()=>JH,joinBackward:()=>t7,joinDown:()=>e7,joinForward:()=>n7,joinItemBackward:()=>r7,joinItemForward:()=>i7,joinTextblockBackward:()=>s7,joinTextblockForward:()=>o7,joinUp:()=>ZH,keyboardShortcut:()=>l7,lift:()=>u7,liftEmptyBlock:()=>c7,liftListItem:()=>h7,newlineInCode:()=>f7,resetAttributes:()=>d7,scrollIntoView:()=>p7,selectAll:()=>m7,selectNodeBackward:()=>g7,selectNodeForward:()=>y7,selectParentNode:()=>v7,selectTextblockEnd:()=>E7,selectTextblockStart:()=>_7,setContent:()=>b7,setMark:()=>S7,setMeta:()=>w7,setNode:()=>A7,setNodeSelection:()=>C7,setTextSelection:()=>R7,sinkListItem:()=>x7,splitBlock:()=>k7,splitListItem:()=>I7,toggleList:()=>M7,toggleMark:()=>N7,toggleNode:()=>O7,toggleWrap:()=>D7,undoInputRule:()=>P7,unsetAllMarks:()=>L7,unsetMark:()=>V7,updateAttributes:()=>U7,wrapIn:()=>z7,wrapInList:()=>B7});var OH=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())==null||t.removeAllRanges())}),!0),DH=(n=!0)=>({commands:e})=>e.setContent("",{emitUpdate:n}),PH=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(c,h)=>{if(c.type.isText)return;const{doc:d,mapping:m}=e,y=d.resolve(m.map(h)),v=d.resolve(m.map(h+c.nodeSize)),_=y.blockRange(v);if(!_)return;const T=fc(_);if(c.type.isTextblock){const{defaultType:A}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(_.start,A)}(T||T===0)&&e.lift(_,T)})}),!0},LH=n=>e=>n(e),VH=()=>({state:n,dispatch:e})=>ZM(n,e),UH=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new Fe(r.doc.resolve(Math.max(l-1,0)))),!0},zH=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const c=i.before(o),h=i.after(o);n.delete(c,h).scrollIntoView()}return!0}return!1},BH=n=>({tr:e,state:t,dispatch:r})=>{const i=mn(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const h=o.before(l),d=o.after(l);e.delete(h,d).scrollIntoView()}return!0}return!1},jH=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},HH=()=>({state:n,dispatch:e})=>$_(n,e),FH=()=>({commands:n})=>n.keyboardShortcut("Enter"),qH=()=>({state:n,dispatch:e})=>Fj(n,e),$H=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const o=eo(n,r.schema),{doc:l,selection:c}=t,{$from:h,from:d,to:m}=c;if(i){const y=eb(h,o,e);if(y&&y.from<=d&&y.to>=m){const v=Fe.create(l,y.from,y.to);t.setSelection(v)}}return!0},GH=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function KH(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var WH=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(rb()||KH())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!gN(t.state.selection))return l(),!0;const c=yN(i.doc,n)||t.state.selection,h=t.state.selection.eq(c);return o&&(h||i.setSelection(c),h&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},YH=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),QH=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),XH=n=>!("type"in n),JH=(n,e,t)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let c;const{selection:h}=o.state,d=N=>{o.emit("contentError",{editor:o,error:N,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},m={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{ff(e,o.schema,{parseOptions:m,errorOnInvalidContent:!0})}catch(N){d(N)}try{c=ff(e,o.schema,{parseOptions:m,errorOnInvalidContent:(l=t.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(N){return d(N),!1}let{from:y,to:v}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},_=!0,T=!0;if((XH(c)?c:[c]).forEach(N=>{N.check(),_=_?N.isText&&N.marks.length===0:!1,T=T?N.isBlock:!1}),y===v&&T){const{parent:N}=r.doc.resolve(y);N.isTextblock&&!N.type.spec.code&&!N.childCount&&(y-=1,v+=1)}let C;if(_){if(Array.isArray(e))C=e.map(N=>N.text||"").join("");else if(e instanceof ce){let N="";e.forEach(H=>{H.text&&(N+=H.text)}),C=N}else typeof e=="object"&&e&&e.text?C=e.text:C=e;r.insertText(C,y,v)}else{C=c;const N=h.$from.parentOffset===0,H=h.$from.node().isText||h.$from.node().isTextblock,X=h.$from.node().content.size>0;N&&H&&X&&(y=Math.max(0,y-1)),r.replaceWith(y,v,C)}t.updateSelection&&TH(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:y,text:C}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:y,text:C})}return!0},ZH=()=>({state:n,dispatch:e})=>Bj(n,e),e7=()=>({state:n,dispatch:e})=>jj(n,e),t7=()=>({state:n,dispatch:e})=>GM(n,e),n7=()=>({state:n,dispatch:e})=>QM(n,e),r7=()=>({state:n,dispatch:e,tr:t})=>{try{const r=dg(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},i7=()=>({state:n,dispatch:e,tr:t})=>{try{const r=dg(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},s7=()=>({state:n,dispatch:e})=>Uj(n,e),o7=()=>({state:n,dispatch:e})=>zj(n,e);function SN(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function a7(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,o,l;for(let c=0;c<e.length-1;c+=1){const h=e[c];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))rb()||SN()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}var l7=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const o=a7(n).split(/-(?!$)/),l=o.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",d=>d(t,c))});return h==null||h.steps.forEach(d=>{const m=d.map(r.mapping);m&&i&&r.maybeStep(m)}),!0},u7=(n,e={})=>({state:t,dispatch:r})=>{const i=mn(n,t.schema);return ga(t,i,e)?Hj(t,r):!1},c7=()=>({state:n,dispatch:e})=>eN(n,e),h7=n=>({state:e,dispatch:t})=>{const r=mn(n,e.schema);return eH(r)(e,t)},f7=()=>({state:n,dispatch:e})=>JM(n,e);function HC(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var d7=(n,e)=>({tr:t,state:r,dispatch:i})=>{let o=null,l=null;const c=Tg(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(o=mn(n,r.schema)),c==="mark"&&(l=eo(n,r.schema)),i&&t.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(d,m)=>{o&&o===d.type&&t.setNodeMarkup(m,void 0,HC(d.attrs,e)),l&&d.marks.length&&d.marks.forEach(y=>{l===y.type&&t.addMark(m,m+d.nodeSize,l.create(HC(y.attrs,e)))})})}),!0):!1},p7=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),m7=()=>({tr:n,dispatch:e})=>{if(e){const t=new Fr(n.doc);n.setSelection(t)}return!0},g7=()=>({state:n,dispatch:e})=>WM(n,e),y7=()=>({state:n,dispatch:e})=>XM(n,e),v7=()=>({state:n,dispatch:e})=>Gj(n,e),E7=()=>({state:n,dispatch:e})=>Yj(n,e),_7=()=>({state:n,dispatch:e})=>Wj(n,e),b7=(n,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:c})=>{const{doc:h}=o;if(r.preserveWhitespace!=="full"){const d=dE(n,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&o.replaceWith(0,h.content.size,d).setMeta("preventUpdate",!t),!0}return l&&o.setMeta("preventUpdate",!t),c.insertContentAt({from:0,to:h.content.size},n,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function T7(n,e,t){var r;const{selection:i}=e;let o=null;if(gN(i)&&(o=i.$cursor),o){const c=(r=n.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(t)&&(!!t.isInSet(c)||!c.some(d=>d.type.excludes(t)))}const{ranges:l}=i;return l.some(({$from:c,$to:h})=>{let d=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(c.pos,h.pos,(m,y,v)=>{if(d)return!1;if(m.isInline){const _=!v||v.type.allowsMarkType(t),T=!!t.isInSet(m.marks)||!m.marks.some(A=>A.type.excludes(t));d=_&&T}return!d}),d})}var S7=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:o}=t,{empty:l,ranges:c}=o,h=eo(n,r.schema);if(i)if(l){const d=hN(r,h);t.addStoredMark(h.create({...d,...e}))}else c.forEach(d=>{const m=d.$from.pos,y=d.$to.pos;r.doc.nodesBetween(m,y,(v,_)=>{const T=Math.max(_,m),A=Math.min(_+v.nodeSize,y);v.marks.find(N=>N.type===h)?v.marks.forEach(N=>{h===N.type&&t.addMark(T,A,h.create({...N.attrs,...e}))}):t.addMark(T,A,h.create(e))})});return T7(r,t,h)},w7=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),A7=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const o=mn(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>LC(o,{...l,...e})(t)?!0:c.clearNodes()).command(({state:c})=>LC(o,{...l,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},C7=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=cl(n,0,r.content.size),o=Ne.create(r,i);e.setSelection(o)}return!0},R7=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,l=Fe.atStart(r).from,c=Fe.atEnd(r).to,h=cl(i,l,c),d=cl(o,l,c),m=Fe.create(r,h,d);e.setSelection(m)}return!0},x7=n=>({state:e,dispatch:t})=>{const r=mn(n,e.schema);return rH(r)(e,t)};function FC(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}var k7=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:c,$to:h}=o,d=i.extensionManager.attributes,m=Rp(d,c.node().type.name,c.node().attrs);if(o instanceof Ne&&o.node.isBlock)return!c.parentOffset||!$s(l,c.pos)?!1:(r&&(n&&FC(t,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const y=h.parentOffset===h.parent.content.size,v=c.depth===0?void 0:oH(c.node(-1).contentMatchAt(c.indexAfter(-1)));let _=y&&v?[{type:v,attrs:m}]:void 0,T=$s(e.doc,e.mapping.map(c.pos),1,_);if(!_&&!T&&$s(e.doc,e.mapping.map(c.pos),1,v?[{type:v}]:void 0)&&(T=!0,_=v?[{type:v,attrs:m}]:void 0),r){if(T&&(o instanceof Fe&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,_),v&&!y&&!c.parentOffset&&c.parent.type!==v)){const A=e.mapping.map(c.before()),C=e.doc.resolve(A);c.node(-1).canReplaceWith(C.index(),C.index()+1,v)&&e.setNodeMarkup(e.mapping.map(c.before()),v)}n&&FC(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return T},I7=(n,e={})=>({tr:t,state:r,dispatch:i,editor:o})=>{var l;const c=mn(n,r.schema),{$from:h,$to:d}=r.selection,m=r.selection.node;if(m&&m.isBlock||h.depth<2||!h.sameParent(d))return!1;const y=h.node(-1);if(y.type!==c)return!1;const v=o.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==c||h.index(-2)!==h.node(-2).childCount-1)return!1;if(i){let N=ce.empty;const H=h.index(-1)?1:h.index(-2)?2:3;for(let x=h.depth-H;x>=h.depth-3;x-=1)N=ce.from(h.node(x).copy(N));const X=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,ie={...Rp(v,h.node().type.name,h.node().attrs),...e},te=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(ie))||void 0;N=N.append(ce.from(c.createAndFill(null,te)||void 0));const ge=h.before(h.depth-(H-1));t.replace(ge,h.after(-X),new be(N,4-H,0));let k=-1;t.doc.nodesBetween(ge,t.doc.content.size,(x,M)=>{if(k>-1)return!1;x.isTextblock&&x.content.size===0&&(k=M+1)}),k>-1&&t.setSelection(Fe.near(t.doc.resolve(k))),t.scrollIntoView()}return!0}const _=d.pos===h.end()?y.contentMatchAt(0).defaultType:null,T={...Rp(v,y.type.name,y.attrs),...e},A={...Rp(v,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,d.pos);const C=_?[{type:c,attrs:T},{type:_,attrs:A}]:[{type:c,attrs:T}];if(!$s(t.doc,h.pos,2))return!1;if(i){const{selection:N,storedMarks:H}=r,{splittableMarks:X}=o.extensionManager,ie=H||N.$to.parentOffset&&N.$from.marks();if(t.split(h.pos,2,C).scrollIntoView(),!ie||!i)return!0;const te=ie.filter(ge=>X.includes(ge.type.name));t.ensureMarks(te)}return!0},c0=(n,e)=>{const t=bg(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ba(n.doc,t.pos)&&n.join(t.pos),!0},h0=(n,e)=>{const t=bg(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ba(n.doc,r)&&n.join(r),!0},M7=(n,e,t,r={})=>({editor:i,tr:o,state:l,dispatch:c,chain:h,commands:d,can:m})=>{const{extensions:y,splittableMarks:v}=i.extensionManager,_=mn(n,l.schema),T=mn(e,l.schema),{selection:A,storedMarks:C}=l,{$from:N,$to:H}=A,X=N.blockRange(H),ie=C||A.$to.parentOffset&&A.$from.marks();if(!X)return!1;const te=bg(ge=>jC(ge.type.name,y))(A);if(X.depth>=1&&te&&X.depth-te.depth<=1){if(te.node.type===_)return d.liftListItem(T);if(jC(te.node.type.name,y)&&_.validContent(te.node.content)&&c)return h().command(()=>(o.setNodeMarkup(te.pos,_),!0)).command(()=>c0(o,_)).command(()=>h0(o,_)).run()}return!t||!ie||!c?h().command(()=>m().wrapInList(_,r)?!0:d.clearNodes()).wrapInList(_,r).command(()=>c0(o,_)).command(()=>h0(o,_)).run():h().command(()=>{const ge=m().wrapInList(_,r),k=ie.filter(x=>v.includes(x.type.name));return o.ensureMarks(k),ge?!0:d.clearNodes()}).wrapInList(_,r).command(()=>c0(o,_)).command(()=>h0(o,_)).run()},N7=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=t,l=eo(n,r.schema);return pE(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},O7=(n,e,t={})=>({state:r,commands:i})=>{const o=mn(n,r.schema),l=mn(e,r.schema),c=ga(r,o,t);let h;return r.selection.$anchor.sameParent(r.selection.$head)&&(h=r.selection.$anchor.parent.attrs),c?i.setNode(l,h):i.setNode(o,{...h,...t})},D7=(n,e={})=>({state:t,commands:r})=>{const i=mn(n,t.schema);return ga(t,i,e)?r.lift(i):r.wrapIn(i,e)},P7=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){const l=n.tr,c=o.transform;for(let h=c.steps.length-1;h>=0;h-=1)l.step(c.steps[h].invert(c.docs[h]));if(o.text){const h=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,h))}else l.delete(o.from,o.to)}return!0}}return!1},L7=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},V7=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:c}=t,h=eo(n,r.schema),{$from:d,empty:m,ranges:y}=c;if(!i)return!0;if(m&&l){let{from:v,to:_}=c;const T=(o=d.marks().find(C=>C.type===h))==null?void 0:o.attrs,A=eb(d,h,T);A&&(v=A.from,_=A.to),t.removeMark(v,_,h)}else y.forEach(v=>{t.removeMark(v.$from.pos,v.$to.pos,h)});return t.removeStoredMark(h),!0},U7=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let o=null,l=null;const c=Tg(typeof n=="string"?n:n.name,r.schema);return c?(c==="node"&&(o=mn(n,r.schema)),c==="mark"&&(l=eo(n,r.schema)),i&&t.selection.ranges.forEach(h=>{const d=h.$from.pos,m=h.$to.pos;let y,v,_,T;t.selection.empty?r.doc.nodesBetween(d,m,(A,C)=>{o&&o===A.type&&(_=Math.max(C,d),T=Math.min(C+A.nodeSize,m),y=C,v=A)}):r.doc.nodesBetween(d,m,(A,C)=>{C<d&&o&&o===A.type&&(_=Math.max(C,d),T=Math.min(C+A.nodeSize,m),y=C,v=A),C>=d&&C<=m&&(o&&o===A.type&&t.setNodeMarkup(C,void 0,{...A.attrs,...e}),l&&A.marks.length&&A.marks.forEach(N=>{if(l===N.type){const H=Math.max(C,d),X=Math.min(C+A.nodeSize,m);t.addMark(H,X,l.create({...N.attrs,...e}))}}))}),v&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(A=>{l===A.type&&t.addMark(_,T,l.create({...A.attrs,...e}))}))}),!0):!1},z7=(n,e={})=>({state:t,dispatch:r})=>{const i=mn(n,t.schema);return Qj(i,e)(t,r)},B7=(n,e={})=>({state:t,dispatch:r})=>{const i=mn(n,t.schema);return Xj(i,e)(t,r)},wN=Ct.create({name:"commands",addCommands(){return{...TN}}}),AN=Ct.create({name:"delete",onUpdate({transaction:n,appendedTransactions:e}){var t,r,i;const o=()=>{var l,c,h,d;if((d=(h=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:h.call(c,n))!=null?d:n.getMeta("y-sync$"))return;const m=iN(n.before,[n,...e]);dN(m).forEach(_=>{m.mapping.mapResult(_.oldRange.from).deletedAfter&&m.mapping.mapResult(_.oldRange.to).deletedBefore&&m.before.nodesBetween(_.oldRange.from,_.oldRange.to,(T,A)=>{const C=A+T.nodeSize-2,N=_.oldRange.from<=A&&C<=_.oldRange.to;this.editor.emit("delete",{type:"node",node:T,from:A,to:C,newFrom:m.mapping.map(A),newTo:m.mapping.map(C),deletedRange:_.oldRange,newRange:_.newRange,partial:!N,editor:this.editor,transaction:n,combinedTransform:m})})});const v=m.mapping;m.steps.forEach((_,T)=>{var A,C;if(_ instanceof wi){const N=v.slice(T).map(_.from,-1),H=v.slice(T).map(_.to),X=v.invert().map(N,-1),ie=v.invert().map(H),te=(A=m.doc.nodeAt(N-1))==null?void 0:A.marks.some(k=>k.eq(_.mark)),ge=(C=m.doc.nodeAt(H))==null?void 0:C.marks.some(k=>k.eq(_.mark));this.editor.emit("delete",{type:"mark",mark:_.mark,from:_.from,to:_.to,deletedRange:{from:X,to:ie},newRange:{from:N,to:H},partial:!!(ge||te),editor:this.editor,transaction:n,combinedTransform:m})}})};(i=(r=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),CN=Ct.create({name:"drop",addProseMirrorPlugins(){return[new nn({key:new Ln("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),RN=Ct.create({name:"editable",addProseMirrorPlugins(){return[new nn({key:new Ln("editable"),props:{editable:()=>this.editor.options.editable}})]}}),xN=new Ln("focusEvents"),kN=Ct.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new nn({key:xN,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),IN=Ct.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:h,doc:d}=c,{empty:m,$anchor:y}=h,{pos:v,parent:_}=y,T=y.parent.isTextblock&&v>0?c.doc.resolve(v-1):y,A=T.parent.type.spec.isolating,C=y.pos-y.parentOffset,N=A&&T.parent.childCount===1?C===y.pos:Ke.atStart(d).from===v;return!m||!_.type.isTextblock||_.textContent.length||!N||N&&y.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rb()||SN()?o:i},addProseMirrorPlugins(){return[new nn({key:new Ln("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(A=>A.getMeta("composition")))return;const r=n.some(A=>A.docChanged)&&!e.doc.eq(t.doc),i=n.some(A=>A.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:c}=e.selection,h=Ke.atStart(e.doc).from,d=Ke.atEnd(e.doc).to;if(o||!(l===h&&c===d)||!Sg(t.doc))return;const v=t.tr,_=Eg({state:t,transaction:v}),{commands:T}=new _g({editor:this.editor,state:_});if(T.clearNodes(),!!v.steps.length)return v}})]}}),MN=Ct.create({name:"paste",addProseMirrorPlugins(){return[new nn({key:new Ln("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),NN=Ct.create({name:"tabindex",addProseMirrorPlugins(){return[new nn({key:new Ln("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),j7=class Ou{constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Ou(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ou(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ou(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(l);if(!i&&c.depth<=this.depth)return;const h=new Ou(c,this.editor,i,i?t:null);i&&(h.actualDepth=this.depth+1),e.push(new Ou(c,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const o=i.node.attrs,l=Object.keys(t);for(let c=0;c<l.length;c+=1){const h=l[c];if(o[h]!==t[h])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(t);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(h=>t[h]===l.node.attrs[h])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},H7=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function F7(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var q7=class extends sH{constructor(n={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=yN(e,this.options.autofocus);this.editorState=Lu.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n!=null&&n.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=F7(H7,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,e=!0){this.setOptions({editable:n}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.editorState=this.state.apply(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,e)=>{if(e==="state")return this.editorState;if(e in n)return Reflect.get(n,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,e){const t=oN(e)?e(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(n).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;t=t.filter(l=>!l.key.startsWith(o))}),e.length===t.length)return;const r=this.state.reconfigure({plugins:t});return this.view.updateState(r),r}createExtensionManager(){var n,e;const r=[...this.options.enableCoreExtensions?[RN,bN.configure({blockSeparator:(e=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:e.blockSeparator}),wN,kN,IN,NN,CN,MN,AN].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Ag(r,this)}createCommandManager(){this.commandManager=new _g({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=dE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),n=dE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){var e;this.editorView=new FM(n,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews(),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(d=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(d)});return}const{state:e,transactions:t}=this.state.applyTransaction(n),r=!this.state.selection.eq(e.selection),i=t.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:t.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const l=t.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),c=l==null?void 0:l.getMeta("focus"),h=l==null?void 0:l.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:l}),h&&this.emit("blur",{editor:this,event:h.event,transaction:l}),!(n.getMeta("preventUpdate")||!t.some(d=>d.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:t.slice(1)})}getAttributes(n){return fN(this.state,n)}isActive(n,e){const t=typeof n=="string"?n:null,r=typeof n=="string"?e:n;return EH(this.state,t,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return X_(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:e=`

`,textSerializers:t={}}=n||{};return dH(this.state.doc,{blockSeparator:e,textSerializers:{...cN(this.schema),...t}})}get isEmpty(){return Sg(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,e;return(e=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?e:!0}$node(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(n,e))||null}$nodes(n,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(n,e))||null}$pos(n){const e=this.state.doc.resolve(n);return new j7(e,this)}get $doc(){return this.$pos(0)}};function tc(n){return new wg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=wt(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],c=r[0];if(l){const h=c.search(/\S/),d=t.from+c.indexOf(l),m=d+l.length;if(tb(t.from,t.to,e.doc).filter(_=>_.mark.type.excluded.find(A=>A===n.type&&A!==_.mark.type)).filter(_=>_.to>d).length)return null;m<t.to&&o.delete(m,t.to),d>t.from&&o.delete(t.from+h,d);const v=t.from+h+l.length;o.addMark(t.from+h,v,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function $7(n){return new wg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=wt(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let c=t.to;const h=n.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let m=l+d;m>c?m=c:c=m+r[1].length;const y=r[0][r[0].length-1];o.insertText(y,l+r[0].length-1),o.replaceWith(m,c,h)}else if(r[0]){const d=n.type.isInline?l:l-1;o.insert(d,n.type.create(i)).delete(o.mapping.map(l),o.mapping.map(c))}o.scrollIntoView()}})}function mE(n){return new wg({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),o=wt(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function nc(n){return new wg({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const o=wt(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),h=l.doc.resolve(t.from).blockRange(),d=h&&D_(h,n.type,o);if(!d)return null;if(l.wrap(h,d),n.keepMarks&&n.editor){const{selection:y,storedMarks:v}=e,{splittableMarks:_}=n.editor.extensionManager,T=v||y.$to.parentOffset&&y.$from.marks();if(T){const A=T.filter(C=>_.includes(C.type.name));l.ensureMarks(A)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(y,o).run()}const m=l.doc.resolve(t.from-1).nodeBefore;m&&m.type===n.type&&ba(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,m))&&l.join(t.from-1)}})}function G7(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof Ne){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}function K7(n,e,t={}){const{state:r}=e,{doc:i,tr:o}=r,l=n;i.descendants((c,h)=>{const d=o.mapping.map(h),m=o.mapping.map(h)+c.nodeSize;let y=null;if(c.marks.forEach(_=>{if(_!==l)return!1;y=_}),!y)return;let v=!1;if(Object.keys(t).forEach(_=>{t[_]!==y.attrs[_]&&(v=!0)}),v){const _=n.type.create({...n.attrs,...t});o.removeMark(d,m,n.type),o.addMark(d,m,_)}}),o.docChanged&&e.view.dispatch(o)}var qr=class ON extends nb{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new ON(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Nl(n){return new RH({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const o=wt(n.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,c=r[r.length-1],h=r[0];let d=t.to;if(c){const m=h.search(/\S/),y=t.from+h.indexOf(c),v=y+c.length;if(tb(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(C=>C===n.type&&C!==T.mark.type)).filter(T=>T.to>y).length)return null;v<t.to&&l.delete(v,t.to),y>t.from&&l.delete(t.from+m,y),d=t.from+m+c.length,l.addMark(t.from+m,d,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}var f0,qC;function W7(){return qC||(qC=1,f0=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=r;i--!==0;){var l=o[i];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}),f0}var Y7=W7();const Q7=RE(Y7);var d0={exports:{}},p0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function X7(){if($C)return p0;$C=1;var n=gf(),e=xI();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,h=n.useDebugValue;return p0.useSyncExternalStoreWithSelector=function(d,m,y,v,_){var T=o(null);if(T.current===null){var A={hasValue:!1,value:null};T.current=A}else A=T.current;T=c(function(){function N(ge){if(!H){if(H=!0,X=ge,ge=v(ge),_!==void 0&&A.hasValue){var k=A.value;if(_(k,ge))return ie=k}return ie=ge}if(k=ie,r(X,ge))return k;var x=v(ge);return _!==void 0&&_(k,x)?(X=ge,k):(X=ge,ie=x)}var H=!1,X,ie,te=y===void 0?null:y;return[function(){return N(m())},te===null?void 0:function(){return N(te())}]},[m,y,v,_]);var C=i(d,T[0],T[1]);return l(function(){A.hasValue=!0,A.value=C},[C]),h(C),C},p0}var GC;function J7(){return GC||(GC=1,d0.exports=X7()),d0.exports}var Z7=J7(),eF=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},tF=({contentComponent:n})=>{const e=kI.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return L.jsx(L.Fragment,{children:Object.values(e)})};function nF(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:hR.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}var rF=class extends aa.Component{constructor(n){var e;super(n),this.editorContentRef=aa.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=n.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const n=this.props.editor;if(n&&!n.isDestroyed&&n.options.element){if(n.contentComponent)return;const e=this.editorContentRef.current;e.append(...n.options.element.childNodes),n.setOptions({element:e}),n.contentComponent=nF(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=n.contentComponent.subscribe(()=>{this.setState(t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),n.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!((n=e.options.element)!=null&&n.firstChild)))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:n,innerRef:e,...t}=this.props;return L.jsxs(L.Fragment,{children:[L.jsx("div",{ref:eF(e,this.editorContentRef),...t}),(n==null?void 0:n.contentComponent)&&L.jsx(tF,{contentComponent:n.contentComponent})]})}},iF=ee.forwardRef((n,e)=>{const t=aa.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return aa.createElement(rF,{key:t,innerRef:e,...n})}),sF=aa.memo(iF),oF=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,aF=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function lF(n){var e;const[t]=ee.useState(()=>new aF(n.editor)),r=Z7.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!=null?e:Q7);return oF(()=>t.watch(n.editor),[n.editor,t]),ee.useDebugValue(r),r}var uF=!1,gE=typeof window>"u",cF=gE||!!(typeof window<"u"&&window.next),hF=class DN{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?gE||cF?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new q7(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=t.extensions)==null?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?DN.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function fF(n={},e=[]){const t=ee.useRef(n);t.current=n;const[r]=ee.useState(()=>new hF(t)),i=kI.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return ee.useDebugValue(i),ee.useEffect(r.onRender(e)),lF({editor:i,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),i}var dF=ee.createContext({editor:null});dF.Consumer;var pF=ee.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),mF=()=>ee.useContext(pF);aa.forwardRef((n,e)=>{const{onDragStart:t}=mF(),r=n.as||"div";return L.jsx(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});aa.createContext({markViewContentRef:()=>{}});var fm=(n,e)=>{if(n==="slot")return 0;if(n instanceof Function)return n(e);const{children:t,...r}=e??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,t]},gF=/^\s*>\s$/,yF=qr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return fm("blockquote",{...an(this.options.HTMLAttributes,n),children:fm("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[nc({find:gF,type:this.type})]}}),vF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,EF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,_F=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,TF=Sa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return fm("strong",{...an(this.options.HTMLAttributes,n),children:fm("slot",{})})},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[tc({find:vF,type:this.type}),tc({find:_F,type:this.type})]},addPasteRules(){return[Nl({find:EF,type:this.type}),Nl({find:bF,type:this.type})]}}),SF=/(^|[^`])`([^`]+)`(?!`)$/,wF=/(^|[^`])`([^`]+)`(?!`)/g,AF=Sa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",an(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[tc({find:SF,type:this.type})]},addPasteRules(){return[Nl({find:wF,type:this.type})]}}),CF=/^```([a-z]+)?[\s\n]$/,RF=/^~~~([a-z]+)?[\s\n]$/,xF=qr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",an(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:n})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(r.parent.type!==this.type)return!1;const o=" ".repeat(this.options.tabSize);return i?n.commands.insertContent(o):n.commands.command(({tr:l})=>{const{from:c,to:h}=t,y=e.doc.textBetween(c,h,`
`,`
`).split(`
`).map(v=>o+v).join(`
`);return l.replaceWith(c,h,e.schema.text(y)),!0})},"Shift-Tab":({editor:n})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;return r.parent.type!==this.type?!1:i?n.commands.command(({tr:o})=>{var l;const{pos:c}=r,h=r.start(),d=r.end(),y=e.doc.textBetween(h,d,`
`,`
`).split(`
`);let v=0,_=0;const T=c-h;for(let ie=0;ie<y.length;ie+=1){if(_+y[ie].length>=T){v=ie;break}_+=y[ie].length+1}const C=((l=y[v].match(/^ */))==null?void 0:l[0])||"",N=Math.min(C.length,this.options.tabSize);if(N===0)return!0;let H=h;for(let ie=0;ie<v;ie+=1)H+=y[ie].length+1;return o.delete(H,H+N),c-H<=N&&o.setSelection(Fe.create(o.doc,H)),!0}):n.commands.command(({tr:o})=>{const{from:l,to:c}=t,m=e.doc.textBetween(l,c,`
`,`
`).split(`
`).map(y=>{var v;const _=((v=y.match(/^ */))==null?void 0:v[0])||"",T=Math.min(_.length,this.options.tabSize);return y.slice(T)}).join(`
`);return o.replaceWith(l,c,e.schema.text(m)),!0})},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0?!1:r.nodeAt(c)?n.commands.command(({tr:d})=>(d.setSelection(Ke.near(r.resolve(c))),!0)):n.commands.exitCode()}}},addInputRules(){return[mE({find:CF,type:this.type,getAttributes:n=>({language:n[1]})}),mE({find:RF,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new nn({key:new Ln("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i==null?void 0:i.mode;if(!t||!o)return!1;const{tr:l,schema:c}=n.state,h=c.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},h)),l.selection.$from.parent.type!==this.type&&l.setSelection(Fe.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),kF=qr.create({name:"doc",topNode:!0,content:"block+"}),IF=qr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",an(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,h=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:m})=>{if(m&&h&&l){const y=h.filter(v=>c.includes(v.type.name));d.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),MF=qr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,an(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>mE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),NF=qr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",an(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!G7(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:r}=t,i=n();return mN(t)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:l})=>{var c;if(l){const{$to:h}=o.selection,d=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?o.setSelection(Fe.create(o.doc,h.pos+1)):h.nodeAfter.isBlock?o.setSelection(Ne.create(o.doc,h.pos)):o.setSelection(Fe.create(o.doc,h.pos));else{const m=(c=h.parent.type.contentMatch.defaultType)==null?void 0:c.create();m&&(o.insert(d,m),o.setSelection(Fe.create(o.doc,d+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$7({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),OF=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,DF=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,PF=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,LF=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,VF=Sa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",an(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[tc({find:OF,type:this.type}),tc({find:PF,type:this.type})]},addPasteRules(){return[Nl({find:DF,type:this.type}),Nl({find:LF,type:this.type})]}});const UF="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",zF="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",yE="numeric",vE="ascii",EE="alpha",Bh="asciinumeric",kh="alphanumeric",_E="domain",PN="emoji",BF="scheme",jF="slashscheme",m0="whitespace";function HF(n,e){return n in e||(e[n]=[]),e[n]}function hl(n,e,t){e[yE]&&(e[Bh]=!0,e[kh]=!0),e[vE]&&(e[Bh]=!0,e[EE]=!0),e[Bh]&&(e[kh]=!0),e[EE]&&(e[kh]=!0),e[kh]&&(e[_E]=!0),e[PN]&&(e[_E]=!0);for(const r in e){const i=HF(r,t);i.indexOf(n)<0&&i.push(n)}}function FF(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function br(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}br.groups={};br.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||br.groups;let i;return e&&e.j?i=e:(i=new br(e),t&&r&&hl(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const o=n.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(n[l]);return i.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||br.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const o=e;let l,c=i.go(n);if(c?(l=new br,Object.assign(l.j,c.j),l.jr.push.apply(l.jr,c.jr),l.jd=c.jd,l.t=c.t):l=new br,o){if(r)if(l.t&&typeof l.t=="string"){const h=Object.assign(FF(l.t,r),t);hl(o,h,r)}else t&&hl(o,t,r);l.t=o}return i.j[n]=l,l}};const We=(n,e,t,r,i)=>n.ta(e,t,r,i),Jt=(n,e,t,r,i)=>n.tr(e,t,r,i),KC=(n,e,t,r,i)=>n.ts(e,t,r,i),fe=(n,e,t,r,i)=>n.tt(e,t,r,i),Us="WORD",bE="UWORD",LN="ASCIINUMERICAL",VN="ALPHANUMERICAL",pf="LOCALHOST",TE="TLD",SE="UTLD",xp="SCHEME",Du="SLASH_SCHEME",ib="NUM",wE="WS",sb="NL",jh="OPENBRACE",Hh="CLOSEBRACE",dm="OPENBRACKET",pm="CLOSEBRACKET",mm="OPENPAREN",gm="CLOSEPAREN",ym="OPENANGLEBRACKET",vm="CLOSEANGLEBRACKET",Em="FULLWIDTHLEFTPAREN",_m="FULLWIDTHRIGHTPAREN",bm="LEFTCORNERBRACKET",Tm="RIGHTCORNERBRACKET",Sm="LEFTWHITECORNERBRACKET",wm="RIGHTWHITECORNERBRACKET",Am="FULLWIDTHLESSTHAN",Cm="FULLWIDTHGREATERTHAN",Rm="AMPERSAND",xm="APOSTROPHE",km="ASTERISK",Vo="AT",Im="BACKSLASH",Mm="BACKTICK",Nm="CARET",Go="COLON",ob="COMMA",Om="DOLLAR",Gi="DOT",Dm="EQUALS",ab="EXCLAMATION",ai="HYPHEN",Fh="PERCENT",Pm="PIPE",Lm="PLUS",Vm="POUND",qh="QUERY",lb="QUOTE",UN="FULLWIDTHMIDDLEDOT",ub="SEMI",Ki="SLASH",$h="TILDE",Um="UNDERSCORE",zN="EMOJI",zm="SYM";var BN=Object.freeze({__proto__:null,ALPHANUMERICAL:VN,AMPERSAND:Rm,APOSTROPHE:xm,ASCIINUMERICAL:LN,ASTERISK:km,AT:Vo,BACKSLASH:Im,BACKTICK:Mm,CARET:Nm,CLOSEANGLEBRACKET:vm,CLOSEBRACE:Hh,CLOSEBRACKET:pm,CLOSEPAREN:gm,COLON:Go,COMMA:ob,DOLLAR:Om,DOT:Gi,EMOJI:zN,EQUALS:Dm,EXCLAMATION:ab,FULLWIDTHGREATERTHAN:Cm,FULLWIDTHLEFTPAREN:Em,FULLWIDTHLESSTHAN:Am,FULLWIDTHMIDDLEDOT:UN,FULLWIDTHRIGHTPAREN:_m,HYPHEN:ai,LEFTCORNERBRACKET:bm,LEFTWHITECORNERBRACKET:Sm,LOCALHOST:pf,NL:sb,NUM:ib,OPENANGLEBRACKET:ym,OPENBRACE:jh,OPENBRACKET:dm,OPENPAREN:mm,PERCENT:Fh,PIPE:Pm,PLUS:Lm,POUND:Vm,QUERY:qh,QUOTE:lb,RIGHTCORNERBRACKET:Tm,RIGHTWHITECORNERBRACKET:wm,SCHEME:xp,SEMI:ub,SLASH:Ki,SLASH_SCHEME:Du,SYM:zm,TILDE:$h,TLD:TE,UNDERSCORE:Um,UTLD:SE,UWORD:bE,WORD:Us,WS:wE});const Ls=/[a-z]/,vh=new RegExp("\\p{L}","u"),g0=new RegExp("\\p{Emoji}","u"),Vs=/\d/,y0=/\s/,WC="\r",v0=`
`,qF="",$F="",E0="";let up=null,cp=null;function GF(n=[]){const e={};br.groups=e;const t=new br;up==null&&(up=YC(UF)),cp==null&&(cp=YC(zF)),fe(t,"'",xm),fe(t,"{",jh),fe(t,"}",Hh),fe(t,"[",dm),fe(t,"]",pm),fe(t,"(",mm),fe(t,")",gm),fe(t,"<",ym),fe(t,">",vm),fe(t,"",Em),fe(t,"",_m),fe(t,"",bm),fe(t,"",Tm),fe(t,"",Sm),fe(t,"",wm),fe(t,"",Am),fe(t,"",Cm),fe(t,"&",Rm),fe(t,"*",km),fe(t,"@",Vo),fe(t,"`",Mm),fe(t,"^",Nm),fe(t,":",Go),fe(t,",",ob),fe(t,"$",Om),fe(t,".",Gi),fe(t,"=",Dm),fe(t,"!",ab),fe(t,"-",ai),fe(t,"%",Fh),fe(t,"|",Pm),fe(t,"+",Lm),fe(t,"#",Vm),fe(t,"?",qh),fe(t,'"',lb),fe(t,"/",Ki),fe(t,";",ub),fe(t,"~",$h),fe(t,"_",Um),fe(t,"\\",Im),fe(t,"",UN);const r=Jt(t,Vs,ib,{[yE]:!0});Jt(r,Vs,r);const i=Jt(r,Ls,LN,{[Bh]:!0}),o=Jt(r,vh,VN,{[kh]:!0}),l=Jt(t,Ls,Us,{[vE]:!0});Jt(l,Vs,i),Jt(l,Ls,l),Jt(i,Vs,i),Jt(i,Ls,i);const c=Jt(t,vh,bE,{[EE]:!0});Jt(c,Ls),Jt(c,Vs,o),Jt(c,vh,c),Jt(o,Vs,o),Jt(o,Ls),Jt(o,vh,o);const h=fe(t,v0,sb,{[m0]:!0}),d=fe(t,WC,wE,{[m0]:!0}),m=Jt(t,y0,wE,{[m0]:!0});fe(t,E0,m),fe(d,v0,h),fe(d,E0,m),Jt(d,y0,m),fe(m,WC),fe(m,v0),Jt(m,y0,m),fe(m,E0,m);const y=Jt(t,g0,zN,{[PN]:!0});fe(y,"#"),Jt(y,g0,y),fe(y,qF,y);const v=fe(y,$F);fe(v,"#"),Jt(v,g0,y);const _=[[Ls,l],[Vs,i]],T=[[Ls,null],[vh,c],[Vs,o]];for(let A=0;A<up.length;A++)Oo(t,up[A],TE,Us,_);for(let A=0;A<cp.length;A++)Oo(t,cp[A],SE,bE,T);hl(TE,{tld:!0,ascii:!0},e),hl(SE,{utld:!0,alpha:!0},e),Oo(t,"file",xp,Us,_),Oo(t,"mailto",xp,Us,_),Oo(t,"http",Du,Us,_),Oo(t,"https",Du,Us,_),Oo(t,"ftp",Du,Us,_),Oo(t,"ftps",Du,Us,_),hl(xp,{scheme:!0,ascii:!0},e),hl(Du,{slashscheme:!0,ascii:!0},e),n=n.sort((A,C)=>A[0]>C[0]?1:-1);for(let A=0;A<n.length;A++){const C=n[A][0],H=n[A][1]?{[BF]:!0}:{[jF]:!0};C.indexOf("-")>=0?H[_E]=!0:Ls.test(C)?Vs.test(C)?H[Bh]=!0:H[vE]=!0:H[yE]=!0,KC(t,C,C,H)}return KC(t,"localhost",pf,{ascii:!0}),t.jd=new br(zm),{start:t,tokens:Object.assign({groups:e},BN)}}function jN(n,e){const t=KF(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=t.length,i=[];let o=0,l=0;for(;l<r;){let c=n,h=null,d=0,m=null,y=-1,v=-1;for(;l<r&&(h=c.go(t[l]));)c=h,c.accepts()?(y=0,v=0,m=c):y>=0&&(y+=t[l].length,v++),d+=t[l].length,o+=t[l].length,l++;o-=y,l-=v,d-=y,i.push({t:m.t,v:e.slice(o-d,o),s:o-d,e:o})}return i}function KF(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),o,l=i<55296||i>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Oo(n,e,t,r,i){let o;const l=e.length;for(let c=0;c<l-1;c++){const h=e[c];n.j[h]?o=n.j[h]:(o=new br(r),o.jr=i.slice(),n.j[h]=o),n=o}return o=new br(t),o.jr=i.slice(),n.j[e[l-1]]=o,o}function YC(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let o=0;for(;i.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+o),10);l>0;l--)t.pop();r+=o}else t.push(n[r]),r++}return e}const mf={defaultProtocol:"http",events:null,format:QC,formatHref:QC,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function cb(n,e=null){let t=Object.assign({},mf);n&&(t=Object.assign(t,n instanceof cb?n.o:n));const r=t.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}cb.prototype={o:mf,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:mf[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function QC(n){return n}function HN(n,e){this.t="token",this.v=n,this.tk=e}HN.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=mf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),o=this.toFormattedString(n),l={},c=n.get("className",t,e),h=n.get("target",t,e),d=n.get("rel",t,e),m=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return l.href=r,c&&(l.class=c),h&&(l.target=h),d&&(l.rel=d),m&&Object.assign(l,m),{tagName:i,attributes:l,content:o,eventListeners:y}}};function Cg(n,e){class t extends HN{constructor(i,o){super(i,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const XC=Cg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),JC=Cg("text"),WF=Cg("nl"),hp=Cg("url",{isLink:!0,toHref(n=mf.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==pf&&n[1].t===Go}}),oi=n=>new br(n);function YF({groups:n}){const e=n.domain.concat([Rm,km,Vo,Im,Mm,Nm,Om,Dm,ai,ib,Fh,Pm,Lm,Vm,Ki,zm,$h,Um]),t=[xm,Go,ob,Gi,ab,Fh,qh,lb,ub,ym,vm,jh,Hh,pm,dm,mm,gm,Em,_m,bm,Tm,Sm,wm,Am,Cm],r=[Rm,xm,km,Im,Mm,Nm,Om,Dm,ai,jh,Hh,Fh,Pm,Lm,Vm,qh,Ki,zm,$h,Um],i=oi(),o=fe(i,$h);We(o,r,o),We(o,n.domain,o);const l=oi(),c=oi(),h=oi();We(i,n.domain,l),We(i,n.scheme,c),We(i,n.slashscheme,h),We(l,r,o),We(l,n.domain,l);const d=fe(l,Vo);fe(o,Vo,d),fe(c,Vo,d),fe(h,Vo,d);const m=fe(o,Gi);We(m,r,o),We(m,n.domain,o);const y=oi();We(d,n.domain,y),We(y,n.domain,y);const v=fe(y,Gi);We(v,n.domain,y);const _=oi(XC);We(v,n.tld,_),We(v,n.utld,_),fe(d,pf,_);const T=fe(y,ai);fe(T,ai,T),We(T,n.domain,y),We(_,n.domain,y),fe(_,Gi,v),fe(_,ai,T);const A=fe(_,Go);We(A,n.numeric,XC);const C=fe(l,ai),N=fe(l,Gi);fe(C,ai,C),We(C,n.domain,l),We(N,r,o),We(N,n.domain,l);const H=oi(hp);We(N,n.tld,H),We(N,n.utld,H),We(H,n.domain,l),We(H,r,o),fe(H,Gi,N),fe(H,ai,C),fe(H,Vo,d);const X=fe(H,Go),ie=oi(hp);We(X,n.numeric,ie);const te=oi(hp),ge=oi();We(te,e,te),We(te,t,ge),We(ge,e,te),We(ge,t,ge),fe(H,Ki,te),fe(ie,Ki,te);const k=fe(c,Go),x=fe(h,Go),M=fe(x,Ki),O=fe(M,Ki);We(c,n.domain,l),fe(c,Gi,N),fe(c,ai,C),We(h,n.domain,l),fe(h,Gi,N),fe(h,ai,C),We(k,n.domain,te),fe(k,Ki,te),fe(k,qh,te),We(O,n.domain,te),We(O,e,te),fe(O,Ki,te);const z=[[jh,Hh],[dm,pm],[mm,gm],[ym,vm],[Em,_m],[bm,Tm],[Sm,wm],[Am,Cm]];for(let B=0;B<z.length;B++){const[D,rt]=z[B],Ze=fe(te,D);fe(ge,D,Ze),fe(Ze,rt,te);const Z=oi(hp);We(Ze,e,Z);const de=oi();We(Ze,t),We(Z,e,Z),We(Z,t,de),We(de,e,Z),We(de,t,de),fe(Z,rt,te),fe(de,rt,te)}return fe(i,pf,H),fe(i,sb,WF),{start:i,tokens:BN}}function QF(n,e,t){let r=t.length,i=0,o=[],l=[];for(;i<r;){let c=n,h=null,d=null,m=0,y=null,v=-1;for(;i<r&&!(h=c.go(t[i].t));)l.push(t[i++]);for(;i<r&&(d=h||c.go(t[i].t));)h=null,c=d,c.accepts()?(v=0,y=c):v>=0&&v++,i++,m++;if(v<0)i-=m,i<r&&(l.push(t[i]),i++);else{l.length>0&&(o.push(_0(JC,e,l)),l=[]),i-=v,m-=v;const _=y.t,T=t.slice(i-m,i);o.push(_0(_,e,T))}}return l.length>0&&o.push(_0(JC,e,l)),o}function _0(n,e,t){const r=t[0].s,i=t[t.length-1].e,o=e.slice(r,i);return new n(o,t)}const XF=typeof console<"u"&&console&&console.warn||(()=>{}),JF="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",zt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ZF(){return br.groups={},zt.scanner=null,zt.parser=null,zt.tokenQueue=[],zt.pluginQueue=[],zt.customSchemes=[],zt.initialized=!1,zt}function ZC(n,e=!1){if(zt.initialized&&XF(`linkifyjs: already initialized - will not register custom scheme "${n}" ${JF}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);zt.customSchemes.push([n,e])}function e8(){zt.scanner=GF(zt.customSchemes);for(let n=0;n<zt.tokenQueue.length;n++)zt.tokenQueue[n][1]({scanner:zt.scanner});zt.parser=YF(zt.scanner.tokens);for(let n=0;n<zt.pluginQueue.length;n++)zt.pluginQueue[n][1]({scanner:zt.scanner,parser:zt.parser});return zt.initialized=!0,zt}function hb(n){return zt.initialized||e8(),QF(zt.parser.start,n,jN(zt.scanner.start,n))}hb.scan=jN;function FN(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new cb(t),i=hb(n),o=[];for(let l=0;l<i.length;l++){const c=i[l];c.isLink&&(!e||c.t===e)&&r.check(c)&&o.push(c.toFormattedObject(r))}return o}var fb="[\0- -\u2029]",t8=new RegExp(fb),n8=new RegExp(`${fb}$`),r8=new RegExp(fb,"g");function i8(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function s8(n){return new nn({key:new Ln("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(d=>d.docChanged)&&!t.doc.eq(r.doc),o=e.some(d=>d.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=r,c=iN(t.doc,[...e]);if(dN(c).forEach(({newRange:d})=>{const m=aH(r.doc,d,_=>_.isTextblock);let y,v;if(m.length>1)y=m[0],v=r.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ");else if(m.length){const _=r.doc.textBetween(d.from,d.to," "," ");if(!n8.test(_))return;y=m[0],v=r.doc.textBetween(y.pos,d.to,void 0," ")}if(y&&v){const _=v.split(t8).filter(Boolean);if(_.length<=0)return!1;const T=_[_.length-1],A=y.pos+v.lastIndexOf(T);if(!T)return!1;const C=hb(T).map(N=>N.toObject(n.defaultProtocol));if(!i8(C))return!1;C.filter(N=>N.isLink).map(N=>({...N,from:A+N.start+1,to:A+N.end+1})).filter(N=>r.schema.marks.code?!r.doc.rangeHasMark(N.from,N.to,r.schema.marks.code):!0).filter(N=>n.validate(N.value)).filter(N=>n.shouldAutoLink(N.value)).forEach(N=>{tb(N.from,N.to,r.doc).some(H=>H.mark.type===n.type)||l.addMark(N.from,N.to,n.type.create({href:N.href}))})}}),!!l.steps.length)return l}})}function o8(n){return new nn({key:new Ln("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{let m=r.target;const y=[];for(;m.nodeName!=="DIV";)y.push(m),m=m.parentNode;l=y.find(v=>v.nodeName==="A")}if(!l)return!1;const c=fN(e.state,n.type.name),h=(i=l==null?void 0:l.href)!=null?i:c.href,d=(o=l==null?void 0:l.target)!=null?o:c.target;return n.enableClickSelection&&n.editor.commands.extendMarkRange(n.type.name),l&&h?(window.open(h,d),!0):!1}}})}function a8(n){return new nn({key:new Ln("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:o}=i,{empty:l}=o;if(l)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const h=FN(c,{defaultProtocol:n.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!h?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}function tl(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(r8,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var l8=Sa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){ZC(n);return}ZC(n.scheme,n.optionalSlashes)})},onDestroy(){ZF()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!tl(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!tl(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!tl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",an(this.options.HTMLAttributes,n),0]:["a",an(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!tl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:r=>!!tl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Nl({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=FN(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!tl(l,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(s8({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!tl(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(o8({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(a8({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),u8=Object.defineProperty,c8=(n,e)=>{for(var t in e)u8(n,t,{get:e[t],enumerable:!0})},h8="listItem",eR="textStyle",tR=/^\s*([-+*])\s$/,qN=qr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",an(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(h8,this.editor.getAttributes(eR)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=nc({find:tR,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=nc({find:tR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(eR),editor:this.editor})),[n]}}),$N=qr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",an(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),f8={};c8(f8,{findListItemPos:()=>Nf,getNextListDepth:()=>db,handleBackspace:()=>AE,handleDelete:()=>CE,hasListBefore:()=>GN,hasListItemAfter:()=>d8,hasListItemBefore:()=>KN,listItemHasSubList:()=>WN,nextListIsDeeper:()=>YN,nextListIsHigher:()=>QN});var Nf=(n,e)=>{const{$from:t}=e.selection,r=mn(n,e.schema);let i=null,o=t.depth,l=t.pos,c=null;for(;o>0&&c===null;)i=t.node(o),i.type===r?c=o:(o-=1,l-=1);return c===null?null:{$pos:e.doc.resolve(l),depth:c}},db=(n,e)=>{const t=Nf(n,e);if(!t)return!1;const[,r]=yH(e,n,t.$pos.pos+4);return r},GN=(n,e,t)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),o=n.doc.resolve(i).node();return!(!o||!t.includes(o.type.name))},KN=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((t=i.nodeBefore)==null?void 0:t.type.name)!==n)},WN=(n,e,t)=>{if(!t)return!1;const r=mn(n,e.schema);let i=!1;return t.descendants(o=>{o.type===r&&(i=!0)}),i},AE=(n,e,t)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!ga(n.state,e)&&GN(n.state,e,t)){const{$anchor:c}=n.state.selection,h=n.state.doc.resolve(c.before()-1),d=[];h.node().descendants((v,_)=>{v.type.name===e&&d.push({node:v,pos:_})});const m=d.at(-1);if(!m)return!1;const y=n.state.doc.resolve(h.start()+m.pos+1);return n.chain().cut({from:c.start()-1,to:c.end()+1},y.end()).joinForward().run()}if(!ga(n.state,e)||!bH(n.state))return!1;const r=Nf(e,n.state);if(!r)return!1;const o=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=WN(e,n.state,o);return KN(e,n.state)&&!l?n.commands.joinItemBackward():n.chain().liftListItem(e).run()},YN=(n,e)=>{const t=db(n,e),r=Nf(n,e);return!r||!t?!1:t>r.depth},QN=(n,e)=>{const t=db(n,e),r=Nf(n,e);return!r||!t?!1:t<r.depth},CE=(n,e)=>{if(!ga(n.state,e)||!_H(n.state,e))return!1;const{selection:t}=n.state,{$from:r,$to:i}=t;return!t.empty&&r.sameParent(i)?!1:YN(e,n.state)?n.chain().focus(n.state.selection.from+4).lift(e).joinBackward().run():QN(e,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},d8=(n,e)=>{var t;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((t=i.nodeAfter)==null?void 0:t.type.name)!==n)},XN=Ct.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&CE(n,t)&&(e=!0)}),e},"Mod-Delete":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{n.state.schema.nodes[t]!==void 0&&CE(n,t)&&(e=!0)}),e},Backspace:({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&AE(n,t,r)&&(e=!0)}),e},"Mod-Backspace":({editor:n})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:r})=>{n.state.schema.nodes[t]!==void 0&&AE(n,t,r)&&(e=!0)}),e}}}}),p8="listItem",nR="textStyle",rR=/^(\d+)\.\s$/,JN=qr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",an(this.options.HTMLAttributes,t),0]:["ol",an(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(p8,this.editor.getAttributes(nR)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=nc({find:rR,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=nc({find:rR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(nR)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),m8=/^\s*(\[([( |x])?\])\s$/,g8=qr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const e=n.getAttribute("data-checked");return e===""||e==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:e}){return["li",an(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:e,getPos:t,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),c=document.createElement("input"),h=document.createElement("div"),d=m=>{var y,v;c.ariaLabel=((v=(y=this.options.a11y)==null?void 0:y.checkboxLabel)==null?void 0:v.call(y,m,c.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};return d(n),o.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",m=>m.preventDefault()),c.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:y}=m.target;r.isEditable&&typeof t=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const _=t();if(typeof _!="number")return!1;const T=v.doc.nodeAt(_);return v.setNodeMarkup(_,void 0,{...T==null?void 0:T.attrs,checked:y}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,y)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,y])=>{i.setAttribute(m,y)}),i.dataset.checked=n.attrs.checked,c.checked=n.attrs.checked,o.append(c,l),i.append(o,h),Object.entries(e).forEach(([m,y])=>{i.setAttribute(m,y)}),{dom:i,contentDOM:h,update:m=>m.type!==this.type?!1:(i.dataset.checked=m.attrs.checked,c.checked=m.attrs.checked,d(m),!0)}}},addInputRules(){return[nc({find:m8,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),y8=qr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",an(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ct.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(qN.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push($N.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(XN.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(JN.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(g8.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(y8.configure(this.options.taskList)),n}});var v8=qr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",an(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),E8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,_8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,b8=Sa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",an(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[tc({find:E8,type:this.type})]},addPasteRules(){return[Nl({find:_8,type:this.type})]}}),T8=qr.create({name:"text",group:"inline"}),S8=Sa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",an(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function w8(n={}){return new nn({view(e){return new A8(e,n)}})}class A8{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,c=o.height/i.offsetHeight;if(t){let y=e.nodeBefore,v=e.nodeAfter;if(y||v){let _=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(_){let T=_.getBoundingClientRect(),A=y?T.bottom:T.top;y&&v&&(A=(A+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*c;r={left:T.left,right:T.right,top:A-C,bottom:A+C}}}}if(!r){let y=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*l;r={left:y.left-v,right:y.left+v,top:y.top,bottom:y.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let d,m;if(!h||h==document.body&&getComputedStyle(h).position=="static")d=-pageXOffset,m=-pageYOffset;else{let y=h.getBoundingClientRect(),v=y.width/h.offsetWidth,_=y.height/h.offsetHeight;d=y.left-h.scrollLeft*v,m=y.top-h.scrollTop*_}this.element.style.left=(r.left-d)/l+"px",this.element.style.top=(r.top-m)/c+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=nM(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Zt extends Ke{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Zt.valid(r)?new Zt(r):Ke.near(r)}content(){return be.empty}eq(e){return e instanceof Zt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Zt(e.resolve(t.pos))}getBookmark(){return new pb(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!C8(e)||!R8(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Zt.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let c=e.node(l);if(t>0?e.indexAfter(l)<c.childCount:e.index(l)>0){o=c.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=t;let h=e.doc.resolve(i);if(Zt.valid(h))return h}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!Ne.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=l,i+=t;let c=e.doc.resolve(i);if(Zt.valid(c))return c}return null}}}Zt.prototype.visible=!1;Zt.findFrom=Zt.findGapCursorFrom;Ke.jsonID("gapcursor",Zt);class pb{constructor(e){this.pos=e}map(e){return new pb(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Zt.valid(t)?new Zt(t):Ke.near(t)}}function C8(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function R8(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function x8(){return new nn({props:{decorations:N8,createSelectionBetween(n,e,t){return e.pos==t.pos&&Zt.valid(t)?new Zt(t):null},handleClick:I8,handleKeyDown:k8,handleDOMEvents:{beforeinput:M8}}})}const k8=qM({ArrowLeft:fp("horiz",-1),ArrowRight:fp("horiz",1),ArrowUp:fp("vert",-1),ArrowDown:fp("vert",1)});function fp(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,c=e>0?l.$to:l.$from,h=l.empty;if(l instanceof Fe){if(!o.endOfTextblock(t)||c.depth==0)return!1;h=!1,c=r.doc.resolve(e>0?c.after():c.before())}let d=Zt.findGapCursorFrom(c,e,h);return d?(i&&i(r.tr.setSelection(new Zt(d))),!0):!1}}function I8(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Zt.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Ne.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Zt(r))),!0)}function M8(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Zt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=ce.empty;for(let l=r.length-1;l>=0;l--)i=ce.from(r[l].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new be(i,0,0));return o.setSelection(Fe.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function N8(n){if(!(n.selection instanceof Zt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Gt.create(n.doc,[ar.widget(n.selection.head,e,{key:"gapcursor"})])}var Bm=200,Pn=function(){};Pn.prototype.append=function(e){return e.length?(e=Pn.from(e),!this.length&&e||e.length<Bm&&this.leafAppend(e)||this.length<Bm&&e.leafPrepend(this)||this.appendInner(e)):this};Pn.prototype.prepend=function(e){return e.length?Pn.from(e).append(this):this};Pn.prototype.appendInner=function(e){return new O8(this,e)};Pn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Pn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Pn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Pn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Pn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},t,r),i};Pn.from=function(e){return e instanceof Pn?e:e&&e.length?new ZN(e):Pn.empty};var ZN=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,c){for(var h=o;h<l;h++)if(i(this.values[h],c+h)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,c){for(var h=o-1;h>=l;h--)if(i(this.values[h],c+h)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Bm)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Bm)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Pn);Pn.empty=new ZN([]);var O8=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(o,c),l)===!1||o>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,o)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(o,c)-c,l+c)===!1||o<c&&this.left.forEachInvertedInner(r,Math.min(i,c),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Pn);const D8=500;class Ti{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,c,h,d=[],m=[];return this.items.forEach((y,v)=>{if(!y.step){i||(i=this.remapping(r,v+1),o=i.maps.length),o--,m.push(y);return}if(i){m.push(new Wi(y.map));let _=y.step.map(i.slice(o)),T;_&&l.maybeStep(_).doc&&(T=l.mapping.maps[l.mapping.maps.length-1],d.push(new Wi(T,void 0,void 0,d.length+m.length))),o--,T&&i.appendMap(T,o)}else l.maybeStep(y.step);if(y.selection)return c=i?y.selection.map(i.slice(o)):y.selection,h=new Ti(this.items.slice(0,r).append(m.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:l,selection:c}}addTransform(e,t,r,i){let o=[],l=this.eventCount,c=this.items,h=!i&&c.length?c.get(c.length-1):null;for(let m=0;m<e.steps.length;m++){let y=e.steps[m].invert(e.docs[m]),v=new Wi(e.mapping.maps[m],y,t),_;(_=h&&h.merge(v))&&(v=_,m?o.pop():c=c.slice(0,c.length-1)),o.push(v),t&&(l++,t=void 0),i||(h=v)}let d=l-r.depth;return d>L8&&(c=P8(c,d),l-=d),new Ti(c.append(o),l)}remapping(e,t){let r=new af;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new Ti(this.items.append(e.map(t=>new Wi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(v=>{v.selection&&c--},i);let h=t;this.items.forEach(v=>{let _=o.getMirror(--h);if(_==null)return;l=Math.min(l,_);let T=o.maps[_];if(v.step){let A=e.steps[_].invert(e.docs[_]),C=v.selection&&v.selection.map(o.slice(h+1,_));C&&c++,r.push(new Wi(T,A,C))}else r.push(new Wi(T))},i);let d=[];for(let v=t;v<l;v++)d.push(new Wi(o.maps[v]));let m=this.items.slice(0,i).append(d).append(r),y=new Ti(m,c);return y.emptyItemCount()>D8&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((l,c)=>{if(c>=e)i.push(l),l.selection&&o++;else if(l.step){let h=l.step.map(t.slice(r)),d=h&&h.getMap();if(r--,d&&t.appendMap(d,r),h){let m=l.selection&&l.selection.map(t.slice(r));m&&o++;let y=new Wi(d.invert(),h,m),v,_=i.length-1;(v=i.length&&i[_].merge(y))?i[_]=v:i.push(y)}}else l.map&&r--},this.items.length,0),new Ti(Pn.from(i.reverse()),o)}}Ti.empty=new Ti(Pn.empty,0);function P8(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Wi{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Wi(t.getMap().invert(),t,this.selection)}}}class Uo{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const L8=20;function V8(n,e,t,r){let i=t.getMeta(vl),o;if(i)return i.historyState;t.getMeta(B8)&&(n=new Uo(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(vl))return l.getMeta(vl).redo?new Uo(n.done.addTransform(t,void 0,r,kp(e)),n.undone,iR(t.mapping.maps),n.prevTime,n.prevComposition):new Uo(n.done,n.undone.addTransform(t,void 0,r,kp(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=t.getMeta("composition"),h=n.prevTime==0||!l&&n.prevComposition!=c&&(n.prevTime<(t.time||0)-r.newGroupDelay||!U8(t,n.prevRanges)),d=l?b0(n.prevRanges,t.mapping):iR(t.mapping.maps);return new Uo(n.done.addTransform(t,h?e.selection.getBookmark():void 0,r,kp(e)),Ti.empty,d,t.time,c??n.prevComposition)}else return(o=t.getMeta("rebased"))?new Uo(n.done.rebased(t,o),n.undone.rebased(t,o),b0(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Uo(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),b0(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function U8(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function iR(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,o,l)=>e.push(o,l));return e}function b0(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function z8(n,e,t){let r=kp(e),i=vl.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),c=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),h=new Uo(t?c:o.remaining,t?o.remaining:c,null,0,-1);return o.transform.setSelection(l).setMeta(vl,{redo:t,historyState:h})}let T0=!1,sR=null;function kp(n){let e=n.plugins;if(sR!=e){T0=!1,sR=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){T0=!0;break}}return T0}const vl=new Ln("history"),B8=new Ln("closeHistory");function j8(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new nn({key:vl,state:{init(){return new Uo(Ti.empty,Ti.empty,null,0,-1)},apply(e,t,r){return V8(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?t2:r=="historyRedo"?n2:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function e2(n,e){return(t,r)=>{let i=vl.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=z8(i,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const t2=e2(!1,!0),n2=e2(!0,!0);Ct.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc;if(((n==null?void 0:n.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=n=>{const e=(n==null?void 0:n.node)||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let n=!1;return[new nn({key:new Ln("characterCount"),appendTransaction:(e,t,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const l=o-i,c=0,h=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(c,h);return n=!0,d}n=!0},filterTransaction:(e,t)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:t.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,h=o-r,d=c-h,m=c;return e.deleteRange(d,m),!(this.storage.characters({node:e.doc})>r)}})]}});var H8=Ct.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[w8(this.options)]}});Ct.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nn({key:new Ln("focus"),props:{decorations:({doc:n,selection:e})=>{const{isEditable:t,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!t||!r)return Gt.create(n,[]);let l=0;this.options.mode==="deepest"&&n.descendants((h,d)=>{if(h.isText)return;if(!(i>=d&&i<=d+h.nodeSize-1))return!1;l+=1});let c=0;return n.descendants((h,d)=>{if(h.isText||!(i>=d&&i<=d+h.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&l-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(ar.node(d,d+h.nodeSize,{class:this.options.className}))}),Gt.create(n,o)}}})]}});var F8=Ct.create({name:"gapCursor",addProseMirrorPlugins(){return[x8()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=wt(Ie(n,"allowGapCursor",t)))!=null?e:null}}});Ct.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new nn({key:new Ln("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((l,c)=>{const h=r>=c&&r<=c+l.nodeSize,d=!l.isLeaf&&Sg(l);if((h||!this.options.showOnlyCurrent)&&d){const m=[this.options.emptyNodeClass];o&&m.push(this.options.emptyEditorClass);const y=ar.node(c,c+l.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:c,hasAnchor:h}):this.options.placeholder});i.push(y)}return this.options.includeChildren}),Gt.create(n,i)}}})]}});Ct.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:e}=this;return[new nn({key:new Ln("selection"),props:{decorations(t){return t.selection.empty||n.isFocused||!n.isEditable||mN(t.selection)||n.view.dragging?null:Gt.create(t.doc,[ar.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function oR({types:n,node:e}){return e&&Array.isArray(n)&&n.includes(e.type)||(e==null?void 0:e.type)===n}var q8=Ct.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const n=new Ln(this.name),e=Object.entries(this.editor.schema.nodes).map(([,t])=>t).filter(t=>(this.options.notAfter||[]).concat(this.options.node).includes(t.name));return[new nn({key:n,appendTransaction:(t,r,i)=>{const{doc:o,tr:l,schema:c}=i,h=n.getState(i),d=o.content.size,m=c.nodes[this.options.node];if(h)return l.insert(d,m.create())},state:{init:(t,r)=>{const i=r.tr.doc.lastChild;return!oR({node:i,types:e})},apply:(t,r)=>{if(!t.docChanged)return r;const i=t.doc.lastChild;return!oR({node:i,types:e})}}})]}}),$8=Ct.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>t2(n,e),redo:()=>({state:n,dispatch:e})=>n2(n,e)}},addProseMirrorPlugins(){return[j8(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),G8=Ct.create({name:"starterKit",addExtensions(){var n,e,t,r;const i=[];return this.options.bold!==!1&&i.push(TF.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(yF.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(qN.configure(this.options.bulletList)),this.options.code!==!1&&i.push(AF.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(xF.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(kF.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(H8.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(F8.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(IF.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(MF.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push($8.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(NF.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(VF.configure(this.options.italic)),this.options.listItem!==!1&&i.push($N.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(XN.configure((n=this.options)==null?void 0:n.listKeymap)),this.options.link!==!1&&i.push(l8.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(JN.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(v8.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(b8.configure(this.options.strike)),this.options.text!==!1&&i.push(T8.configure(this.options.text)),this.options.underline!==!1&&i.push(S8.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&i.push(q8.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),K8=G8,W8=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,i;const o=t.getAttribute("style"),l=(i=(r=t.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");t.setAttribute("style",`${l};${o}`)})},r2=Sa.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&W8(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",an(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:e})=>e.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),Y8=Ct.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const l=o[0].trim().toLowerCase(),c=o.slice(1).join(":").trim();if(l==="background-color")return c.replace(/['"]+/g,"")}}}return(e=n.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:n=>({chain:e})=>e().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Q8=Ct.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;const t=n.getAttribute("style");if(t){const r=t.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const l=o[0].trim().toLowerCase(),c=o.slice(1).join(":").trim();if(l==="color")return c.replace(/['"]+/g,"")}}}return(e=n.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),X8=Ct.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:e})=>e().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),J8=Ct.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Z8=Ct.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({chain:e})=>e().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Ct.create({name:"textStyleKit",addExtensions(){const n=[];return this.options.backgroundColor!==!1&&n.push(Y8.configure(this.options.backgroundColor)),this.options.color!==!1&&n.push(Q8.configure(this.options.color)),this.options.fontFamily!==!1&&n.push(X8.configure(this.options.fontFamily)),this.options.fontSize!==!1&&n.push(J8.configure(this.options.fontSize)),this.options.lineHeight!==!1&&n.push(Z8.configure(this.options.lineHeight)),this.options.textStyle!==!1&&n.push(r2.configure(this.options.textStyle)),n}});const eq=Ct.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize.replace(/["']+/g,""),renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}});var tq=Ct.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),nq=tq;const rq=Ct.create({name:"indentExtension",addGlobalAttributes(){return[{types:["paragraph"],attributes:{indent:{default:0,parseHTML:n=>parseInt(n.style.textIndent,10)>0?1:0,renderHTML:n=>n.indent?{style:`text-indent: ${n.indent*2}em`}:{}}}}]},addCommands(){return{indent:()=>({commands:n})=>n.updateAttributes("paragraph",{indent:1}),outdent:()=>({commands:n})=>n.updateAttributes("paragraph",{indent:0})}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.indent(),"Shift-Tab":()=>this.editor.commands.outdent()}}}),iq=({content:n,onChange:e})=>{const t=fF({extensions:[K8,r2,eq,nq.configure({types:["heading","paragraph"]}),rq],content:n,onUpdate:({editor:r})=>{e(r.getHTML())},editorProps:{attributes:{class:"prose dark:prose-invert prose-sm sm:prose-base lg:prose-lg xl:prose-2xl m-5 focus:outline-none h-[30vh] overflow-y-auto"}}});return ee.useEffect(()=>{t&&n!==t.getHTML()&&t.commands.setContent(n,{emitUpdate:!1})},[n,t]),t?L.jsxs("div",{children:[L.jsxs("div",{className:"flex flex-wrap gap-2 p-2 bg-gray-100 rounded-t-md",children:[L.jsx("button",{type:"button",onClick:()=>t.chain().focus().toggleBold().run(),className:`px-2 py-1 rounded ${t.isActive("bold")?"bg-gray-300":"bg-white"}`,children:""}),L.jsx("button",{type:"button",onClick:()=>t.chain().focus().toggleItalic().run(),className:`px-2 py-1 rounded ${t.isActive("italic")?"bg-gray-300":"bg-white"}`,children:""}),L.jsxs("select",{onChange:r=>t.chain().focus().setFontSize(r.target.value).run(),value:t.getAttributes("textStyle").fontSize||"",className:"bg-white",children:[L.jsx("option",{value:"12px",children:"12"}),L.jsx("option",{value:"16px",children:"16"}),L.jsx("option",{value:"20px",children:"20"}),L.jsx("option",{value:"24px",children:"24"}),L.jsx("option",{value:"32px",children:"32"}),L.jsx("option",{value:"48px",children:"48"}),L.jsx("option",{value:"64px",children:"64"}),L.jsx("option",{value:"72px",children:"72"})]}),L.jsx("button",{type:"button",onClick:()=>t.chain().focus().setTextAlign("left").run(),className:`px-2 py-1 rounded ${t.isActive({textAlign:"left"})?"bg-gray-300":"bg-white"}`,children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M3 4h18v2H3zm0 5h12v2H3zm0 5h18v2H3zm0 5h12v2H3z"})})}),L.jsx("button",{type:"button",onClick:()=>t.chain().focus().setTextAlign("center").run(),className:`px-2 py-1 rounded ${t.isActive({textAlign:"center"})?"bg-gray-300":"bg-white"}`,children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M3 4h18v2H3zm3 5h12v2H6zm-3 5h18v2H3zm3 5h12v2H6z"})})}),L.jsx("button",{type:"button",onClick:()=>t.chain().focus().setTextAlign("right").run(),className:`px-2 py-1 rounded ${t.isActive({textAlign:"right"})?"bg-gray-300":"bg-white"}`,children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M3 4h18v2H3zm9 5h9v2h-9zm-9 5h18v2H3zm9 5h9v2h-9z"})})}),L.jsx("button",{type:"button",onClick:()=>t.chain().focus().setTextAlign("justify").run(),className:`px-2 py-1 rounded ${t.isActive({textAlign:"justify"})?"bg-gray-300":"bg-white"}`,children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M3 4h18v2H3zm0 5h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"})})})]}),L.jsx(sF,{editor:t})]}):null};function aR(){const{id:n}=wR(),e=vf(),[t,r]=ee.useState({title:"",description:"",content:"",file:null}),[i,o]=ee.useState(null);ee.useEffect(()=>{n&&(async()=>{const v=Al(is,"gospels",n),_=await _k(v);if(_.exists()){const T=_.data();r({title:T.title,description:T.description,content:T.content,file:null}),o(T.imageUrl)}})()},[n]);const l=y=>{const{name:v,value:_}=y.target;r(T=>({...T,[v]:_}))},c=y=>{r(v=>({...v,content:y}))},h=y=>{var _;const v=((_=y.target.files)==null?void 0:_[0])||null;r(T=>({...T,file:v})),o(v?URL.createObjectURL(v):null)},d=()=>{r(y=>({...y,file:null})),o(null)},m=async y=>{y.preventDefault();try{let v=i;if(t.file){const T=wI(AI,`gospel-images/${t.file.name}`);await TI(T,t.file),v=await SI(T)}const _={title:t.title,description:t.description,content:t.content,imageUrl:v,updatedAt:new Date};if(n){const T=Al(is,"gospels",n);await Sk(T,_)}else await Ak(ig(is,"gospels"),{..._,createdAt:new Date});e("/admin/gospel")}catch(v){console.error("Error uploading file or saving data: ",v),alert("Failed to add gospel. Please try again.")}};return L.jsxs("div",{className:"p-6",children:[L.jsx("h3",{className:"text-3xl font-medium leading-6 text-gray-900 mb-10 text-center",children:n?"":""}),L.jsxs("form",{onSubmit:m,className:"mt-4 space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("input",{type:"text",name:"title",id:"title",value:t.title,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 border-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2"})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("input",{type:"text",name:"description",id:"description",value:t.description,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 border-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2"})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("div",{className:"mt-1 block w-full rounded-md border-gray-300 border-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2",children:L.jsx(iq,{content:t.content,onChange:c})})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-700",children:""}),L.jsx("div",{className:"mt-1 flex justify-center rounded-md border-2 border-dashed border-gray-300 px-6 pt-5 pb-6 relative",children:i?L.jsx("div",{className:"w-full",children:L.jsxs("div",{className:"w-fit relative",children:[L.jsx("img",{src:i,alt:"Preview",className:"w-fit rounded-md max-h-64"}),L.jsx("button",{onClick:d,className:"absolute top-1 right-1 rounded-full p-1 text-xs",children:L.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"30",height:"30",viewBox:"0 0 24 24",children:L.jsx("path",{d:"M 12 2 C 6.4889971 2 2 6.4889971 2 12 C 2 17.511003 6.4889971 22 12 22 C 17.511003 22 22 17.511003 22 12 C 22 6.4889971 17.511003 2 12 2 z M 12 4 C 16.430123 4 20 7.5698774 20 12 C 20 16.430123 16.430123 20 12 20 C 7.5698774 20 4 16.430123 4 12 C 4 7.5698774 7.5698774 4 12 4 z M 8.7070312 7.2929688 L 7.2929688 8.7070312 L 10.585938 12 L 7.2929688 15.292969 L 8.7070312 16.707031 L 12 13.414062 L 15.292969 16.707031 L 16.707031 15.292969 L 13.414062 12 L 16.707031 8.7070312 L 15.292969 7.2929688 L 12 10.585938 L 8.7070312 7.2929688 z"})})})]})}):L.jsxs("div",{className:"space-y-1 text-center",children:[L.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:L.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),L.jsxs("div",{className:"flex text-sm text-gray-600",children:[L.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-medium text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 hover:text-indigo-500",children:[L.jsx("span",{children:"Upload a file"}),L.jsx("input",{id:"file-upload",name:"file",type:"file",className:"sr-only",onChange:h,accept:"image/*"})]}),L.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),L.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})})]}),L.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[L.jsx("button",{type:"button",onClick:()=>e("/admin/gospel"),className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:""}),L.jsx("button",{type:"submit",className:"rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:n?"":" "})]})]})]})}function sq(){const{id:n}=wR(),[e,t]=ee.useState(null);return ee.useEffect(()=>{n&&(async()=>{const i=Al(is,"gospels",n),o=await _k(i);if(o.exists()){const l=o.data(),c={id:o.id,title:l.title,content:l.content,description:l.description,imageUrl:l.imageUrl,createdAt:l.createdAt.toDate()};t(c)}else console.log("No such document!")})()},[n]),e?L.jsxs("div",{className:"container mx-auto p-24",children:[L.jsx("h1",{className:"text-4xl font-bold mb-4 text-center",children:e.title}),L.jsx("p",{className:"text-gray-600 mb-4 text-center",children:e.description}),e.imageUrl&&L.jsx("img",{src:e.imageUrl,alt:e.title,className:"h-64 object-cover mb-4 rounded-lg mx-auto block"}),L.jsx("div",{className:"prose lg:prose-xl gospel-content",dangerouslySetInnerHTML:{__html:e.content}}),L.jsx("p",{className:"text-sm text-gray-500 mt-4",children:e.createdAt.toLocaleDateString("zh-tw")})]}):L.jsx("div",{children:"Loading..."})}const oq=(n,e)=>y6(qB,n,e);function aq(){const[n,e]=ee.useState({username:"",password:""}),[t,r]=ee.useState(!1),[i,o]=ee.useState(""),l=vf(),c=(d,m)=>{e({...n,[d]:m})},h=async d=>{d.preventDefault();try{await oq(n.username,n.password),l("/admin/gospel")}catch{o("Invalid username or password")}};return L.jsx("div",{className:"h-screen",children:L.jsxs("div",{className:`m-auto mt-20 p-3
                rounded-xl
                w-1/3 h-1/3
                grid grid-cols-1
              bg-slate-400 `,children:[L.jsx("h1",{className:"text-2xl text-center",children:""}),L.jsxs("form",{className:"w-full",children:[L.jsxs("div",{className:"m-auto w-2/3 mb-3 flex items-center justify-around",children:[L.jsx("label",{children:""}),L.jsx("input",{className:"bg-slate-50 rounded-xs ml-2 px-2 py-1",value:n.username,onChange:d=>c("username",d.target.value)})]}),L.jsxs("div",{className:"m-auto flex w-2/3 items-center justify-around",children:[L.jsx("label",{children:""}),L.jsxs("div",{className:"relative",children:[L.jsx("input",{className:"bg-slate-50 rounded-xs ml-2 px-2 py-1",type:t?"text":"password",value:n.password,onChange:d=>c("password",d.target.value)}),L.jsx("div",{className:"absolute top-0 right-1",onClick:()=>r(!t),children:"*"})]})]}),i&&L.jsx("p",{className:"text-red-500 text-center mt-4",children:i}),L.jsx("div",{className:"m-auto w-full flex justify-center mt-10",children:L.jsx("button",{className:"bg-slate-700 text-slate-50 rounded-xl py-2 px-4",onClick:d=>h(d),children:""})})]})]})})}const lq=sP([{path:"/",element:L.jsx(wP,{}),children:[{index:!0,element:L.jsx(bP,{})},{path:"/aboutus",element:L.jsx(TP,{})},{path:"/product",element:L.jsx($B,{})},{path:"/gospel",element:L.jsx(GB,{})},{path:"/gospel/:id",element:L.jsx(sq,{})},{path:"/tutorial",element:L.jsx(KB,{})}]},{path:"/admin",element:L.jsx(QB,{}),children:[{path:"/admin/product",element:L.jsx(JB,{})},{path:"/admin/gospel",element:L.jsx(ZB,{})},{path:"/admin/gospel/new",element:L.jsx(aR,{})},{path:"/admin/gospel/edit/:id",element:L.jsx(aR,{})}]},{path:"/admin/login",element:L.jsx(aq,{})},{path:"*",element:L.jsx(WB,{})}]);VO.createRoot(document.getElementById("root")).render(L.jsx(ee.StrictMode,{children:L.jsx(pP,{router:lq})}));
